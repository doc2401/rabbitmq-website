<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-4.1 docs-doc-page docs-doc-id-feature-flags/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Feature Flags | RabbitMQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" name="twitter:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" property="og:url" content="https://www.rabbitmq.com/rabbitmq-website/docs/feature-flags"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="4.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-4.1"><meta data-rh="true" name="docsearch:version" content="4.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-4.1"><meta data-rh="true" property="og:title" content="Feature Flags | RabbitMQ"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/rabbitmq-website/img/rabbitmq-logo.svg"><link data-rh="true" rel="canonical" href="https://www.rabbitmq.com/rabbitmq-website/docs/feature-flags"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/feature-flags" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/feature-flags" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H10VQIW16Y-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rabbitmq-website/blog/rss.xml" title="RabbitMQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rabbitmq-website/blog/atom.xml" title="RabbitMQ Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="RabbitMQ" href="/rabbitmq-website/opensearch.xml">







<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-domain-script="018ee308-473e-754f-b0c2-cbe82d25512f"></script>
<script>function OptanonWrapper(){}</script>
<script>function setGTM(e,t,o,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(o)[0],a=t.createElement(o),s="dataLayer"!=n?"&l="+n:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+r+s,i.parentNode.insertBefore(a,i)}var timer;function waitForOnetrustActiveGroups(){document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?(clearTimeout(timer),setGTM(window,document,"script","dataLayer","GTM-TT84L8K")):timer=setTimeout(waitForOnetrustActiveGroups,250)}document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?setGTM(window,document,"script","dataLayer","GTM-TT84L8K"):waitForOnetrustActiveGroups()</script><link rel="stylesheet" href="/rabbitmq-website/styles.css">
<script src="/rabbitmq-website/runtime~main.js" defer="defer"></script>
<script src="/rabbitmq-website/main.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-color-primary-contrast-background);color:var(--ifm-font-color-base)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong style="font-size: var(--ifm-h4-font-size);"><a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v4.1.0">RabbitMQ 4.1.0 is out</a></strong></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rabbitmq-website/"><div class="navbar__logo"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/rabbitmq-website/tutorials">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rabbitmq-website/docs">Docs</a><a class="navbar__item navbar__link" href="/rabbitmq-website/blog">Blog</a><a class="navbar__item navbar__link" href="/rabbitmq-website/contact">Support</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/rabbitmq-website/docs/feature-flags">4.1</a><ul class="dropdown__menu"><li class=""><strong>Release series</strong></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/next/feature-flags">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/rabbitmq-website/docs/feature-flags">4.1</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/4.0/feature-flags">4.0</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/3.13/feature-flags">3.13</a></li><li><a href="https://v3-12.rabbitmq.com/documentation.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">3.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/rabbitmq-website/release-information">Release Information</a></li></ul></div><a href="https://github.com/rabbitmq/rabbitmq-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/release-information">Release Information</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rabbitmq-website/docs/download">Install and Upgrade</a><button aria-label="Collapse sidebar category &#x27;Install and Upgrade&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/which-erlang">Erlang Version Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/signatures">Package Signatures</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/platforms">Supported Operating Systems</a><button aria-label="Expand sidebar category &#x27;Supported Operating Systems&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/kubernetes/operator/install-operator">Kubernetes Operator</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rabbitmq-website/docs/upgrade">Upgrade</a><button aria-label="Collapse sidebar category &#x27;Upgrade&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/rolling-upgrade">Rolling Upgrade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/blue-green-upgrade">Blue-Green Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/grow-then-shrink-upgrade">Grow-Then-Shrink Upgrade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rabbitmq-website/docs/feature-flags">Feature Flags</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/deprecated-features">Deprecated Features</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/snapshots">Snapshots</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/use-rabbitmq">How to Use RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Use RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/manage-rabbitmq">How to Manage RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Manage RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/monitoring">How to Monitor RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Monitor RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rabbitmq-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/download"><span itemprop="name">Install and Upgrade</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/upgrade"><span itemprop="name">Upgrade</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Feature Flags</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 4.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Feature Flags</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>In a mixed version cluster (e.g. some versions are 3.11.x and some are 3.12.x)
during an upgrade, some nodes will support a different set of features, behave
differently in certain scenarios, and otherwise not act exactly the same: they
are different versions after all.</p>
<p>Feature flags are a mechanism that controls what features are considered
to be enabled or available on all cluster nodes. If a feature flag is
enabled, so is its associated feature (or behavior). If not then all
nodes in the cluster will disable the feature (behavior).</p>
<p>The feature flag subsystem allows RabbitMQ nodes with different versions
to determine if they are compatible and then communicate together,
despite having different versions and thus potentially having different
feature sets or implementation details.</p>
<p>This subsystem was introduced to allow for <strong><a href="/rabbitmq-website/docs/upgrade#rolling-upgrade">rolling
upgrades</a> of cluster members without shutting down
the entire cluster</strong>.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Feature flags are not meant to be used as a form of cluster configuration.
After a successful rolling upgrade, users should enable all feature flags.</p><p>All feature flags become mandatory (graduate) at some point. For example,
<a href="https://github.com/rabbitmq/rabbitmq-server/blob/main/release-notes/3.12.0.md#compatibility-notes" target="_blank" rel="noopener noreferrer">RabbitMQ 3.12 requires</a> feature flags introduced in the 3.11 series to be enabled prior to the upgrade,
<a href="https://github.com/rabbitmq/rabbitmq-server/blob/main/release-notes/3.11.0.md#compatibility-notes" target="_blank" rel="noopener noreferrer">RabbitMQ 3.11 graduates</a> all 3.8 flags,
and so on.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tldr">Quick summary (TL;DR)<a href="#tldr" class="hash-link" aria-label="Direct link to Quick summary (TL;DR)" title="Direct link to Quick summary (TL;DR)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature-flag-ground-rules">Feature Flag Ground Rules<a href="#feature-flag-ground-rules" class="hash-link" aria-label="Direct link to Feature Flag Ground Rules" title="Direct link to Feature Flag Ground Rules">​</a></h3>
<ul>
<li>A feature flag can be enabled only if all nodes in the cluster support it</li>
<li>A node can join or re-join a cluster only if:<!-- -->
<ol>
<li>it supports all the feature flags enabled in the cluster and</li>
<li>if every other cluster member supports all the feature flags enabled on
that node</li>
</ol>
</li>
<li>Once enabled, a feature flag cannot be disabled</li>
</ul>
<p>For example, RabbitMQ 3.13.x and 3.12.x nodes are compatible as long as no
3.13.x-specific feature flags are enabled.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-cli-tool-commands">Key CLI Tool Commands<a href="#key-cli-tool-commands" class="hash-link" aria-label="Direct link to Key CLI Tool Commands" title="Direct link to Key CLI Tool Commands">​</a></h3>
<ul>
<li>To list feature flags:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl list_feature_flags</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>To enable a feature flag (or all currently disabled flags):<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl enable_feature_flag </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">all </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>It is also possible to list and enable feature flags from the
<a href="/rabbitmq-website/docs/management">Management plugin UI</a>, in &quot;<em>Admin &gt; Feature flags</em>&quot;.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1-compatible-nodes">Example 1: Compatible Nodes<a href="#example-1-compatible-nodes" class="hash-link" aria-label="Direct link to Example 1: Compatible Nodes" title="Direct link to Example 1: Compatible Nodes">​</a></h4>
<figure class="without-borders" style="max-width:500px"><p><img decoding="async" loading="lazy" alt="Example 1: 2 compatible nodes, the first node A has feature flags enabled and includes Toaster (set to ON), Coffee Maker (set to OFF), and Juicer Machine (set to OFF and deactivated). The second node, node B has feature flags enabled and includes Toaster (set to ON) and Coffee Maker (set to OFF)." src="/rabbitmq-website/assets/images/compatible-nodes-72a094f0f23abe01a1bf4c23a24f3bae.svg" width="1911" height="600" class="img_ev3q">
</p><figcaption>Example 1: Compatible Nodes</figcaption><p></p></figure>
<ul>
<li>If nodes A and B are not clustered, they can be clustered.</li>
<li>If nodes A and B are clustered:<!-- -->
<ul>
<li>&quot;<em>Coffee maker</em>&quot; can be enabled.</li>
<li>&quot;<em>Juicer machine</em>&quot; cannot be enabled because it is unsupported by node B.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2-incompatible-nodes">Example 2: Incompatible Nodes<a href="#example-2-incompatible-nodes" class="hash-link" aria-label="Direct link to Example 2: Incompatible Nodes" title="Direct link to Example 2: Incompatible Nodes">​</a></h4>
<figure class="without-borders" style="max-width:500px"><p><img decoding="async" loading="lazy" alt="Example 2: 2 incompatible nodes, the first node A has feature flags enabled and includes Toaster (set to ON), Coffee Maker (set to OFF), and Juicer Machine (set to ON). The second node, node B has feature flags enabled and includes Toaster (set to ON) and Coffee Maker (set to OFF)." src="/rabbitmq-website/assets/images/incompatible-nodes-5ed5d19933cf8405cbe85c59f46aacb8.svg" width="1911" height="600" class="img_ev3q">
</p><figcaption>Example 2: Incompatible Nodes</figcaption><p></p></figure>
<ul>
<li>If nodes A and B are not clustered, they cannot be clustered because
&quot;<em>Juicer machine</em>&quot; is unsupported on node B.</li>
<li>If nodes A and B are clustered and &quot;<em>Juicer machine</em>&quot; was enabled
while node B was stopped, node B cannot re-join the cluster on restart.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="version-compatibility">Feature Flags and RabbitMQ Versions<a href="#version-compatibility" class="hash-link" aria-label="Direct link to Feature Flags and RabbitMQ Versions" title="Direct link to Feature Flags and RabbitMQ Versions">​</a></h2>
<p>As covered earlier, the feature flags subsystem&#x27;s primary goal is to allow
upgrades regardless of the version of cluster members, to the extent possible.</p>
<p>Feature flags make it possible to safely perform a rolling upgrade to the
next patch or minor release, except if it is stated otherwise
in the release notes. Indeed, there are some changes which cannot be
implemented as feature flags.</p>
<figure class="without-borders" style="max-width:809px"><p><img decoding="async" loading="lazy" alt="Feature flags compatibility with different RabbitMQ versions." src="/rabbitmq-website/assets/images/feature-flags-and-rabbitmq-versions-a9a984b118dc447437f53f8f66afc32b.svg" width="3095" height="1410" class="img_ev3q">
</p><figcaption>Feature flags compatibility with different RabbitMQ versions.</figcaption><p></p></figure>
<p>However, note that only upgrading from one minor to the next minor
or major is supported. To upgrade from e.g. 3.9.16 to 3.12.3, it is
necessary to upgrade to 3.9.29 first, then to the latest 3.10 patch release,
then the latest 3.11 release, then 3.12.3. After certain steps in the
upgrade process it will also be necessary to enable all stable feature
flags available in that version. For example, 3.12.0 is a release
that requires all feature flags to be enabled before a node can be
upgraded to it.</p>
<p>Likewise if there is one or more
minor release branches between the minor version used and the next
major release. That might work (i.e. there could be no incompatible
changes between major releases), but this scenario is unsupported by design
for the following reasons:</p>
<ul>
<li>Skipping minor versions is not tested in CI.</li>
<li>Non-sequential releases may or may not support the same set of feature
flags. Feature flags present for several minor branches can be marked as
required and their associated feature/behavior is now implicitly enabled by
default. The compatibility code is removed in the process, preventing
clustering with older nodes. Remember their purpose is to allow upgrades,
they are not a configuration mechanism.</li>
</ul>
<p>There is no policy defining the life cycle of a feature flag in general. E.g.
there is no guaranty that a feature flag will go from &quot;stable&quot; to &quot;required&quot;
after N minor releasees. Because new code builds on top of existing code,
feature flags are marked as required and the compatibility code is removed
whenever it is needed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-list-feature-flags">How to List Supported Feature Flags<a href="#how-to-list-feature-flags" class="hash-link" aria-label="Direct link to How to List Supported Feature Flags" title="Direct link to How to List Supported Feature Flags">​</a></h2>
<p>When a node starts for the first time, all stable feature flags are enabled by
default. When a node is upgraded to a newer version of RabbitMQ, new feature
flags are left disabled.</p>
<p><strong>To list the feature flags</strong>, use <code>rabbitmqctl list_feature_flags</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl list_feature_flags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># =&gt; Listing feature flags ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># =&gt; name	state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># =&gt; empty_basic_get_metric	enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># =&gt; implicit_default_bindings	enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># =&gt; quorum_queue	enabled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For improved table readability, switch to the <code>pretty_table</code> formatter:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl </span><span class="token parameter variable" style="color:#36acaa">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--formatter</span><span class="token plain"> pretty_table list_feature_flags </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name state provided_by desc doc_url</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>which would produce a table that looks like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌───────────────────────────┬─────────┬───────────────────────────┬───────┬────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ name                      │ state   │ provided_by               │ desc  │ doc_url    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├───────────────────────────┼─────────┼───────────────────────────┼───────┼────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ empty_basic_get_metric    │ enabled │ rabbitmq_management_agent │ </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> │            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├───────────────────────────┼─────────┼───────────────────────────┼───────┼────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ implicit_default_bindings │ enabled │ rabbit                    │ </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> │            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├───────────────────────────┼─────────┼───────────────────────────┼───────┼────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ quorum_queue              │ enabled │ rabbit                    │ </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> │ http://</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────────────────────────┴─────────┴───────────────────────────┴───────┴────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As shown in the example above, the <code>list_feature_flags</code> command accepts
a list of columns to display. The available columns are:</p>
<ul>
<li><code>name</code>: the name of the feature flag.</li>
<li><code>state</code>: <em>enabled</em> or <em>disabled</em> if the feature flag is enabled or
disabled, <em>unsupported</em> if one or more nodes in the cluster do not
know this feature flag (and therefore it cannot be enabled).</li>
<li><code>provided_by</code>: the RabbitMQ component or plugin which provides the
feature flag.</li>
<li><code>desc</code>: the description of the feature flag.</li>
<li><code>doc_url</code>: the URL to a webpage to learn more about the feature flag.</li>
<li><code>stability</code>: indicates if the feature flag is <em>required</em>, <em>stable</em> or
<em>experimental</em>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-enable-feature-flags">How to Enable Feature Flags<a href="#how-to-enable-feature-flags" class="hash-link" aria-label="Direct link to How to Enable Feature Flags" title="Direct link to How to Enable Feature Flags">​</a></h2>
<p>After upgrading one node or the entire cluster, it will be possible
to enable new feature flags. Note that it will be impossible to roll
back the version or add a cluster member using the old version once new
feature flags are enabled.</p>
<p><strong>To enable a feature flag</strong>, use:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl enable_feature_flag </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>To enable all stable feature flags</strong>, use:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl enable_feature_flag all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The <code>rabbitmqctl enable_feature_flag all</code> command enables stable feature flags
only and not experimental ones.</p></div></div>
<p>The <code>list_feature_flags</code> command can be used again to verify the feature
flags&#x27; states. Assuming all feature flags were disabled initially, here
is the state after enabling the <code>quorum_queue</code> feature flag:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl </span><span class="token parameter variable" style="color:#36acaa">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--formatter</span><span class="token plain"> pretty_table list_feature_flags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌───────────────────────────┬──────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ name                      │ state    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├───────────────────────────┼──────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ empty_basic_get_metric    │ disabled │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├───────────────────────────┼──────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ implicit_default_bindings │ disabled │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├───────────────────────────┼──────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ quorum_queue              │ enabled  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────────────────────────┴──────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It is also possible to list and enable feature flags from the
<a href="/rabbitmq-website/docs/management">Management Plugin UI</a>, in &quot;<em>Admin &gt; Feature flags</em>&quot;:</p>
<figure><p><img decoding="async" loading="lazy" alt="Feature flags page on the Management Plugin User Interface, access this page by selecting Admin (which is a tab) and then Feature Flags (which is a menu option)." src="/rabbitmq-website/assets/images/management-ui-ff-panel-0993f1c705d74b14783f0f54aad54c9f.png" width="1025" height="416" class="img_ev3q">
</p><figcaption>Feature flags Page on the Management Plugin User Interface.</figcaption><p></p></figure>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-disable-feature-flags">How to Disable Feature Flags<a href="#how-to-disable-feature-flags" class="hash-link" aria-label="Direct link to How to Disable Feature Flags" title="Direct link to How to Disable Feature Flags">​</a></h2>
<p>It is <strong>impossible to disable a feature flag</strong> once it is enabled.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-start-new-node-disabled-feature-flags">How to Override the List of Feature Flags to Enable on Initial Startup<a href="#how-to-start-new-node-disabled-feature-flags" class="hash-link" aria-label="Direct link to How to Override the List of Feature Flags to Enable on Initial Startup" title="Direct link to How to Override the List of Feature Flags to Enable on Initial Startup">​</a></h2>
<p>By default a new and unclustered node will start with all stable feature flags
enabled, but this setting can be overridden.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Since enabled, feature flags
cannot be disabled, using this feature is only safe to use for enabling more flags.
Providing a list of flags identical to the currently enabled
list is also safe, of course.</p></div></div>
<p>This mechanism is only useful to allow a user to expand an existing cluster
with a node running a newer version of RabbitMQ compared to the rest of the
cluster. The compatibility with the new node is still verified and adding it to
the cluster may still fail if it is incompatible.</p>
<p>There are two ways to do this:</p>
<ol>
<li>
<p>Using the <code>RABBITMQ_FEATURE_FLAGS</code> environment variable:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># enables all feature flags in 4.0.6 except for khepri_db</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">RABBITMQ_FEATURE_FLAGS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;delete_ra_cluster_mqtt_node,virtual_host_metadata,stream_single_active_consumer,quorum_queue,classic_mirrored_queue_version,rabbit_mqtt_qos0_queue,implicit_default_bindings,empty_basic_get_metric,&#x27;rabbitmq_4.0.0&#x27;,message_containers,user_limits,queue_master_locator,detailed_queues_endpoint,stream_sac_coordinator_unblock_group,stream_update_config_command,stream_queue,stream_filtering,rabbit_exchange_type_local_random,quorum_queue_non_voters,tracking_records_in_ets,direct_exchange_routing_v2,amqp_address_v1,transient_nonexcl_queues,message_containers_deaths_v2,classic_queue_mirroring,management_metrics_collection,maintenance_mode_status,listener_records_in_ets,feature_flags_v2,global_qos,classic_queue_type_delivery_support,mqtt_v5,ram_node_type,drop_unroutable_metric,restart_streams&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Using the <code>forced_feature_flags_on_init</code> setting in <a href="/rabbitmq-website/docs/configure"><code>advanced.config</code></a>:</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token atom">rabbit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">%% enables all feature flags in 4.0.6 except for khepri_db</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom">forced_feature_flags_on_init</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">maintenance_mode_status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">direct_exchange_routing_v2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">user_limits</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">transient_nonexcl_queues</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">amqp_address_v1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token atom">stream_filtering</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">implicit_default_bindings</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">quorum_queue_non_voters</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token quoted-atom atom">&#x27;rabbitmq_4.0.0&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">tracking_records_in_ets</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">delete_ra_cluster_mqtt_node</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">classic_queue_type_delivery_support</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">restart_streams</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">message_containers_deaths_v2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">feature_flags_v2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token atom">empty_basic_get_metric</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">classic_queue_mirroring</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">rabbit_exchange_type_local_random</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">detailed_queues_endpoint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">stream_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">classic_mirrored_queue_version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">quorum_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">management_metrics_collection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">message_containers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">ram_node_type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">stream_sac_coordinator_unblock_group</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">drop_unroutable_metric</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">stream_single_active_consumer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">virtual_host_metadata</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">listener_records_in_ets</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">stream_update_config_command</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">global_qos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">queue_master_locator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">rabbit_mqtt_qos0_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token atom">mqtt_v5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">%% ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>The environment variable has precedence over the configuration parameter.</p>
<p>Obviously, required feature flags will always be enabled, regardless of this.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="graduation">Feature Flag Maturation and Graduation Process<a href="#graduation" class="hash-link" aria-label="Direct link to Feature Flag Maturation and Graduation Process" title="Direct link to Feature Flag Maturation and Graduation Process">​</a></h2>
<p>After their initial introduction into RabbitMQ, feature flags are <em>optional</em>,
that is, they only serve the purpose of allowing for a safe rolling cluster
upgrade.</p>
<p>Over time, however, features become more mature and future development of
RabbitMQ assumes that a certain set of features is available and can be relied
on by the users and developers alike. When that happens, feature flags
<em>graduate</em> to core (required) features in the next minor feature release.</p>
<p>It is very important to enable all feature flags after performing a rolling
cluster upgrade: in the future these flags will become mandatory, and
proactively enabling them will allow for a smoother upgrade experience in the
future.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="list-of-feature-flags">List of Feature Flags<a href="#list-of-feature-flags" class="hash-link" aria-label="Direct link to List of Feature Flags" title="Direct link to List of Feature Flags">​</a></h2>
<p>The feature flags listed below are provided by RabbitMQ core or one of the
tier-1 plugins bundled with RabbitMQ.</p>
<p>Column <code>Required</code> shows the RabbitMQ version <strong>before</strong> which a feature flag
MUST have been enabled. For example, if a feature flag is required in 3.12.0,
this feature flag must be enabled in 3.11.x (or earlier) before upgrading to
3.12.x. Otherwise, if a RabbitMQ node is upgraded to 3.12.x while this feature
flag is disabled, the RabbitMQ node will refuse to start in 3.12.x.</p>
<p>Column <code>Stable</code> shows the RabbitMQ version that introduced a feature flag. For
example, if a feature flag is stable in 3.11.0, that feature flag SHOULD be
enabled promptly after upgrading all nodes in a RabbitMQ cluster to version
3.11.x.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-feature-flags">Core Feature Flags<a href="#core-feature-flags" class="hash-link" aria-label="Direct link to Core Feature Flags" title="Direct link to Core Feature Flags">​</a></h3>
<p>The following feature flags are provided by RabbitMQ core.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Most feature flags listed below have very brief descriptions. This is because most feature flags only exist to
avoid potentially unsafe operations in mixed-version clusters, correct
a behavior that must be consistent across all cluster nodes, and so on.</p><p><code>khepri_db</code> is one exception because of <a href="/rabbitmq-website/docs/metadata-store">it scope</a>.</p></div></div>
<table><tr><th>Required</th><th>Stable</th><th>Feature flag name</th><th>Description</th></tr><tr><td></td><td>4.0</td><td>rabbitmq_4.0.0</td><td><p>Enables multiple features and changes introduced in RabbitMQ 4.0.</p><p>RabbitMQ 4.0 uses a single flag to control multiple features and changes.
If you upgrade to RabbitMQ 4.0, it will be running in
backwards-compatible mode until this feature flag is enabled. For example,
<a href="https://www.rabbitmq.com/blog/2024/08/28/quorum-queues-in-4.0" target="_blank" rel="noopener noreferrer">new quorum queue features</a> and
the <a href="https://www.rabbitmq.com/blog/2024/09/02/amqp-flow-control" target="_blank" rel="noopener noreferrer">new AMQP-1.0 flow control mechanism</a>
will not be available.</p></td></tr><tr><td></td><td>4.0</td><td>khepri_db</td><td><p></p><p>Enables <a href="./metadata-store">Khepri</a>, a Raft-based schema data store
with vastly superior (namely more predictable) node and network failure recovery characteristics
compared to Mnesia.</p><p></p><p></p><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Khepri is fully supported (just like Mnesia) starting with RabbitMQ 4.0. This feature flag must be
explicitly enabled (opt-in) due to its scope.</p></div></div><p></p><p></p><div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>Due to extensive Khepri schema changes in RabbitMQ 4.0, 3.13.x clusters that have Khepri enabled
won&#x27;t be upgradeable in-place to 4.0. Such clusters should use <a href="./blue-green-upgrade">Blue-Green deployment upgrade strategy</a>.</p></div></div><p></p><p></p><p>Make sure to first test Khepri with appropriate workloads in non-production environments before adopting it in production.</p><p></p></td></tr><tr><td></td><td>4.0</td><td>rabbit_exchange_type_local_random</td><td><p>Use by the <a href="./local-random-exchange">Local Random Exchange</a>.</p></td></tr><tr><td></td><td>3.13.1</td><td>quorum_queue_non_voters</td><td><p>Support for the non-voter quorum queue replica state</p></td></tr><tr><td></td><td>3.13.0</td><td>message_containers</td><td><p>Enables a new AMQP 1.0-based message format used internally</p></td></tr><tr><td></td><td>3.13.0</td><td>detailed_queues_endpoint</td><td><p>Introduces the <code>GET /api/queues/detailed</code> HTTP API endpoint,
reduces the number of metrics served by <code>GET /api/queues/</code></p></td></tr><tr><td>4.0.0</td><td>3.13.0</td><td>stream_filtering</td><td><p><a href="https://www.rabbitmq.com/blog/2023/10/16/stream-filtering">Stream filtering</a> support</p></td></tr><tr><td>4.0.0</td><td>3.13.0</td><td>stream_update_config_command</td><td><p>Removes <code>max_segment_size_bytes</code> from the list of policy keys that
can be dynamically updated for streams. Changing <code>max_segment_size_bytes</code> for an existing
cluster is not safe, so it is not a good fit for dynamic policy-based updates</p></td></tr><tr><td>4.0.0</td><td>3.12.0</td><td>restart_streams</td><td><p>Support for restarting streams with optional preferred next leader
argument. Used to implement stream leader rebalancing</p></td></tr><tr><td>4.0.0</td><td>3.12.0</td><td>stream_sac_coordinator_unblock_group</td><td><p><a href="https://github.com/rabbitmq/rabbitmq-server/issues/7743">Bug
fix</a> to unblock a group of consumers in a super stream partition</p></td></tr><tr><td>3.12.0</td><td>3.11.0</td><td>direct_exchange_routing_v2</td><td><p>v2 direct exchange routing implementation</p></td></tr><tr><td>3.12.0</td><td>3.11.0</td><td>feature_flags_v2</td><td><p>Feature flags subsystem v2</p></td></tr><tr><td>3.12.0</td><td>3.11.0</td><td>listener_records_in_ets</td><td><p>Store listener records in ETS instead of Mnesia</p></td></tr><tr><td>3.12.0</td><td>3.11.0</td><td>stream_single_active_consumer</td><td><a href="/blog/2022/07/05/rabbitmq-3-11-feature-preview-single-active-consumer-for-streams">Single active consumer for streams</a></td></tr><tr><td>3.12.0</td><td>3.11.0</td><td>tracking_records_in_ets</td><td><p>Store tracking records in ETS instead of Mnesia</p></td></tr><tr><td>3.12.0</td><td>3.10.9</td><td>classic_queue_type_delivery_support</td><td><p><a href="https://github.com/rabbitmq/rabbitmq-server/issues/5931">Bug
fix</a> for classic queue deliveries using mixed versions</p></td></tr><tr><td>3.12.0</td><td>3.9.0</td><td>stream_queue</td><td><p>Support queues of type <a href="./stream">stream</a></p></td></tr><tr><td>3.11.0</td><td>3.8.10</td><td>user_limits</td><td><p>Configure connection and channel limits for a user</p></td></tr><tr><td>3.11.0</td><td>3.8.8</td><td>maintenance_mode_status</td><td><p>Maintenance mode status</p></td></tr><tr><td>3.11.0</td><td>3.8.0</td><td>implicit_default_bindings</td><td><p>Default bindings are now implicit, instead of being stored in the
database</p></td></tr><tr><td>3.11.0</td><td>3.8.0</td><td>quorum_queue</td><td><p>Support queues of type <a href="./quorum-queues">quorum</a></p></td></tr><tr><td>3.11.0</td><td>3.8.0</td><td>virtual_host_metadata</td><td><p>Virtual host metadata (description, tags, etc.)</p></td></tr></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rabbitmq_management_agent-feature-flags">rabbitmq_management_agent Feature Flags<a href="#rabbitmq_management_agent-feature-flags" class="hash-link" aria-label="Direct link to rabbitmq_management_agent Feature Flags" title="Direct link to rabbitmq_management_agent Feature Flags">​</a></h3>
<p>The following feature flags are provided by plugin
<a href="https://github.com/rabbitmq/rabbitmq-server/tree/main/deps/rabbitmq_management_agent" target="_blank" rel="noopener noreferrer">rabbimq_management_agent</a>.</p>
<table><tr><th>Required</th><th>Stable</th><th>Feature flag name</th><th>Description</th></tr><tr><td>3.12.0</td><td>3.8.10</td><td>drop_unroutable_metric</td><td><p>Count unroutable publishes to be dropped in stats</p></td></tr><tr><td>3.12.0</td><td>3.8.10</td><td>empty_basic_get_metric</td><td><p>Count AMQP basic.get on empty queues in stats</p></td></tr></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rabbitmq_mqtt-feature-flags">rabbitmq_rabbitmq_mqtt Feature Flags<a href="#rabbitmq_mqtt-feature-flags" class="hash-link" aria-label="Direct link to rabbitmq_rabbitmq_mqtt Feature Flags" title="Direct link to rabbitmq_rabbitmq_mqtt Feature Flags">​</a></h3>
<p>The following feature flags are provided by plugin
<a href="/rabbitmq-website/docs/mqtt">rabbimq_mqtt</a>.</p>
<table><tr><th>Required</th><th>Stable</th><th>Feature flag name</th><th>Description</th></tr><tr><td></td><td>3.13.0</td><td>mqtt_v5</td><td><p>Support <a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html">MQTT 5.0</a></p></td></tr><tr><td></td><td>3.12.0</td><td>delete_ra_cluster_mqtt_node</td><td><a href="/blog/2023/03/21/native-mqtt#what-else-improves-with-native-mqtt-in-312">Delete Ra cluster mqtt_node since MQTT client IDs are tracked locally</a></td></tr><tr><td></td><td>3.12.0</td><td>rabbit_mqtt_qos0_queue</td><td><p>Support <a href="/blog/2023/03/21/native-mqtt#new-mqtt-qos-0-queue-type">pseudo queue type for MQTT QoS 0 subscribers</a> omitting a queue process</p></td></tr></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation">How Do Feature Flags Work?<a href="#implementation" class="hash-link" aria-label="Direct link to How Do Feature Flags Work?" title="Direct link to How Do Feature Flags Work?">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-for-operators">From an Operator Point of View<a href="#implementation-for-operators" class="hash-link" aria-label="Direct link to From an Operator Point of View" title="Direct link to From an Operator Point of View">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="node-and-version-compatibility">Node and Version Compatibility<a href="#node-and-version-compatibility" class="hash-link" aria-label="Direct link to Node and Version Compatibility" title="Direct link to Node and Version Compatibility">​</a></h4>
<p>There are two times when an operator has to consider feature flags:</p>
<ul>
<li>When <a href="/rabbitmq-website/docs/clustering">extending an existing cluster</a> by adding
nodes using a different version of RabbitMQ (older or newer), the
operator needs to pay attention to feature flags: they might prevent
clustering.</li>
<li>After <a href="/rabbitmq-website/docs/upgrade">upgrading a cluster</a>, the operator should take
a look at the new feature flags and perhaps enable them.</li>
</ul>
<p>A node compares its own list of feature flags with remote nodes&#x27; list
of feature flags to determine if it can join a cluster. The rules are
defined as:</p>
<ul>
<li>All feature flags enabled locally must be supported remotely.</li>
<li>All feature flags enabled remotely must be supported locally.</li>
</ul>
<p>It is important to understand the difference between <em>enabled</em> and
<em>supported</em>:</p>
<ul>
<li>A <em>supported</em> feature flag is one which is known by the node. It can
be enabled or disabled, but its state is irrelevant at this point.</li>
<li>An <em>enabled</em> feature flag is one which is activated and used by the
node. Per the definition above, it is implicitly a <em>supported</em>
feature flag.</li>
</ul>
<p>If one of those two conditions is not verified, the node cannot join or
re-join the cluster.</p>
<p>However, if it can join the cluster, the state of <em>enabled</em> feature
flags is synchronized between nodes: if a feature flag is enabled on one
node, it is enabled on all other nodes.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scope-of-the-feature-flags">Scope of the Feature Flags<a href="#scope-of-the-feature-flags" class="hash-link" aria-label="Direct link to Scope of the Feature Flags" title="Direct link to Scope of the Feature Flags">​</a></h4>
<p>The feature flags subsystem covers inter-node communication only. This
means the following scenarios are not covered and may not work as
initially expected.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-rabbitmqctl-on-a-remote-node">Using <code>rabbitmqctl</code> on a remote node<a href="#using-rabbitmqctl-on-a-remote-node" class="hash-link" aria-label="Direct link to using-rabbitmqctl-on-a-remote-node" title="Direct link to using-rabbitmqctl-on-a-remote-node">​</a></h4>
<p>Controlling a remote node with <code>rabbitmqctl</code> is only supported if the
remote node is running the same version of RabbitMQ as<code>rabbitmqctl</code>.</p>
<p>If <a href="/rabbitmq-website/docs/cli">CLI tools</a> from a different minor/major version of RabbitMQ is
used on a remote node, they may fail to work as expected or even have
unexpected side effects on the node.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="load-balancing-requests-to-the-http-api">Load-balancing Requests to the HTTP API<a href="#load-balancing-requests-to-the-http-api" class="hash-link" aria-label="Direct link to Load-balancing Requests to the HTTP API" title="Direct link to Load-balancing Requests to the HTTP API">​</a></h4>
<p>If a request sent to the HTTP API exposed by the <a href="/rabbitmq-website/docs/management">Management
plugin</a> goes through a load balancer, including one
from the management plugin UI, the API&#x27;s behavior and its response may
be different, depending on the version of the node which handled the
request. This is exactly the same if the domain name of the HTTP API
resolves to multiple IP addresses.</p>
<p>This situation may happen during a rolling upgrade if the management UI
is open in a browser with periodic automatic refresh.</p>
<p>For example, if the management UI was loaded from a RabbitMQ 3.11.x node
but it then queries a RabbitMQ 3.12.x node, the JavaScript code running
in the browser may fail with exceptions due to HTTP API changes.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-happens-when-a-feature-flag-is-enabled">What Happens When a Feature Flag is Enabled<a href="#what-happens-when-a-feature-flag-is-enabled" class="hash-link" aria-label="Direct link to What Happens When a Feature Flag is Enabled" title="Direct link to What Happens When a Feature Flag is Enabled">​</a></h4>
<p>When a feature flag is enabled with <code>rabbitmqctl</code>, here is what happens
internally:</p>
<ol>
<li>RabbitMQ verifies if the feature flag is already enabled. If yes, it
stops.</li>
<li>It verifies if the feature flag is supported. If no, it stops.</li>
<li>It marks the feature flag state as <em>state_changing</em>. This is an
internal transitional state to inform consumers of this feature
flag. Most of the time, it means that components depending on this
particular feature flag will be blocked until the state changes to
<em>enabled</em> or <em>disabled</em>.</li>
<li>It enables all feature flags this one depends on. Therefore for each
one of them, we go through this same procedure.</li>
<li>It executes the migration function, if there is one. This function
is responsible for preparing or converting various resources, such as
changing the schema of a database.</li>
<li>If all the steps above succeed, the feature flag state becomes
<em>enabled</em>. Otherwise, it is reverted back to <em>disabled</em>.</li>
</ol>
<p class="box-info"></p><p>As an operator, the most important part of this procedure to
remember is that <strong>if the migration takes time</strong>, some
components and thus <strong>some operations in RabbitMQ might be
blocked</strong> during the migration.</p><p></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-for-developers">From a Developer Point of View<a href="#implementation-for-developers" class="hash-link" aria-label="Direct link to From a Developer Point of View" title="Direct link to From a Developer Point of View">​</a></h3>
<p>When working on a plugin or a RabbitMQ core contribution, feature flags
should be used to make the new version of the code compatible with older
versions of RabbitMQ.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-a-feature-flag">When to Use a Feature Flag<a href="#when-to-use-a-feature-flag" class="hash-link" aria-label="Direct link to When to Use a Feature Flag" title="Direct link to When to Use a Feature Flag">​</a></h4>
<p>It is developer&#x27;s responsibility to look at the list of existing and
future (i.e. those added to the <code>main</code> branch) feature flags and see
if the new code can be adapted to take advantage of them.</p>
<p>Here is an example. When developing a plugin which used to use the
<code>#amqqueue{}</code> record defined in <code>rabbit_common/include/rabbit.hrl</code>, the
plugin has to be adapted to use the new <code>amqqueue</code> API which hides the
previous record (which is private now). However, there is no need to
query feature flags for that: the plugin will be ABI-compatible (i.e. no
need to recompile it) with RabbitMQ 3.8.0 and later. It should also be
ABI-compatible with RabbitMQ 3.7.x once the <code>amqqueue</code> appears in that
branch.</p>
<p>However if the plugin targets quorum queues introduced in RabbitMQ
3.8.0, it may have to query feature flags to determine what it can do.
For instance, can it declare a quorum queue? Can it even expect the new
fields added to <code>amqqueue</code> as part of the quorum queues implementation?</p>
<p>If the plugin carefully checks feature flags to avoid any incorrect
expectations, it will be compatible with many versions of RabbitMQ:
the user will not have to recompile anything or download another
version-specific copy of the plugin.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-declare-a-feature-flag">When to Declare a Feature Flag<a href="#when-to-declare-a-feature-flag" class="hash-link" aria-label="Direct link to When to Declare a Feature Flag" title="Direct link to When to Declare a Feature Flag">​</a></h4>
<p>If a plugin or core broker change modifies one of the following aspects:</p>
<ul>
<li>record definitions</li>
<li>replicated database schemas</li>
<li>the format of Erlang messages passed between nodes</li>
<li>modules and functions called from remote nodes</li>
</ul>
<p>Then compatibility with older versions of RabbitMQ becomes a concern.
This is where a new feature flag can help ensure a smoother upgrade
experience.</p>
<p>The two most important parts of a feature flag are:</p>
<ul>
<li>the declaration as a module attribute</li>
<li>the migration function</li>
</ul>
<p>The declaration is a module attribute which looks like this:</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token function" style="color:#d73a49">rabbit_feature_flag</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom">quorum_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">#</span><span class="token punctuation" style="color:#393A34">{</span><span class="token atom">desc</span><span class="token plain">          </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Support queues of type quorum&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">doc_url</span><span class="token plain">       </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://www.rabbitmq.com/docs/quorum-queues&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">stability</span><span class="token plain">     </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token atom">stable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token atom">migration_fun</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">?MODULE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom">quorum_queue_migration</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The migration function is a stateless function which looks like this:</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">quorum_queue_migration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">FeatureName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">_FeatureProps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom">enable</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">Tables</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ?</span><span class="token atom">quorum_queue_tables</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atom">rabbit_table</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">Tables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">Fields</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token atom">amqqueue</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">fields</span><span class="token punctuation" style="color:#393A34">(</span><span class="token atom">amqqueue_v2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">migrate_to_amqqueue_with_type</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">FeatureName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">Tables</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">Fields</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">quorum_queue_migration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">_FeatureName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">_FeatureProps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom">is_enabled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">Tables</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ?</span><span class="token atom">quorum_queue_tables</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atom">rabbit_table</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">Tables</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">Fields</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token atom">amqqueue</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">fields</span><span class="token punctuation" style="color:#393A34">(</span><span class="token atom">amqqueue_v2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atom">mnesia</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">table_info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token atom">rabbit_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom">attributes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=:=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">Fields</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">andalso</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token atom">mnesia</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">table_info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token atom">rabbit_durable_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom">attributes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=:=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">Fields</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>More implementation docs can be found in the <a href="https://github.com/rabbitmq/rabbitmq-server/blob/main/deps/rabbit/src/rabbit_feature_flags.erl" target="_blank" rel="noopener noreferrer"><code>rabbit_feature_flags</code> module
source
code</a>.</p>
<p>Erlang&#x27;s <code>edoc</code> reference can be generated locally from a RabbitMQ
repository clone or source archive:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gmake edoc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># =&gt;  ... Ignore warnings and errors...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Now open `doc/rabbit_feature_flags.html` in the browser.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-adapt-and-run-testsuites-with-mixed-version-clusters">How to Adapt and Run Testsuites with mixed-version clusters<a href="#how-to-adapt-and-run-testsuites-with-mixed-version-clusters" class="hash-link" aria-label="Direct link to How to Adapt and Run Testsuites with mixed-version clusters" title="Direct link to How to Adapt and Run Testsuites with mixed-version clusters">​</a></h4>
<p>When a feature or behavior depends on a feature flag (either in the
core broker or in a plugin), the associated testsuites must be adapted
to take this feature flag into account. It means that before running
the actual testcase, the setup code must verify if the feature flag is
supported and either enable it if it is, or skip the testcase. This is
the same for setup code running at the group or suite level.</p>
<p>There are helper functions in <code>rabbitmq-ct-heleprs</code> to ease that check.
Here is an example, taken from the <code>dynamic_qq_SUITE.erl</code> testsuite in
rabbitmq-server:</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">init_per_testcase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">Testcase</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">Config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">% (...)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">% 1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">% The broker or cluster is started: we rely on this to query feature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">% flags.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">Config1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token atom">rabbit_ct_helpers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">run_steps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token variable" style="color:#36acaa">Config</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token atom">rabbit_ct_broker_helpers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">setup_steps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token atom">rabbit_ct_client_helpers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">setup_steps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">% 2.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">% We try to enable the `quorum_queue` feature flag. The helper is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">% responsible for checking if the feature flag is supported and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">% enabling it.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token atom">rabbit_ct_broker_helpers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">enable_feature_flag</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">Config1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token atom">quorum_queue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token atom">ok</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">% The feature flag is enabled at this point. The setup can</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">% continue to play with `Config1` and the cluster.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token variable" style="color:#36acaa">Config1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">Skip</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">% The feature flag is unavailable/unsupported. The setup</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">% calls `end_per_testcase()` to stop the node/cluster and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">% skips the testcase.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">end_per_testcase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">Testcase</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">Config1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token variable" style="color:#36acaa">Skip</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It is possible to run testsuites locally in the context of a
mixed-version cluster. If configured to do so, <code>rabbitmq-ct-helpers</code>
will use a second version of RabbitMQ to start half of the nodes when
starting a cluster:</p>
<ul>
<li>Node 1 will be on the primary copy (the one used to start the testsuite)</li>
<li>Node 2 will be on the secondary copy (the one provided explicitly to
<code>rabbitmq-ct-helpers</code>)</li>
<li>Node 3 will be on the primary copy</li>
<li>Node 4 will be on the secondary copy</li>
<li>...</li>
</ul>
<p>To run a testsuite in the context of a mixed-version cluster:</p>
<ol>
<li>
<p>Clone the <code>rabbitmq-public-umbrella</code> repository and checkout the
appropriate branch or tag. This will be the <strong>secondary Umbrella</strong>.
In this example, the <code>v3.12.x</code> branch is used:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/rabbitmq/rabbitmq-server.git secondary-umbrella</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> secondary-umbrella</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout v3.12.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> co</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Compile RabbitMQ or the plugin being tested in the secondary
Umbrella. The <code>rabbitmq-federation</code> plugin is used as an example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> secondary-umbrella/deps/rabbitmq_federation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> dist</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Go to RabbitMQ or the same plugin in the primary copy:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> /path/to/primary/rabbitmq_federation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Run the testsuite. Here, two environment variables are specified to
configure the &quot;mixed-version cluster&quot; mode:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">SECONDARY_UMBRELLA</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/path/to/secondary-umbrella </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">RABBITMQ_FEATURE_FLAGS</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> tests</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The first environment variable, <code>SECONDARY_UMBRELLA</code>, tells
<code>rabbitmq-ct-helpers</code> where to find the secondary Umbrella, as
the name suggests. This is how the mixed-version cluster mode is
enabled.</p>
<p>The secondary environment variable, <code>RABBITMQ_FEATURE_FLAGS</code>, is set
to the empty string and tells RabbitMQ to start with all feature
flags disabled: this is mandatory to have a newer node compatible
with an older one.</p>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/rabbitmq/rabbitmq-website/tree/main/versioned_docs/version-4.1/feature-flags/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rabbitmq-website/docs/grow-then-shrink-upgrade"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Grow-Then-Shrink Upgrade</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rabbitmq-website/docs/deprecated-features"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deprecated Features</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#tldr" class="table-of-contents__link toc-highlight">Quick summary (TL;DR)</a><ul><li><a href="#feature-flag-ground-rules" class="table-of-contents__link toc-highlight">Feature Flag Ground Rules</a></li><li><a href="#key-cli-tool-commands" class="table-of-contents__link toc-highlight">Key CLI Tool Commands</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#version-compatibility" class="table-of-contents__link toc-highlight">Feature Flags and RabbitMQ Versions</a></li><li><a href="#how-to-list-feature-flags" class="table-of-contents__link toc-highlight">How to List Supported Feature Flags</a></li><li><a href="#how-to-enable-feature-flags" class="table-of-contents__link toc-highlight">How to Enable Feature Flags</a></li><li><a href="#how-to-disable-feature-flags" class="table-of-contents__link toc-highlight">How to Disable Feature Flags</a></li><li><a href="#how-to-start-new-node-disabled-feature-flags" class="table-of-contents__link toc-highlight">How to Override the List of Feature Flags to Enable on Initial Startup</a></li><li><a href="#graduation" class="table-of-contents__link toc-highlight">Feature Flag Maturation and Graduation Process</a></li><li><a href="#list-of-feature-flags" class="table-of-contents__link toc-highlight">List of Feature Flags</a><ul><li><a href="#core-feature-flags" class="table-of-contents__link toc-highlight">Core Feature Flags</a></li><li><a href="#rabbitmq_management_agent-feature-flags" class="table-of-contents__link toc-highlight">rabbitmq_management_agent Feature Flags</a></li><li><a href="#rabbitmq_mqtt-feature-flags" class="table-of-contents__link toc-highlight">rabbitmq_rabbitmq_mqtt Feature Flags</a></li></ul></li><li><a href="#implementation" class="table-of-contents__link toc-highlight">How Do Feature Flags Work?</a><ul><li><a href="#implementation-for-operators" class="table-of-contents__link toc-highlight">From an Operator Point of View</a></li><li><a href="#implementation-for-developers" class="table-of-contents__link toc-highlight">From a Developer Point of View</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn about RabbitMQ</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reach out to the RabbitMQ team</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rabbitmq" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rabbitmq/rabbitmq-server/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact?utm_source=rmq_release-information_tableheader&amp;utm_medium=rmq_website&amp;utm_campaign=tanzu">Long Term Commercial Support</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact">Contact Us</a></li><li class="footer__item"><a href="https://www.rabbitmq.com/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Broadcom</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tanzu.vmware.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VMware Tanzu<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/legal.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/trademark-guidelines">Trademark Guidelines</a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy/california-privacy-rights.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Your California Privacy Rights<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item ot-sdk-show-settings">Cookie Settings</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2005-2025 Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.</div></div></div></footer></div>
</body>
</html>