<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3.13 docs-doc-page docs-doc-id-connections/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Connections | RabbitMQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" name="twitter:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" property="og:url" content="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/connections"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.13"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.13"><meta data-rh="true" name="docsearch:version" content="3.13"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.13"><meta data-rh="true" property="og:title" content="Connections | RabbitMQ"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/rabbitmq-website/img/rabbitmq-logo.svg"><link data-rh="true" rel="canonical" href="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/connections"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/connections" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/connections" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H10VQIW16Y-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rabbitmq-website/blog/rss.xml" title="RabbitMQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rabbitmq-website/blog/atom.xml" title="RabbitMQ Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="RabbitMQ" href="/rabbitmq-website/opensearch.xml">







<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-domain-script="018ee308-473e-754f-b0c2-cbe82d25512f"></script>
<script>function OptanonWrapper(){}</script>
<script>function setGTM(e,t,o,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(o)[0],a=t.createElement(o),s="dataLayer"!=n?"&l="+n:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+r+s,i.parentNode.insertBefore(a,i)}var timer;function waitForOnetrustActiveGroups(){document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?(clearTimeout(timer),setGTM(window,document,"script","dataLayer","GTM-TT84L8K")):timer=setTimeout(waitForOnetrustActiveGroups,250)}document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?setGTM(window,document,"script","dataLayer","GTM-TT84L8K"):waitForOnetrustActiveGroups()</script><link rel="stylesheet" href="/rabbitmq-website/styles.css">
<script src="/rabbitmq-website/runtime~main.js" defer="defer"></script>
<script src="/rabbitmq-website/main.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-color-primary-contrast-background);color:var(--ifm-font-color-base)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong style="font-size: var(--ifm-h4-font-size);"><a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v4.1.0">RabbitMQ 4.1.0 is out</a></strong></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rabbitmq-website/"><div class="navbar__logo"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/rabbitmq-website/tutorials">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rabbitmq-website/docs/3.13">Docs</a><a class="navbar__item navbar__link" href="/rabbitmq-website/blog">Blog</a><a class="navbar__item navbar__link" href="/rabbitmq-website/contact">Support</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/rabbitmq-website/docs/3.13/connections">3.13</a><ul class="dropdown__menu"><li class=""><strong>Release series</strong></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/next/connections">Next</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/connections">4.1</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/4.0/connections">4.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/rabbitmq-website/docs/3.13/connections">3.13</a></li><li><a href="https://v3-12.rabbitmq.com/documentation.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">3.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/rabbitmq-website/release-information">Release Information</a></li></ul></div><a href="https://github.com/rabbitmq/rabbitmq-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs/3.13">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs/3.13/whats-new">What&#x27;s New</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/3.13/download">Install and Upgrade</a><button aria-label="Expand sidebar category &#x27;Install and Upgrade&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rabbitmq-website/docs/3.13/use-rabbitmq">How to Use RabbitMQ</a><button aria-label="Collapse sidebar category &#x27;How to Use RabbitMQ&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/publishers">Publishing Messages</a><button aria-label="Expand sidebar category &#x27;Publishing Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/consumers">Consuming Messages</a><button aria-label="Expand sidebar category &#x27;Consuming Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/queues">Queues</a><button aria-label="Expand sidebar category &#x27;Queues&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/streams">Streams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/channels">Channels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/reliability">Reliability and Data Safety</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/confirms">Consumer Acknowledgements and Publisher Confirms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/distributed">Network Distribution</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/plugins">Plugins</a><button aria-label="Expand sidebar category &#x27;Plugins&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rabbitmq-website/docs/3.13/protocols">Protocols</a><button aria-label="Collapse sidebar category &#x27;Protocols&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rabbitmq-website/docs/3.13/connections">Connections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/conversions">Inter-Protocol Property Conversion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/heartbeats">Heartbeats</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/extensions">Protocol Extensions</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/client-libraries">Client Libraries</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/3.13/manage-rabbitmq">How to Manage RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Manage RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/3.13/monitoring">How to Monitor RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Monitor RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->RabbitMQ<!-- --> <b>3.13</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/rabbitmq-website/docs/connections">latest version</a></b> (<!-- -->4.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rabbitmq-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/3.13/use-rabbitmq"><span itemprop="name">How to Use RabbitMQ</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/3.13/protocols"><span itemprop="name">Protocols</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Connections</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 3.13</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Connections</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>This guide covers various topics related to connections except for
network tuning or most networking-related topics. Those
are covered by the <a href="/rabbitmq-website/docs/3.13/networking">Networking</a> and <a href="/rabbitmq-website/docs/3.13/troubleshooting-networking">Troubleshooting Networking</a> guides.</p>
<p>RabbitMQ supports several protocols:</p>
<ul>
<li><a href="/rabbitmq-website/docs/3.13/specification">AMQP 0-9-1</a> with <a href="/rabbitmq-website/docs/3.13/extensions">extensions</a></li>
<li><a href="https://www.amqp.org/resources/download" target="_blank" rel="noopener noreferrer">AMQP 1.0</a></li>
<li><a href="/rabbitmq-website/docs/3.13/stream">RabbitMQ Stream Protocol</a></li>
<li><a href="/rabbitmq-website/docs/3.13/mqtt">MQTT</a> 3.1 through 5.0</li>
<li><a href="/rabbitmq-website/docs/3.13/stomp">STOMP</a> 1.0 through 1.2</li>
</ul>
<p>Note that despite the similarities in naming, AMQP 0-9-1 and AMQP 1.0 are different protocols, not
different versions of the same protocol.</p>
<p>Many topics in this guide are equally applicable to all protocols. When that&#x27;s not the case, the guide tries
to highlight protocol-specific features and practices.</p>
<p><a href="/rabbitmq-website/docs/3.13/channels">Channels</a> is a closely related concept in AMQP 0-9-1 which is also covered
in a separate guide.</p>
<p>This guide covers:</p>
<ul>
<li><a href="#basics">The basics</a> of how clients use RabbitMQ</li>
<li><a href="#lifecycle">Connection lifecycle</a></li>
<li>How to <a href="#tls">encrypt traffic on client connections</a></li>
<li>How <a href="#client-provided-names">clients can provide a connection name</a> for easier troubleshooting</li>
<li>Connection <a href="#logging">event logging</a></li>
<li><a href="#monitoring">Monitoring</a> of connections and how to detect <a href="#high-connection-churn">high connection churn</a> scenarios</li>
<li>Sustaining a <a href="#large-number-of-connections">large number of concurrent connections</a></li>
<li><a href="#tls">TLS</a></li>
<li><a href="#flow-control">Flow control</a></li>
<li><a href="#error-handling">Connection exceptions</a> (protocol errors)</li>
<li><a href="#capabilities">Client properties and capabilities</a></li>
<li><a href="#automatic-recovery">Network failure recovery</a></li>
</ul>
<p>and other topics related to connections.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="basics">The Basics<a href="#basics" class="hash-link" aria-label="Direct link to The Basics" title="Direct link to The Basics">​</a></h2>
<p>Applications interact with RabbitMQ using client libraries. There are <a href="/rabbitmq-website/client-libraries/devtools">client libraries</a>
available for many programming languages and platforms.
Each protocol has its own set of client libraries. Most client libraries are open source.</p>
<p>Both client libraries and applications that use them are referred to as &quot;clients&quot; in this guide.
Where the difference matters, a more specific term is used (e.g. &quot;application&quot;).</p>
<p>All protocols supported by RabbitMQ are TCP-based and assume long-lived connections (a new connection
is not opened per protocol operation) for efficiency. One client library connection uses a single
TCP connection. In order for a client to successfully connect, target RabbitMQ node must allow for
connections on a <a href="/rabbitmq-website/docs/3.13/networking">certain protocol-specific port</a>.</p>
<p>After a client <a href="#lifecycle">connects</a> and successfully authenticates with a RabbitMQ node, it can
publish and consume messages, define topology and perform other operations that are provided in the protocol
and supported both by the client library and the target RabbitMQ node.</p>
<p>Since connections are meant to be long-lived, clients usually <a href="/rabbitmq-website/docs/3.13/consumers">consume messages</a> by registering
a subscription and having messages delivered (pushed) to them instead of polling. Clients
that cannot keep a long-lived connection can use <a href="https://github.com/cloudamqp/amqproxy" target="_blank" rel="noopener noreferrer">a special proxy</a> to help reduce <a href="#high-connection-churn">connection churn</a>.</p>
<p>When a connection is no longer necessary, applications must close them to conserve resources.
Apps that fail to do it run the risk of eventually exhausting its target node of resources.</p>
<p>Operating systems have a <a href="/rabbitmq-website/docs/3.13/networking#open-file-handle-limit">limit around how many TCP connections (sockets) a single process can have open</a>
simultaneously. The limit is often sufficient for development and some QA environments.
<a href="/rabbitmq-website/docs/3.13/production-checklist">Production environments</a> must be configured to use a higher limit in order to support
a larger number of concurrent client connections.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="protocol-differences">Protocol Differences<a href="#protocol-differences" class="hash-link" aria-label="Direct link to Protocol Differences" title="Direct link to Protocol Differences">​</a></h3>
<p>Different messaging protocols use different ports. Ports also vary for plain TCP and TLS-enabled connections.
The <a href="/rabbitmq-website/docs/3.13/networking#ports">Networking guide</a> covers all ports used by RabbitMQ depending on what protocols are enabled, whether TLS
is used and so on.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="amqp-0-9-1">AMQP 0-9-1<a href="#amqp-0-9-1" class="hash-link" aria-label="Direct link to AMQP 0-9-1" title="Direct link to AMQP 0-9-1">​</a></h4>
<p>AMQP 0-9-1 provides a way for connections to multiplex over a single TCP connection. That means an application
can open multiple &quot;lightweight connections&quot; called channels on a single connection. AMQP 0-9-1 clients open one or more
channels after <a href="#lifecycle">connecting</a> and perform protocol operations (manage topology, publish, consume)
on the channels.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="amqp-10">AMQP 1.0<a href="#amqp-10" class="hash-link" aria-label="Direct link to AMQP 1.0" title="Direct link to AMQP 1.0">​</a></h4>
<p>AMQP 1.0 provides a way for connections to multiplex over a single TCP connection. That means an application
can open multiple &quot;lightweight connections&quot; called sessions on a single connection.
Applications then set up one or more links to publish and consume messages.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lifecycle">Connection Lifecycle<a href="#lifecycle" class="hash-link" aria-label="Direct link to Connection Lifecycle" title="Direct link to Connection Lifecycle">​</a></h2>
<p>In order for a client to interact with RabbitMQ it must first open a connection. This process
involves a number of steps:</p>
<ul>
<li>Application configures the client library it uses to use a certain connection endpoint (e.g. hostname and port)</li>
<li>The library resolves the hostname to one or more IP addresses</li>
<li>The library opens a TCP connection to the target IP address and port</li>
<li>After the server has accepted the TCP connection, protocol-specific negotiation procedure is performed</li>
<li>The server then <a href="/rabbitmq-website/docs/3.13/access-control">authenticates</a> the client</li>
<li>The client now can perform operations, each of which involves an <a href="/rabbitmq-website/docs/3.13/access-control">authorisation check</a> by the server.</li>
<li>The client retains the connections for as long as it needs to communicate with RabbitMQ</li>
</ul>
<p>This flow doesn&#x27;t change significantly from protocol to protocol but there are minor differences.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="protocol-differences-1">Protocol Differences<a href="#protocol-differences-1" class="hash-link" aria-label="Direct link to Protocol Differences" title="Direct link to Protocol Differences">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="amqp-0-9-1-1">AMQP 0-9-1<a href="#amqp-0-9-1-1" class="hash-link" aria-label="Direct link to AMQP 0-9-1" title="Direct link to AMQP 0-9-1">​</a></h4>
<p>AMQP 0-9-1 has a <a href="/rabbitmq-website/tutorials/amqp-concepts">model</a> that includes connections and channels. Channels allow for
connection multiplexing (having multiple logical connections on a &quot;physical&quot; or TCP one).</p>
<p>The maximum number of <a href="/rabbitmq-website/docs/3.13/channels">channels</a> that can be open on a connection simultaneously
is negotiated by client and server at connection time. The client cannot be configured to allow for
more channels than the server configured maximum.</p>
<p>After successfully opening a connection and authenticating, applications open one or more channels and use them
to perform protocol operations, e.g. define topology, consume and publish messages.</p>
<p>AMQP 0-9-1 supports different authentication mechanisms. While it&#x27;s most common for applications
to provide a pair of credentials, x509 certificates and PKI <a href="https://github.com/rabbitmq/rabbitmq-server/tree/main/deps/rabbitmq_auth_mechanism_ssl" target="_blank" rel="noopener noreferrer">can be used</a>
instead.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="amqp-10-1">AMQP 1.0<a href="#amqp-10-1" class="hash-link" aria-label="Direct link to AMQP 1.0" title="Direct link to AMQP 1.0">​</a></h4>
<p>AMQP 1.0 has a model that includes connections, sessions and links.</p>
<p>After successfully opening a connection and authenticating, an application opens one or more sessions. It then
attaches links to the session in order to publish and consume messages.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mqtt">MQTT<a href="#mqtt" class="hash-link" aria-label="Direct link to MQTT" title="Direct link to MQTT">​</a></h4>
<p>MQTT connections follow the flow described above. MQTT supports optional authentication.
When it is used, RabbitMQ uses a pre-configured set of credentials.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="stomp">STOMP<a href="#stomp" class="hash-link" aria-label="Direct link to STOMP" title="Direct link to STOMP">​</a></h4>
<p>STOMP connections follow the flow described above.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tls">Connection Traffic Encryption with TLS<a href="#tls" class="hash-link" aria-label="Direct link to Connection Traffic Encryption with TLS" title="Direct link to Connection Traffic Encryption with TLS">​</a></h2>
<p>All protocols supported by RabbitMQ allow for &quot;clear text&quot; (unencrypted) traffic, in other words,
TLS is not a requirement. However, using TLS is highly recommended for production systems
to prevent both traffic snopping and man-in-the-middle attacks.</p>
<p>Applications that use unencrypted connections will also send credentials as &quot;clear text&quot;.
Certain security scanners will report this as &quot;AMQP Cleartext Authentication&quot;.
The solution is to use TLS for those client connections.</p>
<p>To learn more, please refer to the guides dedicated to TLS: <a href="/rabbitmq-website/docs/3.13/ssl">TLS for client connections</a>,
<a href="/rabbitmq-website/docs/3.13/clustering-ssl">securing intra-cluster communication with TLS</a> and <a href="/rabbitmq-website/docs/3.13/troubleshooting-ssl">troubleshooting TLS</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="logging">Logging<a href="#logging" class="hash-link" aria-label="Direct link to Logging" title="Direct link to Logging">​</a></h2>
<p>RabbitMQ logs all inbound client connections that send at least 1 byte of data. Connections
that are opened without any activity will not be logged. This is to prevent TCP load balancer health
checks from flooding the logs.</p>
<p>Successful authentication, clean and unexpected connection closure will also be logged.</p>
<p>This topic is covered in more detail in the <a href="/rabbitmq-website/docs/3.13/logging#logged-events">Logging guide</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring">Monitoring<a href="#monitoring" class="hash-link" aria-label="Direct link to Monitoring" title="Direct link to Monitoring">​</a></h2>
<p>Number of currently open client connections and connection opening/closure rates are important metrics
of the system that should be <a href="/rabbitmq-website/docs/3.13/monitoring">monitored</a>. Monitoring them will help detect a number of
problems that are common in messaging-based system:</p>
<ul>
<li>Connection leaks</li>
<li><a href="#high-connection-churn">High connection churn</a></li>
</ul>
<p>Both problems eventually lead to node exhaustion of <a href="#resource-usage">resources</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-leaks">Connection Leaks<a href="#connection-leaks" class="hash-link" aria-label="Direct link to Connection Leaks" title="Direct link to Connection Leaks">​</a></h3>
<p>A connection leak is a condition under which an application repeatedly opens connections without closing them,
or at least closing only some of them.</p>
<p>Connection leaks eventually exhaust the node (or multiple target nodes) of <a href="/rabbitmq-website/docs/3.13/networking#open-file-handle-limit">file handles</a>,
which means any new inbound client, peer or CLI tool connection will be rejected. A build-up in the number of concurrent
connections also increases node&#x27;s memory consumption.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="relevant-metrics">Relevant Metrics<a href="#relevant-metrics" class="hash-link" aria-label="Direct link to Relevant Metrics" title="Direct link to Relevant Metrics">​</a></h4>
<p><a href="/rabbitmq-website/docs/3.13/management">Management UI</a> provides a chart of the total number of connections opened cluster-wide:</p>
<figure><p><img decoding="async" loading="lazy" alt="Global connection count in management UI" src="/rabbitmq-website/assets/images/mgmt-ui-global-connection-count-a458948102b999a263055b28d8acc3d5.png" width="637" height="84" class="img_ev3q"></p></figure>
<p>A connection leak on monitoring charts can be identified as a monotonically growing number of client connections.</p>
<p>It is also possible to see how many file handles and sockets does a specific node have, which can be useful
in determining connection leaks as well. The following chart demonstrates a very stable number of sockets
open on a node:</p>
<figure><p><img decoding="async" loading="lazy" alt="Node file handle and socket count in management UI" src="/rabbitmq-website/assets/images/mgmt-ui-node-socket-count-7e451cb69a2734149d5ef8c409ce28c7.png" width="1520" height="642" class="img_ev3q"></p></figure>
<p>This chart demonstrates a monotonically growing number of connections after a drop:</p>
<figure><p><img decoding="async" loading="lazy" alt="Node file handle and socket count growth in management UI" src="/rabbitmq-website/assets/images/mgmt-ui-node-socket-count-growth-cd133d2b826ee53bf0219509826fc27c.png" width="1514" height="636" class="img_ev3q"></p></figure>
<p>If the number of sockets used by a node keeps growing and growing, it is likely an indication
of a connection leak in one of the applications.</p>
<p>Some client libraries, <a href="/rabbitmq-website/client-libraries/java-api-guide#metrics">such as the Java client</a>, expose metrics including the number of currently
opened connections. Charting and monitoring application metrics around connections is the best way
to identify what app leaks connections or uses them in a suboptimal way.</p>
<p>In many applications that use long-lived connections and do not leak them the number of connections
grows on application start and then moderates (stays mostly stable with little fluctuation).</p>
<p><a href="/rabbitmq-website/docs/3.13/management">Management UI</a> provides a chart on the rate of newly opened connections as of <a href="/rabbitmq-website/release-information">RabbitMQ 3.7.9</a>.
Below is a chart that demonstrates a fairly low new connection rate:</p>
<figure><p><img decoding="async" loading="lazy" alt="Node connection churn in management UI" src="/rabbitmq-website/assets/images/mgmt-ui-node-connection-churn-3c1aeb7490ac6bd4b7647f550bb7d44c.png" width="1178" height="392" class="img_ev3q"></p></figure>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-connection-churn">High Connection Churn<a href="#high-connection-churn" class="hash-link" aria-label="Direct link to High Connection Churn" title="Direct link to High Connection Churn">​</a></h3>
<p>A system is said to have high connection churn when its rate of newly opened connections is consistently high and
its rate of closed connection is consistently high. This usually means that an application
uses short lived connections. While with some workloads this scenario is difficult to avoid,
long lived connections should be used instead when possible.</p>
<p>RabbitMQ collects metrics on connection churn and exposes them via <a href="/rabbitmq-website/docs/3.13/prometheus">Prometheus and Grafana</a> as well as <a href="/rabbitmq-website/docs/3.13/management">management UI</a> churn rate chart.
Below is a chart that demonstrates a fairly low connection churn with a comparable number of connections open and closed
in the given period of time:</p>
<figure><p><img decoding="async" loading="lazy" alt="Node connection churn in management UI" src="/rabbitmq-website/assets/images/mgmt-ui-node-connection-churn-3c1aeb7490ac6bd4b7647f550bb7d44c.png" width="1178" height="392" class="img_ev3q"></p></figure>
<p>While connection and disconnection rates are system-specific, rates consistently above 100/second likely indicate a suboptimal
connection management approach by one or more applications and usually are worth investigating.</p>
<figure><p><img decoding="async" loading="lazy" alt="High connection churn in management UI" src="/rabbitmq-website/assets/images/mgmt-ui-high-connection-churn-a8f950815f36df9024fe1ee12f60b576.png" width="1186" height="390" class="img_ev3q"></p></figure>
<p>Some clients and runtimes (notably PHP) do not use long-lived connections and high connection
churn rates are expected from them. A <a href="https://github.com/cloudamqp/amqproxy" target="_blank" rel="noopener noreferrer">specialized proxy</a> should be
used with those clients to mitigate the churn they naturally create.</p>
<p>Environments that experience high connection churn require <a href="/rabbitmq-website/docs/3.13/networking#dealing-with-high-connection-churn">TCP stack tuning to avoid resource exhaustion</a>
under churn.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resource-usage">Resource Usage<a href="#resource-usage" class="hash-link" aria-label="Direct link to Resource Usage" title="Direct link to Resource Usage">​</a></h2>
<p>Every connection consumes memory and one file handle on the target RabbitMQ node.</p>
<p>Most of the memory is used by connection&#x27;s TCP buffers. Their size can be <a href="/rabbitmq-website/docs/3.13/networking#tuning-for-large-number-of-connections-tcp-buffer-size">reduced</a>
significantly, which leads to significant per-connection memory consumption savings
at the cost of a comparable reduction in connection throughput.</p>
<p>The maximum number of file handles a RabbitMQ node can have open is <a href="/rabbitmq-website/docs/3.13/networking#open-file-handle-limit">limited by the kernel</a> and must
be raised in order to support a large number of connections.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="large-number-of-connections">Supporting a Large Number of Connections<a href="#large-number-of-connections" class="hash-link" aria-label="Direct link to Supporting a Large Number of Connections" title="Direct link to Supporting a Large Number of Connections">​</a></h2>
<p>In some environments it&#x27;s natural to have a large number of concurrently connected clients. For example,
systems that involve a large number of hardware clients (the Internet of Things a.k.a. IoT workloads)
can have many thousands of clients from day one.</p>
<p>Since connections <a href="#resource-usage">consume resources</a>, sustaining a large number of concurrent connections
requires reducing resource consumption or provisioning more resources or nodes. In practice those
two options are used in combination.</p>
<p>A large number of concurrent connections will generate a lot of metric (stats) emission events.
This increases CPU consumption even with mostly idle connections. To reduce this footprint,
increase the statistics collection interval using the <code>collect_statistics_interval</code> key:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sets the interval to 60 seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">collect_statistics_interval = 60000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The default is 5 seconds (5000 milliseconds).</p>
<p>Increasing the interval value to 30-60s will reduce CPU footprint and peak memory consumption.
This comes with a downside: with the value in the example above, metrics of said entities
will refresh every 60 seconds.</p>
<p>This can be perfectly reasonable in an <a href="/rabbitmq-website/docs/3.13/monitoring#monitoring-frequency">externally monitored</a> production system
but will make management UI less convenient to use for operators.</p>
<p>The <a href="/rabbitmq-website/docs/3.13/networking">Networking guide</a> has a section dedicated to <a href="/rabbitmq-website/docs/3.13/networking#tuning-for-large-number-of-connections">tuning for a large number of concurrent connections</a>.
It explains how to reduce per-connection memory footprint.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="flow-control">Flow Control<a href="#flow-control" class="hash-link" aria-label="Direct link to Flow Control" title="Direct link to Flow Control">​</a></h2>
<p>Connections that publish messages can outpace other parts of the system, most likely busy queues and queues
that perform replication. When that happens, <a href="/rabbitmq-website/docs/3.13/flow-control">flow control</a> is applied to
publishing connections. Connections that only consume messages <strong>are not affected</strong> by the flow control
applied to publishers.</p>
<p>It is therefore recommended that, when possible, publishers and consumers use separate connections
so that consumers are isolated from potential flow control that may be applied to publishing connections,
affecting <a href="/rabbitmq-website/docs/3.13/confirms">manual consumer acknowledgements</a>.</p>
<p>With slower consumers that use <a href="/rabbitmq-website/docs/3.13/confirms#acknowledgement-modes">automatic acknowledgement mode</a>
it is very likely that connections and channels will experience flow control when writing to
the TCP socket.</p>
<p><a href="/rabbitmq-website/docs/3.13/monitoring">Monitoring</a> systems can collect metrics on the number of connections in flow state.
Applications that experience flow control regularly may consider to use separate connections
to publish and consume to avoid flow control effects on non-publishing operations (e.g. queue management).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="error-handling">Error Handling and Protocol Exceptions<a href="#error-handling" class="hash-link" aria-label="Direct link to Error Handling and Protocol Exceptions" title="Direct link to Error Handling and Protocol Exceptions">​</a></h2>
<p>A connection can fail or be unable to satisfy a client operation. Such scenarios are called errors
or protocol exceptions. They can indicate a transient condition (e.g. a resource is locked),
a semantic issue, or a protocol implementation (e.g. incorrect framing).</p>
<p>Most errors in messaging protocols are considered to be unrecoverable. Note that protocol errors
are different from <a href="#automatic-recovery">network connectivity failures</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="protocol-differences-2">Protocol Differences<a href="#protocol-differences-2" class="hash-link" aria-label="Direct link to Protocol Differences" title="Direct link to Protocol Differences">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="amqp-0-9-1-2">AMQP 0-9-1<a href="#amqp-0-9-1-2" class="hash-link" aria-label="Direct link to AMQP 0-9-1" title="Direct link to AMQP 0-9-1">​</a></h4>
<p>In AMQP 0-9-1, connection errors are used to communicate unrecoverable (&quot;hard&quot;) errors, such as incorrect
framing or connection state violations. For example, if a channel with the same ID (number) is opened
more than once. After sending an error to the client, the connection is closed.</p>
<p>Errors that can be corrected and retried are communicated
using <a href="/rabbitmq-website/docs/3.13/channels#error-handling">channel exceptions</a> (&quot;soft errors&quot;).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="amqp-10-2">AMQP 1.0<a href="#amqp-10-2" class="hash-link" aria-label="Direct link to AMQP 1.0" title="Direct link to AMQP 1.0">​</a></h4>
<p>In AMQP 1.0, most errors fall into either <a href="http:/..oasis-open.org/amqp/core/v1.0/os/amqp-core-transport-v1.0-os.html#doc-idp239696" target="_blank" rel="noopener noreferrer">session errors</a> or
<a href="http:/..oasis-open.org/amqp/core/v1.0/os/amqp-core-transport-v1.0-os.html#doc-idp348080" target="_blank" rel="noopener noreferrer">link errors</a>.
A session error is unrecoverable and leads to all operations received by the peer that&#x27;s detected the
error to be discarded until session termination.</p>
<p>A link error is limited to a particular link. Since links can be attached and reattached without
affecting their session, in practice applications can retry an operation that&#x27;s failed after
correcting the root cause (if possible).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="stomp-1">STOMP<a href="#stomp-1" class="hash-link" aria-label="Direct link to STOMP" title="Direct link to STOMP">​</a></h4>
<p>In STOMP, the server communicates errors by sending an <a href="https://stomp.github.io/stomp-specification-1.2.html#ERROR" target="_blank" rel="noopener noreferrer">ERROR frame</a>
and closing TCP connection. The frame will contain an error message in the <code>message</code> field.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mqtt-31">MQTT 3.1<a href="#mqtt-31" class="hash-link" aria-label="Direct link to MQTT 3.1" title="Direct link to MQTT 3.1">​</a></h4>
<p>In MQTT 3.1, servers have a limited number of ways to communicate an error to a client. The primary way
is to close client&#x27;s TCP connection. This provides little context and limited visibility for developers.
This is a fundamental limitation of MQTT 3.1 design.</p>
<p>Quite often MQTT clients are configured to automatically reconnect and retry operations, potentially
creating loops of error triggering, connection storms and variations of the <a href="https://en.wikipedia.org/wiki/Thundering_herd_problem" target="_blank" rel="noopener noreferrer">thundering herd problem</a>.</p>
<p>With MQTT, inspecting <a href="/rabbitmq-website/docs/3.13/logging">server logs</a> and <a href="#monitoring">monitoring connections</a> is therefore of particular
importance.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="client-provided-names">Client-Provided Connection Name<a href="#client-provided-names" class="hash-link" aria-label="Direct link to Client-Provided Connection Name" title="Direct link to Client-Provided Connection Name">​</a></h2>
<p>RabbitMQ nodes have a limited amount of information about their clients:</p>
<ul>
<li>their TCP endpoint (source IP address and port)</li>
<li>the credentials used</li>
</ul>
<p>This information alone can make identifying applications and instances problematic, in particular when credentials can be
shared and clients connect over a load balancer but <a href="/rabbitmq-website/docs/3.13/networking#proxy-protocol">Proxy protocol</a> cannot be enabled.</p>
<p>To make it easier to identify clients in <a href="/rabbitmq-website/docs/3.13/logging">server logs</a> and <a href="/rabbitmq-website/docs/3.13/management">management UI</a>,
AMQP 0-9-1 client connections, including the RabbitMQ Java client, can provide a custom identifier.
If set, the identifier will be mentioned in log entries and management UI. The identifier is known as
the <strong>client-provided connection name</strong>. The name can be used to identify an application or a specific component
within an application. The name is optional; however, developers are strongly encouraged to provide one
as it would significantly simplify certain operational tasks.</p>
<p>Connection name must be specified using the <code>&quot;connection_name&quot;</code> field in the <a href="#capabilities">client capabilities table</a>.
Some client libraries, e.g. <a href="/rabbitmq-website/client-libraries/java-api-guide#client-provided-names">Java</a> and <a href="/rabbitmq-website/client-libraries/dotnet-api-guide#client-provided-names">.NET</a>,
provide more convenient ways of setting a custom name on a connection.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="capabilities">Client and Server Capabilities<a href="#capabilities" class="hash-link" aria-label="Direct link to Client and Server Capabilities" title="Direct link to Client and Server Capabilities">​</a></h2>
<p>Some protocols, namely AMQP 0-9-1, provide for clients and servers to express
their capabilities when opening a connection. This can be thought of as a
table of optional features that specific versions of RabbitMQ and client libraries
may or may not support. This mechanism is similar to <a href="/rabbitmq-website/docs/3.13/feature-flags">feature flags</a>
used by RabbitMQ nodes to determine what set of features is supported by all cluster
members, and if a new member would be able to join the cluster.</p>
<p>The values for these capability keys are typically booleans, indicating whether or not the capability
is supported, but may vary based on the nature of the capability.</p>
<p>For example, capability table presented by
a RabbitMQ node to a client may look like
(the format presented here can be thought of as pseudocode, since the
actual table encoding is in a binary format and would not be human-friendly):</p>
<div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{ &quot;product&quot;      = (longstr) &quot;RabbitMQ&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;platform&quot;     = (longstr) &quot;Erlang/OTP&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;information&quot;  = (longstr) &quot;Licensed under the MPL 2.0. Website: https://www.rabbitmq.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;capabilities&quot; = (table)   { &quot;exchange_exchange_bindings&quot; = (bool) true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               &quot;consumer_cancel_notify&quot;     = (bool) true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               &quot;basic.nack&quot;                 = (bool) true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               &quot;publisher_confirms&quot;         = (bool) true },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;version&quot;      = (longstr) &quot;3.12.10&quot; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The capabilities table for clients is optional: failure to present
such a table does not preclude the client from being able to
use extensions such as <a href="/rabbitmq-website/docs/3.13/e2e">exchange to exchange bindings</a>.
However, in some cases such as <a href="/rabbitmq-website/docs/3.13/consumer-cancel">consumer cancellation notification</a>,
the client must present the associated capability, otherwise RabbitMQ nodes will have no
way of knowing that the client is capable of receiving the additional notifications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-recovery">Recovery from Network Connection Failures<a href="#automatic-recovery" class="hash-link" aria-label="Direct link to Recovery from Network Connection Failures" title="Direct link to Recovery from Network Connection Failures">​</a></h2>
<p>Client&#x27;s TCP connection can fail or experience serious packet loss that would make RabbitMQ nodes
consider them <a href="/rabbitmq-website/docs/3.13/heartbeats">unavailable</a>.</p>
<p>Some client libraries provide a mechanism for automatic recovery from network connection failures.
<a href="/rabbitmq-website/client-libraries/java-api-guide#recovery">RabbitMQ Java client</a> and <a href="/rabbitmq-website/client-libraries/dotnet-api-guide#recovery">RabbitMQ .NET client</a> support such feature, for example.
This feature is largely protocol- and client library-specific.</p>
<p>Other clients may consider network failure recovery to be a responsibility of the application. In this
case they usually provide examples that include connection and topology recovery.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/rabbitmq/rabbitmq-website/tree/main/versioned_docs/version-3.13/connections/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rabbitmq-website/docs/3.13/protocols"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Which protocols does RabbitMQ support?</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rabbitmq-website/docs/3.13/conversions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Inter-Protocol Property Conversion</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#basics" class="table-of-contents__link toc-highlight">The Basics</a><ul><li><a href="#protocol-differences" class="table-of-contents__link toc-highlight">Protocol Differences</a></li></ul></li><li><a href="#lifecycle" class="table-of-contents__link toc-highlight">Connection Lifecycle</a><ul><li><a href="#protocol-differences-1" class="table-of-contents__link toc-highlight">Protocol Differences</a></li></ul></li><li><a href="#tls" class="table-of-contents__link toc-highlight">Connection Traffic Encryption with TLS</a></li><li><a href="#logging" class="table-of-contents__link toc-highlight">Logging</a></li><li><a href="#monitoring" class="table-of-contents__link toc-highlight">Monitoring</a><ul><li><a href="#connection-leaks" class="table-of-contents__link toc-highlight">Connection Leaks</a></li><li><a href="#high-connection-churn" class="table-of-contents__link toc-highlight">High Connection Churn</a></li></ul></li><li><a href="#resource-usage" class="table-of-contents__link toc-highlight">Resource Usage</a></li><li><a href="#large-number-of-connections" class="table-of-contents__link toc-highlight">Supporting a Large Number of Connections</a></li><li><a href="#flow-control" class="table-of-contents__link toc-highlight">Flow Control</a></li><li><a href="#error-handling" class="table-of-contents__link toc-highlight">Error Handling and Protocol Exceptions</a><ul><li><a href="#protocol-differences-2" class="table-of-contents__link toc-highlight">Protocol Differences</a></li></ul></li><li><a href="#client-provided-names" class="table-of-contents__link toc-highlight">Client-Provided Connection Name</a></li><li><a href="#capabilities" class="table-of-contents__link toc-highlight">Client and Server Capabilities</a></li><li><a href="#automatic-recovery" class="table-of-contents__link toc-highlight">Recovery from Network Connection Failures</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn about RabbitMQ</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reach out to the RabbitMQ team</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rabbitmq" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rabbitmq/rabbitmq-server/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact?utm_source=rmq_release-information_tableheader&amp;utm_medium=rmq_website&amp;utm_campaign=tanzu">Long Term Commercial Support</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact">Contact Us</a></li><li class="footer__item"><a href="https://www.rabbitmq.com/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Broadcom</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tanzu.vmware.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VMware Tanzu<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/legal.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/trademark-guidelines">Trademark Guidelines</a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy/california-privacy-rights.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Your California Privacy Rights<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item ot-sdk-show-settings">Cookie Settings</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2005-2025 Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.</div></div></div></footer></div>
</body>
</html>