<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3.13 docs-doc-page docs-doc-id-reliability" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Reliability Guide | RabbitMQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" name="twitter:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" property="og:url" content="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/reliability"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.13"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.13"><meta data-rh="true" name="docsearch:version" content="3.13"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.13"><meta data-rh="true" property="og:title" content="Reliability Guide | RabbitMQ"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/rabbitmq-website/img/rabbitmq-logo.svg"><link data-rh="true" rel="canonical" href="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/reliability"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/reliability" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/reliability" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H10VQIW16Y-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rabbitmq-website/blog/rss.xml" title="RabbitMQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rabbitmq-website/blog/atom.xml" title="RabbitMQ Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="RabbitMQ" href="/rabbitmq-website/opensearch.xml">







<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-domain-script="018ee308-473e-754f-b0c2-cbe82d25512f"></script>
<script>function OptanonWrapper(){}</script>
<script>function setGTM(e,t,o,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(o)[0],a=t.createElement(o),s="dataLayer"!=n?"&l="+n:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+r+s,i.parentNode.insertBefore(a,i)}var timer;function waitForOnetrustActiveGroups(){document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?(clearTimeout(timer),setGTM(window,document,"script","dataLayer","GTM-TT84L8K")):timer=setTimeout(waitForOnetrustActiveGroups,250)}document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?setGTM(window,document,"script","dataLayer","GTM-TT84L8K"):waitForOnetrustActiveGroups()</script><link rel="stylesheet" href="/rabbitmq-website/styles.css">
<script src="/rabbitmq-website/runtime~main.js" defer="defer"></script>
<script src="/rabbitmq-website/main.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-color-primary-contrast-background);color:var(--ifm-font-color-base)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong style="font-size: var(--ifm-h4-font-size);"><a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v4.1.0">RabbitMQ 4.1.0 is out</a></strong></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rabbitmq-website/"><div class="navbar__logo"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/rabbitmq-website/tutorials">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rabbitmq-website/docs/3.13">Docs</a><a class="navbar__item navbar__link" href="/rabbitmq-website/blog">Blog</a><a class="navbar__item navbar__link" href="/rabbitmq-website/contact">Support</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/rabbitmq-website/docs/3.13/reliability">3.13</a><ul class="dropdown__menu"><li class=""><strong>Release series</strong></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/next/reliability">Next</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/reliability">4.1</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/4.0/reliability">4.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/rabbitmq-website/docs/3.13/reliability">3.13</a></li><li><a href="https://v3-12.rabbitmq.com/documentation.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">3.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/rabbitmq-website/release-information">Release Information</a></li></ul></div><a href="https://github.com/rabbitmq/rabbitmq-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs/3.13">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs/3.13/whats-new">What&#x27;s New</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/3.13/download">Install and Upgrade</a><button aria-label="Expand sidebar category &#x27;Install and Upgrade&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rabbitmq-website/docs/3.13/use-rabbitmq">How to Use RabbitMQ</a><button aria-label="Collapse sidebar category &#x27;How to Use RabbitMQ&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/publishers">Publishing Messages</a><button aria-label="Expand sidebar category &#x27;Publishing Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/consumers">Consuming Messages</a><button aria-label="Expand sidebar category &#x27;Consuming Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/queues">Queues</a><button aria-label="Expand sidebar category &#x27;Queues&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/streams">Streams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/channels">Channels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rabbitmq-website/docs/3.13/reliability">Reliability and Data Safety</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/confirms">Consumer Acknowledgements and Publisher Confirms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/distributed">Network Distribution</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/plugins">Plugins</a><button aria-label="Expand sidebar category &#x27;Plugins&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/protocols">Protocols</a><button aria-label="Expand sidebar category &#x27;Protocols&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/client-libraries">Client Libraries</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/3.13/manage-rabbitmq">How to Manage RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Manage RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/3.13/monitoring">How to Monitor RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Monitor RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->RabbitMQ<!-- --> <b>3.13</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/rabbitmq-website/docs/reliability">latest version</a></b> (<!-- -->4.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rabbitmq-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/3.13/use-rabbitmq"><span itemprop="name">How to Use RabbitMQ</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Reliability and Data Safety</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 3.13</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Reliability Guide</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>This guides provides an overview features of
RabbitMQ and (some) of its supported protocols related to data safety
and failure handling.</p>
<p>They help application developers and operators achieve <strong>reliable delivery</strong>,
that is, to ensure that messages are always delivered, even encountering failures
of various kinds.</p>
<p>Data safety is a joint responsibility of RabbitMQ nodes, <a href="/rabbitmq-website/docs/3.13/publishers">publishers</a>
and <a href="/rabbitmq-website/docs/3.13/consumers">consumers</a>. Therefore, this guide provides an overview of
topics imported to each part of a messaging-based system.</p>
<p>This guide is primarily an overview. Each topic is discussed in more details
in its own dedicated guide.</p>
<p>The following guides discuss data safety and resilience topics in more detail:</p>
<ul>
<li><a href="/rabbitmq-website/docs/3.13/confirms">Acknowledgements and Confirms</a></li>
<li><a href="/rabbitmq-website/docs/3.13/clustering">Clustering</a></li>
<li><a href="/rabbitmq-website/docs/3.13/quorum-queues">Replicated Queues</a> and <a href="/rabbitmq-website/docs/3.13/streams">Streams</a></li>
<li><a href="/rabbitmq-website/docs/3.13/publishers">Publishers</a></li>
<li><a href="/rabbitmq-website/docs/3.13/consumers">Consumers</a></li>
<li><a href="/rabbitmq-website/docs/3.13/alarms">Resource Alarms</a></li>
<li><a href="/rabbitmq-website/docs/3.13/monitoring">Monitoring, Metrics and Health Checks</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-can-fail">What Can Fail?<a href="#what-can-fail" class="hash-link" aria-label="Direct link to What Can Fail?" title="Direct link to What Can Fail?">​</a></h2>
<p>Messaging-based systems are distributed by definition and can fail in
different, and sometimes subtle, ways.</p>
<p>Network connection problems and congestion are probably the most common class of failure.
Not only can networks fail, <a href="/rabbitmq-website/docs/3.13/heartbeats#tcp-proxies">firewalls can interrupt connections</a>
they consider to be idle, and network failures <a href="/rabbitmq-website/docs/3.13/heartbeats">take time to detect</a>.</p>
<p>In addition to connectivity failures, the server and client
applications can experience hardware failure (or software can crash)
at any time. Additionally, even if client applications keep running,
logic errors can cause <a href="/rabbitmq-website/docs/3.13/channels#error-handling">channel</a> or <a href="/rabbitmq-website/docs/3.13/connections#error-handling">connection errors</a> which force the
client to establish a new channel or connection and recover from the
problem.</p>
<p>This list of failures, of course, is not at all exhaustive. It does not cover more subtle failures
such as omission failures (failure to respond in a predictable amount of time),
performance degradations, malicious or buggy applications that exhaust the system of resources
and so on. Those failures can be detected with <a href="#monitoring">monitoring, metrics and health checks</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connection-failures">Connection Failures<a href="#connection-failures" class="hash-link" aria-label="Direct link to Connection Failures" title="Direct link to Connection Failures">​</a></h2>
<p>In the event of a network connection failure between a client and RabbitMQ node,
the client will need to establish a new connection to the broker. Any channels opened on the
previous connection will have been automatically closed and these will
need re-opening too.</p>
<p>In general when connections fail, the client will be informed by the
connection throwing an exception (or similar language construct).</p>
<p>Most client libraries provide a feature that automatically recovers from connection
failures. For cases where this opinionated recovery is not suitable, application
developers can implement their own recovery by defining connection failure
event handlers. See client documentation, such as the <a href="/rabbitmq-website/client-libraries/java-api-guide">Java</a>
and <a href="/rabbitmq-website/client-libraries/dotnet-api-guide">.NET client guides</a>, to learn more.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="confirms">Acknowledgements and Confirms<a href="#confirms" class="hash-link" aria-label="Direct link to Acknowledgements and Confirms" title="Direct link to Acknowledgements and Confirms">​</a></h3>
<p>When a connection fails, messages may be in transit between client and
server - they may be in the middle of being decoded or encoded on either side,
sit in TCP stack buffers, or be in flight on the wire. In such events
messages in transit will not be delivered — they will
need to be retransmitted. <a href="/rabbitmq-website/docs/3.13/confirms">Acknowledgements</a> let the server and
clients know when to do this.</p>
<p>Acknowledgements can be used in both directions - to allow a consumer
to indicate to the server that it has received and/or processed a delivery
and to allow the server to indicate the same thing to the
publisher. They are known as consumer acknowledgements and publisher confirms.</p>
<p>While TCP ensures that packets have been delivered to connection peer, and will
retransmit until they are, that only handles failures at the network
layer. Acknowledgements and confirms indicate that messages have been
received <strong>and acted upon</strong> by the peer application.
An acknowledgement signals both the receipt of a message, and a transfer of ownership where
the receiver assumes full responsibility for it.</p>
<p>Acknowledgements therefore have semantics. A consuming application
should not acknowledge messages until it has done whatever it needs to
do with them: recorded them in a data store, forwarded them on, or performed
any other operation. Once it does so, the broker is free
to mark the delivery for deletion.</p>
<p>Similarly, the broker will confirm messages once it has taken
responsibility for them. The details are covered in the <a href="/rabbitmq-website/docs/3.13/confirms">Acknowledgements and Confirms guide</a>.</p>
<p>Use of acknowledgements guarantees <strong>at least once</strong>
delivery. Without acknowledgements, message loss is possible
during publish and consume operations and
only <strong>at most once</strong> delivery is guaranteed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="heartbeats">Detecting Dead TCP Connections with Heartbeats<a href="#heartbeats" class="hash-link" aria-label="Direct link to Detecting Dead TCP Connections with Heartbeats" title="Direct link to Detecting Dead TCP Connections with Heartbeats">​</a></h2>
<p>In some types of network failure, packet loss can mean that
disrupted TCP connections take a moderately long time (about 11
minutes with default configuration on Linux, for example) to be
detected by the operating system. AMQP 0-9-1 offers a
<a href="/rabbitmq-website/docs/3.13/heartbeats">heartbeat feature</a> to ensure that the application layer
promptly finds out about disrupted connections (and also
completely unresponsive peers). Heartbeats also defend against
certain network equipment which may terminate &quot;idle&quot; TCP
connections. See the <a href="/rabbitmq-website/docs/3.13/heartbeats">guide on heartbeats</a> for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="broker-side">Data Safety on the RabbitMQ Side<a href="#broker-side" class="hash-link" aria-label="Direct link to Data Safety on the RabbitMQ Side" title="Direct link to Data Safety on the RabbitMQ Side">​</a></h2>
<p>In order to avoid losing messages on the RabbitMQ (as opposed to application) side, queues and messages
must be able to cope with RabbitMQ node restarts, node and hardware failures.</p>
<p>With some messaging protocols supported by RabbitMQ, applications control <a href="/rabbitmq-website/docs/3.13/queues#durability">durability of queues and messages</a>.
It&#x27;s therefore critically important that durable queues (or replicated queue types covered below)
are used for important data, and messages are <a href="/rabbitmq-website/docs/3.13/publishers#message-properties">published as persistent by publishers</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="clustering">Clustering and Queue Content Replication<a href="#clustering" class="hash-link" aria-label="Direct link to Clustering and Queue Content Replication" title="Direct link to Clustering and Queue Content Replication">​</a></h2>
<p><a href="/rabbitmq-website/docs/3.13/clustering">Clusters of nodes</a> offer redundancy and can tolerate failure of a single node.
In a RabbitMQ cluster, all definitions (of exchanges, bindings, users, etc) are replicated across the entire
cluster.</p>
<p><a href="/rabbitmq-website/docs/3.13/quorum-queues">Quorum queues</a>, <a href="/rabbitmq-website/docs/3.13/streams">streams</a> and superstreams (partitioned streams) are
replicated data structures. One of the nodes hosts a leader replica, others replicas are followers.
In case of leader failure one of the followers is elected to be a new leader. Queue state changes (enqueueing, keeping track
of deliveries and acknowledgements) happen on the leader replica, although some operations can be
performed on followers, too.</p>
<p>Queues and streams remain visible and reachable from all nodes regardless
of what node their leader replica is located. During a leader re-election, in flight
message delivery will be paused for quorum queues until a new leader is elected.
In the case of a successful leader election, this happens transparently to clients.</p>
<p><a href="/rabbitmq-website/docs/3.13/queues#exclusive-queues">Exclusive queues</a> are tied to the lifecycle of their connection and thus are never
replicated and by definition will not survive a node restart.</p>
<p>Consumers connected to the failed node will have to recover as usual. Consumers that were
connected to a different node will be automatically re-registered by RabbitMQ when a new leader replica
for the queue is elected. Those consumers do not need to perform recovery
(e.g. reconnect or resubscribe).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="publisher-side">Data Safety on the Publisher Side<a href="#publisher-side" class="hash-link" aria-label="Direct link to Data Safety on the Publisher Side" title="Direct link to Data Safety on the Publisher Side">​</a></h2>
<p>When using confirms, producers recovering from a channel or connection
failure should retransmit any messages for which an acknowledgement
has not been received from the broker. There is a possibility of
message duplication here, because the broker might have sent a
confirmation that never reached the producer (due to network failures,
etc). Therefore consumer applications will need to perform
deduplication or handle incoming messages in an idempotent manner.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="routing">Ensuring that Messages are Routed<a href="#routing" class="hash-link" aria-label="Direct link to Ensuring that Messages are Routed" title="Direct link to Ensuring that Messages are Routed">​</a></h3>
<p>In some circumstances it can be important for producers to ensure that
their messages are being routed to queues (although not always - in
the case of a pub-sub system producers will just publish and if no
consumers are interested it is correct for messages to be dropped).</p>
<p>To ensure messages are routed to a single known queue, the producer
can just declare a destination queue and publish directly to it. If
messages may be routed in more complex ways but the producer still
needs to know if they reached at least one queue, it can set the
<code>mandatory</code> flag on a <code>basic.publish</code>, ensuring
that a <code>basic.return</code> (containing a reply code and some
textual explanation) will be sent back to the client if no queues were
appropriately bound. See the <a href="/rabbitmq-website/docs/3.13/publishers">Publishers guide</a> for details.</p>
<p>Producers should also be aware that when publishing to a clustered node,
if one or more destination queues that are bound to the exchange have
mirrors in the cluster, it&#x27;s possible to incur delays in the face of
network failures between nodes, due to flow control between replicas
and the queue leader replica. See <a href="/rabbitmq-website/docs/3.13/nettick">inter-node heartbeat guide</a> for
more details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="consumer-side">Data Safety on the Consumer Side<a href="#consumer-side" class="hash-link" aria-label="Direct link to Data Safety on the Consumer Side" title="Direct link to Data Safety on the Consumer Side">​</a></h2>
<p>In the event of network failure (or a node failure), messages can be
<a href="/rabbitmq-website/docs/3.13/consumers#message-properties">redelivered</a>, and consumers must be prepared to handle
deliveries they have seen in the past. It is recommended that consumer implementation
is designed to be idempotent rather than to explicitly
perform deduplication.</p>
<p>If a message is delivered to a consumer and then requeued, either <a href="/rabbitmq-website/docs/3.13/confirms#automatic-requeueing">automatically</a> by
RabbitMQ or by the same or different consumer, RabbitMQ will set the <code>redelivered</code> flag on
it when it is delivered again. This is a hint that a consumer <strong>may</strong> have seen
this message before. This is not guaranteed as the original delivery might have not made it to any consumers
due to a network or consumer application failure.</p>
<p>If the <code>redelivered</code> flag is not set then it is guaranteed that the message has not been seen
before. Therefore if a consumer finds it more expensive to deduplicate
messages or process them in an idempotent manner, it can do this only
for messages with the <code>redelivered</code> flag set.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unprocessable-deliveries">Unprocessable Deliveries<a href="#unprocessable-deliveries" class="hash-link" aria-label="Direct link to Unprocessable Deliveries" title="Direct link to Unprocessable Deliveries">​</a></h3>
<p>If a consumer determines that it cannot handle a message then it
can reject it using the <code>basic.reject</code> or <code>basic.nack</code> method, either asking the server to requeue it,
or not (in which case the server might be configured
to <a href="/rabbitmq-website/docs/3.13/dlx">dead-letter</a> it instead).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cancel-notification">Consumer Cancel Notification<a href="#cancel-notification" class="hash-link" aria-label="Direct link to Consumer Cancel Notification" title="Direct link to Consumer Cancel Notification">​</a></h3>
<p>When the queue a consumer was consuming from has been deleted, RabbitMQ will <a href="/rabbitmq-website/docs/3.13/consumer-cancel">notify the consumer</a>.
Such consumer must take action to recover, whether it is consuming from a different queue or redeclaring
the one it was originally consuming from when this is safe and appropriate.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="federation-and-shovel">Federation and Shovel<a href="#federation-and-shovel" class="hash-link" aria-label="Direct link to Federation and Shovel" title="Direct link to Federation and Shovel">​</a></h2>
<p>RabbitMQ provides two plugins to assist with distributing nodes over
unreliable networks (such as wide-area networks): <a href="/rabbitmq-website/docs/3.13/federation">Federation</a> and
the <a href="/rabbitmq-website/docs/3.13/shovel">Shovel</a>. Both will recover from network failures and retransmit messages when necessary.
Both use confirms and acknowledgements by default.</p>
<p>When connecting clusters with Federation or the Shovel, it is
desirable to ensure that the federation links and Shovels can recover
from node failures, including permanent (<strong>fail-stop</strong>) scenarios.</p>
<p>Federation will automatically distribute links across
the downstream cluster and migrate them on failure of a downstream
node. In order to connect to a new upstream when an upstream
node fails, <strong>multiple upstream URIs</strong> must be specified for an upstream,
or connection has to happen over a load balancer with sufficient availability characteristics.</p>
<p>Shovels can use multiple source and destination endpoints; first reachable endpoint will be used.
A failed Shovel will be restarted after a configurable delay and retry.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring">Monitoring and Health Checks<a href="#monitoring" class="hash-link" aria-label="Direct link to Monitoring and Health Checks" title="Direct link to Monitoring and Health Checks">​</a></h2>
<p>Some failure scenarios are subtle and hard to observe or detect. For example, a slow <a href="/rabbitmq-website/docs/3.13/connections">connection leak</a>
can build up over time and like a chronic disease, go unnoticed for a period of time. <a href="/rabbitmq-website/docs/3.13/monitoring">Monitoring and metrics</a>
is the way to detect many types of failures. Longer-term metric data collected using tools such as <a href="/rabbitmq-website/docs/3.13/prometheus">Prometheus</a>
can help spot irregularities and problematic patterns in system behaviour.</p>
<p>In addition to monitoring, <a href="/rabbitmq-website/docs/3.13/monitoring#health-checks">health checks</a> is another tool that can be used to detect
<strong>point-in-time</strong> problems, that is, problems observable at the moment. Extensive health check coverage can result in false positives so more checks is not always better.</p>
<p>Both monitoring and health checks are covered in a <a href="/rabbitmq-website/docs/3.13/monitoring">dedicated guide</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/rabbitmq/rabbitmq-website/tree/main/versioned_docs/version-3.13/reliability.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rabbitmq-website/docs/3.13/channels"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Channels</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rabbitmq-website/docs/3.13/confirms"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Consumer Acknowledgements and Publisher Confirms</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#what-can-fail" class="table-of-contents__link toc-highlight">What Can Fail?</a></li><li><a href="#connection-failures" class="table-of-contents__link toc-highlight">Connection Failures</a><ul><li><a href="#confirms" class="table-of-contents__link toc-highlight">Acknowledgements and Confirms</a></li></ul></li><li><a href="#heartbeats" class="table-of-contents__link toc-highlight">Detecting Dead TCP Connections with Heartbeats</a></li><li><a href="#broker-side" class="table-of-contents__link toc-highlight">Data Safety on the RabbitMQ Side</a></li><li><a href="#clustering" class="table-of-contents__link toc-highlight">Clustering and Queue Content Replication</a></li><li><a href="#publisher-side" class="table-of-contents__link toc-highlight">Data Safety on the Publisher Side</a><ul><li><a href="#routing" class="table-of-contents__link toc-highlight">Ensuring that Messages are Routed</a></li></ul></li><li><a href="#consumer-side" class="table-of-contents__link toc-highlight">Data Safety on the Consumer Side</a><ul><li><a href="#unprocessable-deliveries" class="table-of-contents__link toc-highlight">Unprocessable Deliveries</a></li><li><a href="#cancel-notification" class="table-of-contents__link toc-highlight">Consumer Cancel Notification</a></li></ul></li><li><a href="#federation-and-shovel" class="table-of-contents__link toc-highlight">Federation and Shovel</a></li><li><a href="#monitoring" class="table-of-contents__link toc-highlight">Monitoring and Health Checks</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn about RabbitMQ</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reach out to the RabbitMQ team</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rabbitmq" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rabbitmq/rabbitmq-server/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact?utm_source=rmq_release-information_tableheader&amp;utm_medium=rmq_website&amp;utm_campaign=tanzu">Long Term Commercial Support</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact">Contact Us</a></li><li class="footer__item"><a href="https://www.rabbitmq.com/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Broadcom</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tanzu.vmware.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VMware Tanzu<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/legal.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/trademark-guidelines">Trademark Guidelines</a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy/california-privacy-rights.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Your California Privacy Rights<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item ot-sdk-show-settings">Cookie Settings</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2005-2025 Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.</div></div></div></footer></div>
</body>
</html>