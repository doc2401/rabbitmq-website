<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3.13 docs-doc-page docs-doc-id-shovel-dynamic" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Configuring Dynamic Shovels | RabbitMQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" name="twitter:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" property="og:url" content="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/shovel-dynamic"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.13"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.13"><meta data-rh="true" name="docsearch:version" content="3.13"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.13"><meta data-rh="true" property="og:title" content="Configuring Dynamic Shovels | RabbitMQ"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/rabbitmq-website/img/rabbitmq-logo.svg"><link data-rh="true" rel="canonical" href="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/shovel-dynamic"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/shovel-dynamic" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/3.13/shovel-dynamic" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H10VQIW16Y-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rabbitmq-website/blog/rss.xml" title="RabbitMQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rabbitmq-website/blog/atom.xml" title="RabbitMQ Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="RabbitMQ" href="/rabbitmq-website/opensearch.xml">







<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-domain-script="018ee308-473e-754f-b0c2-cbe82d25512f"></script>
<script>function OptanonWrapper(){}</script>
<script>function setGTM(e,t,o,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(o)[0],a=t.createElement(o),s="dataLayer"!=n?"&l="+n:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+r+s,i.parentNode.insertBefore(a,i)}var timer;function waitForOnetrustActiveGroups(){document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?(clearTimeout(timer),setGTM(window,document,"script","dataLayer","GTM-TT84L8K")):timer=setTimeout(waitForOnetrustActiveGroups,250)}document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?setGTM(window,document,"script","dataLayer","GTM-TT84L8K"):waitForOnetrustActiveGroups()</script><link rel="stylesheet" href="/rabbitmq-website/styles.css">
<script src="/rabbitmq-website/runtime~main.js" defer="defer"></script>
<script src="/rabbitmq-website/main.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-color-primary-contrast-background);color:var(--ifm-font-color-base)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong style="font-size: var(--ifm-h4-font-size);"><a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v4.1.0">RabbitMQ 4.1.0 is out</a></strong></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rabbitmq-website/"><div class="navbar__logo"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/rabbitmq-website/tutorials">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rabbitmq-website/docs/3.13">Docs</a><a class="navbar__item navbar__link" href="/rabbitmq-website/blog">Blog</a><a class="navbar__item navbar__link" href="/rabbitmq-website/contact">Support</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/rabbitmq-website/docs/3.13/shovel-dynamic">3.13</a><ul class="dropdown__menu"><li class=""><strong>Release series</strong></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/next/shovel-dynamic">Next</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/shovel-dynamic">4.1</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/4.0/shovel-dynamic">4.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/rabbitmq-website/docs/3.13/shovel-dynamic">3.13</a></li><li><a href="https://v3-12.rabbitmq.com/documentation.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">3.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/rabbitmq-website/release-information">Release Information</a></li></ul></div><a href="https://github.com/rabbitmq/rabbitmq-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs/3.13">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs/3.13/whats-new">What&#x27;s New</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/3.13/download">Install and Upgrade</a><button aria-label="Expand sidebar category &#x27;Install and Upgrade&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rabbitmq-website/docs/3.13/use-rabbitmq">How to Use RabbitMQ</a><button aria-label="Collapse sidebar category &#x27;How to Use RabbitMQ&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/publishers">Publishing Messages</a><button aria-label="Expand sidebar category &#x27;Publishing Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/consumers">Consuming Messages</a><button aria-label="Expand sidebar category &#x27;Consuming Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/queues">Queues</a><button aria-label="Expand sidebar category &#x27;Queues&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/streams">Streams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/channels">Channels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/reliability">Reliability and Data Safety</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/confirms">Consumer Acknowledgements and Publisher Confirms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/distributed">Network Distribution</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rabbitmq-website/docs/3.13/plugins">Plugins</a><button aria-label="Collapse sidebar category &#x27;Plugins&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/management">Management Plugin</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/federation">Federation Plugin</a><button aria-label="Expand sidebar category &#x27;Federation Plugin&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rabbitmq-website/docs/3.13/shovel">Shovel Plugin</a><button aria-label="Collapse sidebar category &#x27;Shovel Plugin&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/shovel-static">Static Shovels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rabbitmq-website/docs/3.13/shovel-dynamic">Dynamic Shovels</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/stomp">STOMP Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/web-stomp">Web STOMP Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/mqtt">MQTT Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/web-mqtt">Web MQTT Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/stream">Stream Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/3.13/installing-plugins">Installing 3rd-party Plugins</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/3.13/protocols">Protocols</a><button aria-label="Expand sidebar category &#x27;Protocols&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/client-libraries">Client Libraries</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/3.13/manage-rabbitmq">How to Manage RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Manage RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/3.13/monitoring">How to Monitor RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Monitor RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->RabbitMQ<!-- --> <b>3.13</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/rabbitmq-website/docs/shovel-dynamic">latest version</a></b> (<!-- -->4.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rabbitmq-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/3.13/use-rabbitmq"><span itemprop="name">How to Use RabbitMQ</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/3.13/plugins"><span itemprop="name">Plugins</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/3.13/shovel"><span itemprop="name">Shovel Plugin</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Dynamic Shovels</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 3.13</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuring Dynamic Shovels</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>This guide focuses on dynamically configured shovels. It assumes
familiarity with the key concepts behind the <a href="/rabbitmq-website/docs/3.13/shovel">Shovel plugin</a>.</p>
<p>Unlike with static shovels, dynamic shovels are configured using <a href="/rabbitmq-website/docs/3.13/parameters">runtime parameters</a>.
They can be started and stopped at any time, including programmatically. Dynamic shovels
can be used for both transient (one-off) and permanently running workloads.</p>
<p>Information about dynamic shovels is stored in RabbitMQ&#x27;s schema database,
along with users, permissions, queues, etc. They therefore can be
exported together with other <a href="/rabbitmq-website/docs/3.13/definitions">schema definitions</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<p>Parameters can be defined using <a href="/rabbitmq-website/docs/3.13/cli"><code>rabbitmqctl</code></a>, through the
<a href="/rabbitmq-website/docs/3.13/management">management HTTP API</a>, or (with the <code>rabbitmq_shovel_management</code> plugin <a href="/rabbitmq-website/docs/3.13/plugins">enabled</a>) through
the management UI&#x27;s administrative section.</p>
<p>A shovel is declared with a definition body, which is a JSON object. Some keys are mandatory, others are optional.
They control connection parameters, protocol used, message transfer source and destination,
<a href="/rabbitmq-website/docs/3.13/confirms">data safety</a> protocol features, and more.</p>
<p>Every shovel belongs to a virtual host. Note that a Shovel can consume from and publish
to not only a different virtual host but an entirely different cluster, so
virtual host selection primarily acts as a way of organising shovels and access to them,
much like with the rest of <a href="/rabbitmq-website/docs/3.13/access-control">permission in RabbitMQ</a>.</p>
<p>Every shovel is also named. The name is used to identify shovels when <a href="#status">inspecting their status</a>,
<a href="#deleting">deleting them</a> or <a href="#restarting">restarting them</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="declaring">Declaring a Dynamic Shovel<a href="#declaring" class="hash-link" aria-label="Direct link to Declaring a Dynamic Shovel" title="Direct link to Declaring a Dynamic Shovel">​</a></h2>
<p>In this example we will set up a dynamic shovel that will move messages from the queue <code>&quot;source-queue&quot;</code> in the
local RabbitMQ cluster to the queue <code>&quot;target-queue&quot;</code> on a remote RabbitMQ node, using AMQP 0-9-1.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-cli-tools">Using CLI Tools<a href="#using-cli-tools" class="hash-link" aria-label="Direct link to Using CLI Tools" title="Direct link to Using CLI Tools">​</a></h3>
<p>A shovel is declared using the <code>rabbitmqctl set_parameter</code> command with component name <code>shovel</code>, a shovel
name and a definition body which is a JSON document:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># my-shovel here is the name of the shovel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl set_parameter shovel my-shovel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;{&quot;src-protocol&quot;: &quot;amqp091&quot;, &quot;src-uri&quot;: &quot;amqp://&quot;, &quot;src-queue&quot;: &quot;source-queue&quot;, &quot;dest-protocol&quot;: &quot;amqp091&quot;, &quot;dest-uri&quot;: &quot;amqp://remote-server&quot;, &quot;dest-queue&quot;: &quot;target-queue&quot;, &quot;dest-queue-args&quot;: {&quot;x-queue-type&quot;: &quot;quorum&quot;}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>On Windows <code>rabbitmqctl</code> is named <code>rabbitmqctl.bat</code> and command line value escaping will be
different:</p>
<div class="language-PowerShell language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bat set_parameter shovel my-shovel ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;{&quot;</span><span class="token string" style="color:#e3116c">&quot;src-protocol&quot;</span><span class="token string" style="color:#e3116c">&quot;: &quot;</span><span class="token string" style="color:#e3116c">&quot;amqp091&quot;</span><span class="token string" style="color:#e3116c">&quot;, &quot;</span><span class="token string" style="color:#e3116c">&quot;src-uri&quot;</span><span class="token string" style="color:#e3116c">&quot;:&quot;</span><span class="token string" style="color:#e3116c">&quot;amqp://localhost&quot;</span><span class="token string" style="color:#e3116c">&quot;, &quot;</span><span class="token string" style="color:#e3116c">&quot;src-queue&quot;</span><span class="token string" style="color:#e3116c">&quot;: &quot;</span><span class="token string" style="color:#e3116c">&quot;source-queue&quot;</span><span class="token string" style="color:#e3116c">&quot;, ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">   &quot;</span><span class="token string" style="color:#e3116c">&quot;dest-protocol&quot;</span><span class="token string" style="color:#e3116c">&quot;: &quot;</span><span class="token string" style="color:#e3116c">&quot;amqp091&quot;</span><span class="token string" style="color:#e3116c">&quot;, &quot;</span><span class="token string" style="color:#e3116c">&quot;dest-uri&quot;</span><span class="token string" style="color:#e3116c">&quot;: &quot;</span><span class="token string" style="color:#e3116c">&quot;amqp://remote.rabbitmq.local&quot;</span><span class="token string" style="color:#e3116c">&quot;, ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">   &quot;</span><span class="token string" style="color:#e3116c">&quot;dest-queue&quot;</span><span class="token string" style="color:#e3116c">&quot;: &quot;</span><span class="token string" style="color:#e3116c">&quot;target-queue&quot;</span><span class="token string" style="color:#e3116c">&quot;, &quot;</span><span class="token string" style="color:#e3116c">&quot;dest-queue-args&quot;</span><span class="token string" style="color:#e3116c">&quot;: {&quot;</span><span class="token string" style="color:#e3116c">&quot;x-queue-type&quot;</span><span class="token string" style="color:#e3116c">&quot;: &quot;</span><span class="token string" style="color:#e3116c">&quot;quorum&quot;</span><span class="token string" style="color:#e3116c">&quot;}}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The body in this example includes a few keys:</p>
<table><caption>Essential Dynamic Shovel Definition Settings</caption><thead><tr><td><strong>Key</strong></td><td><strong>Description</strong></td></tr></thead><tbody><tr><td>src-uri</td><td><p></p><p>Source connection URI. Mandatory. See
the <a href="./uri-spec">AMQP URI reference</a> for
information on how RabbitMQ treats AMQP URIs in general.</p><dl><dt><p><code>cacertfile</code>, <code>certfile</code>, <code>keyfile</code></p></dt><dd><p>Client TLS certificate and private key paths.
See the <a href="./ssl">TLS guide</a> for details.
Only of use when URI scheme is <code>amqps</code>.</p></dd><dt><p><code>verify</code>, <code>fail_if_no_peer_cert</code></p></dt><dd><p>Use to enable or disable peer verification of the server&#x27;s TLS certificate.
See <a href="./shovel#tls">Securing Shovel Connections with TLS</a> and the general <a href="./ssl#peer-verification">TLS guide</a> to learn more.
Only of use when URI scheme is <code>amqps</code>.</p><p></p><div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>Note that starting with Erlang 26, peer verification for TLS clients (such as shovels)
is enabled by default.</p></div></div><p></p></dd></dl><p></p><p></p><p>The value of this parameter can either be a string, or a list of
strings. If more than one string is provided, the shovel will
randomly pick <strong>one</strong> URI from the list until
one of the endpoints succeeds.</p><p></p></td></tr><tr><td>src-protocol</td><td><p>Protocol to use when connecting to the source.
Either <code>amqp091</code> or <code>amqp10</code>. If omitted it will default to <code>amqp091</code>.
See protocol specific properties below.</p></td></tr><tr><td>src-queue</td><td><p></p><p>Source queue that the shovel will consume from.
The queue from which to consume. Either this
or <code>src-exchange</code> (but not both) must be set.</p><p></p><p></p><p>If the source queue does not exist on the target virtual host, and <code>src-queue-args</code>
parameter was not provided, shovel will declare a classic durable queue with no optional arguments.</p><p></p></td></tr><tr><td>src-queue-args</td><td><p></p><p>Optional arguments for <code>src-queue</code> declaration, eg. the queue type.</p><p></p></td></tr><tr><td>dest-uri</td><td><p>Same as <code>src-uri</code> above but for destination connection.</p></td></tr><tr><td>dest-protocol</td><td><p>Protocol to use when connecting to the destination.
Either <code>amqp091</code> or <code>amqp10</code>.
If omitted it will default to <code>amqp091</code>.
See protocol specific properties below.</p></td></tr><tr><td>dest-queue</td><td><p></p><p>The queue to which messages should be published. Either this
or <code>dest-exchange</code> (but not both) may be set. If
neither is set then messages are republished with their original
exchange and routing key.</p><p></p><p></p><p>If the destination queue does not exist in the destination virtual host,
and <code>dest-queue-args</code> parameter was not provided,
shovel will declare a classic durable queue with no optional arguments.</p><p></p></td></tr><tr><td>dest-queue-args</td><td><p></p><p>Optional arguments for <code>dest-queue</code> declaration, eg. the queue type.</p><p></p></td></tr></tbody></table>
<p>There are other Shovel definition keys that will be covered later in this guide.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-http-api">Using HTTP API<a href="#using-http-api" class="hash-link" aria-label="Direct link to Using HTTP API" title="Direct link to Using HTTP API">​</a></h3>
<p>To declare a shovel using the HTTP API, make sure that the <a href="/rabbitmq-website/docs/3.13/management">management</a> plugin
is enabled, then use the following endpoint:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT /api/parameters/shovel/{vhost}/{name}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>where <code>{vhost}</code> is the virtual host in which the Shovel should be started and <code>{name}</code>
is the name of the new shovel. The endpoint requires that the user that invokes it
has <code>policymaker</code> privileges (tag).</p>
<p>The request body is a JSON document similar in structure to that described earlier in this guide:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;value&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;src-protocol&quot;: &quot;amqp091&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;src-uri&quot;:  &quot;amqp://localhost&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;src-queue&quot;:  &quot;source-queue&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;dest-protocol&quot;: &quot;amqp091&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;dest-uri&quot;: &quot;amqp://remote.rabbitmq.local&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;dest-queue&quot;: &quot;destination-queue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Below is an example that uses <code>curl</code> to declare a shovel on a local node using
<a href="/rabbitmq-website/docs/3.13/access-control#default-state">default user credentials</a>. The shovel will
transfer messages between two queues, <code>&quot;source-queue&quot;</code> and <code>&quot;destination-queue&quot;</code>, in the default virtual host.</p>
<p>Note that this exact command would fail if invoked against
a remote node. Please <a href="/rabbitmq-website/docs/3.13/access-control">add a new user</a> tagged as <code>policymaker</code>
for your own experiments.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Note: this user&#x27;s access is limited to localhost!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> guest:guest </span><span class="token parameter variable" style="color:#36acaa">-X</span><span class="token plain"> PUT http://localhost:15672/api/parameters/shovel/%2f/my-shovel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;content-type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> @- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;value&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;src-protocol&quot;: &quot;amqp091&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;src-uri&quot;: &quot;amqp://localhost&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;src-queue&quot;: &quot;source-queue&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;dest-protocol&quot;: &quot;amqp091&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;dest-uri&quot;: &quot;amqp://localhost&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;dest-queue&quot;: &quot;destination-queue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-management-ui">Using Management UI<a href="#using-management-ui" class="hash-link" aria-label="Direct link to Using Management UI" title="Direct link to Using Management UI">​</a></h3>
<p>To declare a shovel using the management UI, first make sure that the <a href="/rabbitmq-website/docs/3.13/management">management</a> plugin
is enabled.</p>
<p>Then</p>
<ul>
<li>Navigate to <code>Admin</code> &gt; <code>Shovel Management</code> &gt; <code>Add a new shovel</code></li>
<li>Fill out the form with shovel parameters covered earlier in this guide</li>
<li>Click Add shovel</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="status">Inspecting Status of Dynamic Shovels<a href="#status" class="hash-link" aria-label="Direct link to Inspecting Status of Dynamic Shovels" title="Direct link to Inspecting Status of Dynamic Shovels">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-cli-tools-1">Using CLI Tools<a href="#using-cli-tools-1" class="hash-link" aria-label="Direct link to Using CLI Tools" title="Direct link to Using CLI Tools">​</a></h3>
<p>Use <code>rabbitmqctl shovel_status</code> to inspect dynamic shovels in a cluster. The <code>rabbitmq_shovel</code>
plugin must be enabled on the host where this command is executed.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl shovel_status </span><span class="token parameter variable" style="color:#36acaa">--formatter</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pretty_table</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output can be formatted as JSON and redirected to a tool such as <a href="https://stedolan.github.io/jq/" target="_blank" rel="noopener noreferrer"><code>jq</code></a>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl shovel_status </span><span class="token parameter variable" style="color:#36acaa">--formatter</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">json </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-http-api-1">Using HTTP API<a href="#using-http-api-1" class="hash-link" aria-label="Direct link to Using HTTP API" title="Direct link to Using HTTP API">​</a></h3>
<p><code>GET /api/shovels</code> is an endpoint that can be used to list dynamic
shovels in a cluster. The endpoint is provided by the <code>rabbitmq_shovel_management</code> plugin
which must be enabled on the target node.</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Note: this user&#x27;s access is limited to localhost!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> curl -v -u guest:guest -X GET http://localhost:15672/api/shovels/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To inspect shovels in a specific virtual host, use <code>GET /api/shovels/{vhost}</code>
<code>{vhost}</code> is the virtual host name. The value must be percent-encoded.</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Note: this user&#x27;s access is limited to localhost!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> curl -v -u guest:guest -X GET http://localhost:15672/api/shovels/%2f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To inspect status of a specific shovels, use <code>GET /api/shovels/vhost/{vhost}/{name}</code>
<code>{vhost}</code> is the virtual host in which the Shovel is running and <code>{name}</code>
is the name of the shovel.  Both values must be percent-encoded.</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Note: this user&#x27;s access is limited to localhost!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> curl -v -u guest:guest -X GET http://localhost:15672/api/shovels/vhost/%2f/my-shovel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-management-ui-1">Using Management UI<a href="#using-management-ui-1" class="hash-link" aria-label="Direct link to Using Management UI" title="Direct link to Using Management UI">​</a></h3>
<ul>
<li>Navigate to <code>Admin</code> &gt; <code>Shovel Status</code></li>
<li>Locate the shovel of interest in the table</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="restarting">Restarting a Shovel<a href="#restarting" class="hash-link" aria-label="Direct link to Restarting a Shovel" title="Direct link to Restarting a Shovel">​</a></h2>
<p>A dynamic Shovel can be restarted. Restarting a shovel briefly interrupts its operations
and makes it reconnect to both source and destination. When an appropriate <a href="/rabbitmq-website/docs/3.13/confirms">acknowledgement mode</a> is
used by a shovel, the interruption is safe: any unacknowledged or unconfirmed (&quot;in flight&quot;) messages
consumed from the source or published to the destination will be automatically requeued
when the shovel is stopped, and consumed again after the restart.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-cli-tools-2">Using CLI Tools<a href="#using-cli-tools-2" class="hash-link" aria-label="Direct link to Using CLI Tools" title="Direct link to Using CLI Tools">​</a></h3>
<p>Use <code>rabbitmqctl restart_shovel</code> to restart a shovel using its name. The <code>rabbitmq_shovel</code>
plugin must be enabled on the host where this command is executed.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl restart_shovel </span><span class="token string" style="color:#e3116c">&quot;my-shovel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-http-api-2">Using HTTP API<a href="#using-http-api-2" class="hash-link" aria-label="Direct link to Using HTTP API" title="Direct link to Using HTTP API">​</a></h3>
<p><code>DELETE /api/shovels/vhost/{vhost}/{name}/restart</code> is an endpoint that restarts
a dynamic shovel. The endpoint is provided by the <code>rabbitmq_shovel_management</code> plugin
which must be enabled on the target node.</p>
<p><code>{vhost}</code> is the virtual host in which the Shovel is running and <code>{name}</code>
is the name of the shovel to be restarted.  Both values must be percent-encoded.</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Note: this user&#x27;s access is limited to localhost!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> curl -v -u guest:guest -X DELETE http://localhost:15672/api/shovels/vhost/%2f/my-shovel/restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-management-ui-2">Using Management UI<a href="#using-management-ui-2" class="hash-link" aria-label="Direct link to Using Management UI" title="Direct link to Using Management UI">​</a></h3>
<ul>
<li>Navigate to <code>Admin</code> &gt; <code>Shovel Status</code></li>
<li>Locate the shovel of interest in the table</li>
<li>Click Restart and wait for the next UI refresh</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deleting">Deleting a Shovel<a href="#deleting" class="hash-link" aria-label="Direct link to Deleting a Shovel" title="Direct link to Deleting a Shovel">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-cli-tools-3">Using CLI Tools<a href="#using-cli-tools-3" class="hash-link" aria-label="Direct link to Using CLI Tools" title="Direct link to Using CLI Tools">​</a></h3>
<p>To delete a Shovel using CLI tools, use <code>rabbitmqctl clear_parameter</code> and pass <code>shovel</code> for
component name and the name of the shovel that should be deleted:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl clear_parameter shovel </span><span class="token string" style="color:#e3116c">&quot;my-shovel&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-http-api-3">Using HTTP API<a href="#using-http-api-3" class="hash-link" aria-label="Direct link to Using HTTP API" title="Direct link to Using HTTP API">​</a></h3>
<p><code>DELETE /api/parameters/shovel/{vhost}/{name}</code> is the endpoint that can be used
to delete a shovel.</p>
<p><code>{vhost}</code> is the virtual host in which the Shovel is running and <code>{name}</code>
is the name of the shovel to be deleted. Both values must be percent-encoded.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Note: this user&#x27;s access is limited to localhost!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> guest:guest </span><span class="token parameter variable" style="color:#36acaa">-X</span><span class="token plain"> DELETE http://localhost:15672/api/parameters/shovel/%2f/my-shovel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="amqp091-reference">AMQP 0-9-1 Shovel Definition Reference<a href="#amqp091-reference" class="hash-link" aria-label="Direct link to AMQP 0-9-1 Shovel Definition Reference" title="Direct link to AMQP 0-9-1 Shovel Definition Reference">​</a></h2>
<p>There are several Shovel properties that haven&#x27;t been covered in the above example.
They don&#x27;t change how dynamic shovels work fundamentally, and do not change
the declaration process.</p>
<table><caption>Optional Dynamic Shovel Definition Settings (AMQP 0-9-1)</caption><thead><tr><td><strong>Key</strong></td><td><strong>Description</strong></td></tr></thead><tbody><tr><td>reconnect-delay</td><td><p>The duration (in seconds) to wait before reconnecting to the
brokers after being disconnected at either end. Default is 1.</p></td></tr><tr><td>ack-mode</td><td><p></p><p>Determines how the shovel should <a href="./confirms">acknowledge</a> consumed messages.
Valid values are <code>on-confirm</code>, <code>on-publish</code>, and <code>no-ack</code>.
<code>on-confirm</code> is used by default.</p><p></p><p></p><p>If set to <code>on-confirm</code> (the default), messages are
<a href="./confirms">acknowledged</a> to the source broker after they have been confirmed
by the destination. This handles network errors and broker
failures without losing messages, and is the slowest option.</p><p></p><p></p><p>If set to <code>on-publish</code>, messages are <a href="./confirms">acknowledged</a> to
the source broker after they have been published at the
destination (but not yet confirmed). This handles network errors without losing messages,
but may lose messages in the event of broker failures.</p><p></p><p></p><p>If set to <code>no-ack</code>, <a href="./confirms">automatic message acknowledgements</a> will be used.
This option will offer the highest throughput but is not safe (will lose messages in the event of network or broker failures).</p><p></p></td></tr><tr><td>src-delete-after</td><td><p></p><p>Determines when (if ever) the shovel should delete
itself. This can be useful if the shovel is being treated
as more of a move operation - i.e. being used to move
messages from one queue to another on an ad hoc basis.</p><p></p><p></p><p>The default is <code>never</code>, meaning the
shovel should never delete itself.</p><p></p><p></p><p>If set to <code>queue-length</code> then the shovel will
measure the length of the source queue when starting up,
and delete itself after it has transferred that many
messages.</p><p></p><p></p><p>If set to an integer, then the shovel will transfer that
number of messages before deleting itself.</p><p></p></td></tr><tr><td>src-prefetch-count</td><td><p>The maximum number of unacknowledged messages copied over a shovel at
any one time. Default is <code>1000</code>.</p></td></tr><tr><td>src-exchange</td><td><p></p><p>The exchange from which to consume. Either this
or <code>src-queue</code> (but not both) must be set.</p><p></p><p></p><p>The shovel will declare an exclusive queue and bind it to the
named exchange with <code>src-exchange-key</code> before consuming
from the queue.</p><p></p><p></p><p>If the source exchange does not exist on the source broker, it
will be not declared; the shovel will fail to start.</p><p></p></td></tr><tr><td>src-exchange-key</td><td><p>Routing key when using <code>src-exchange</code>.</p></td></tr><tr><td>src-consumer-args</td><td><p>Consumer arguments, such as <code>x-single-active-consumer</code> or <code>x-stream-offset</code>.</p></td></tr><tr><td>dest-exchange</td><td><p></p><p>The exchange to which messages should be published. Either this
or <code>dest-queue</code> (but not both) may be set.</p><p></p><p></p><p>If the destination exchange does not exist on the destination broker,
it will be not declared; the shovel will fail to start.</p><p></p></td></tr><tr><td>dest-exchange-key</td><td><p>Routing key when using <code>dest-exchange</code>. If this is not
set, the original message&#x27;s routing key will be used.</p></td></tr><tr><td>dest-publish-properties</td><td><p>A map (JSON object) of properties to overwrite when shovelling messages. Setting
headers this way is not currently supported. Default is <code></code>.</p></td></tr><tr><td>dest-add-forward-headers</td><td><p>Whether to add <code>x-shovelled</code> headers to the
shovelled messages indicating where they have been shovelled
from and to. Default is false.</p></td></tr><tr><td>dest-add-timestamp-header</td><td><p>Whether to add <code>x-shovelled-timestamp</code> headers to the
shovelled messages  containing timestamp (in seconds since epoch)
when message had been shovelled. Default is false.</p></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="amqp10-reference">AMQP 1.0 Shovel Definition Reference<a href="#amqp10-reference" class="hash-link" aria-label="Direct link to AMQP 1.0 Shovel Definition Reference" title="Direct link to AMQP 1.0 Shovel Definition Reference">​</a></h2>
<p>AMQP 1.0 source and destination properties have some differences from their AMQP 0-9-1
counterparts.</p>
<table><caption>Optional Dynamic Shovel Definition Settings (AMQP 1.0)</caption><thead><tr><td><strong>Key</strong></td><td><strong>Description</strong></td></tr></thead><tbody><tr><td>src-uri</td><td><p>The AMQP URI for the source. Mandatory. AMQP 1.0 URIs implement
as subset of what is described in the <a href="./uri-spec">AMQP URI reference</a>.
There is no <a href="./vhosts">virtual host</a> concept in AMQP 1.0, so URI path
segments are not supported. The set of query parameters it supports are different from AMQP 0.9.1
URI(s):</p><dl><dt><code>idle_time_out</code></dt><dd>heartbeat interval</dd><dt><code>hostname</code></dt><dd><p>This field indicates the  connection target. What exactly that means depends on the target AMQP 1.0 broker.</p><p></p><p>For example, Azure ServiceBus requires this to be set even if it is the same as the host segment
in the URI.</p><p></p><p></p><p>In the case of RabbitMQ, this field can be used to specify the target <a href="/rabbitmq-website/docs/3.13/vhosts">virtual host</a> in case it is different from the default one.
To do so, set this query parameter to <code>vhost:{name}</code>, e.g. <code>vhost:example-vhost</code>.</p><p></p></dd><dt><code>sasl</code></dt><dd><p><code>anon</code>, <code>none</code> or <code>plain</code>
Defaults to: <code>none</code>. When using <code>plain</code> the
user and password segments of the URI need to be set.</p></dd><dt><p><code>cacertfile</code>, <code>certfile</code>, <code>keyfile</code></p></dt><dd><p>Client TLS certificate and private key paths.
See the <a href="./ssl">TLS guide</a> for details.
Only of use when URI scheme is <code>amqps</code>.</p></dd><dt><p><code>verify</code>, <code>fail_if_no_peer_cert</code></p></dt><dd><p>Use to enable or disable peer verification of the server&#x27;s TLS certificate.
See the <a href="./ssl#peer-verification">TLS guide</a> for details.
Only of use when URI scheme is <code>amqps</code>.</p><p></p><div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>Note that starting with Erlang 26, peer verification for TLS clients (such as shovels)
is enabled by default.</p></div></div><p></p></dd></dl></td></tr><tr><td>src-address</td><td><p>The AMQP 1.0 link address. Mandatory.</p></td></tr><tr><td>dest-address</td><td><p>The AMQP 1.0 link address. Mandatory.</p></td></tr><tr><td>src-prefetch-count</td><td><p>The maximum number of unacknowledged messages copied over a shovel at
any one time. Default is <code>1000</code>.</p></td></tr><tr><td>dest-properties</td><td><p>Properties to overwrite when shovelling messages.
See AMQP 1.0 spec §3.2.4 for details of all possible
properties.</p></td></tr><tr><td>dest-application-properties</td><td><p>Application properties to set when shovelling messages.</p></td></tr><tr><td>dest-add-forward-headers</td><td><p>Whether to add <code>x-shovelled</code> application properties to the
shovelled messages indicating where they have been shovelled
from and to. Default is false.</p></td></tr><tr><td>dest-add-timestamp-header</td><td><p>Whether to set the <code>creation_time</code> header to the
timestamp (in milliseconds since epoch) of the moment when
message had been republished. Default is false.</p></td></tr><tr><td>reconnect-delay</td><td><p>The duration (in seconds) to wait before reconnecting to the
brokers after being disconnected at either end. Default is 1.</p></td></tr><tr><td>ack-mode</td><td><p></p><p>Determines how the shovel should <a href="./confirms">acknowledge</a> consumed messages.
Valid values are <code>on-confirm</code>, <code>on-publish</code>, and <code>no-ack</code>.
<code>on-confirm</code> is used by default.</p><p></p><p></p><p>If set to <code>on-confirm</code> (the default), messages are
<a href="./confirms">acknowledged</a> to the source broker after they have been confirmed
by the destination. This handles network errors and broker
failures without losing messages, and is the slowest option.</p><p></p><p></p><p>If set to <code>on-publish</code>, messages are <a href="./confirms">acknowledged</a> to
the source broker after they have been published at the
destination (but not yet confirmed). This handles network errors without losing messages,
but may lose messages in the event of broker failures.</p><p></p><p></p><p>If set to <code>no-ack</code>, <a href="./confirms">automatic message acknowledgements</a> will be used.
This option will offer the highest throughput but is not safe (will lose messages in the event of network or broker failures).</p><p></p></td></tr><tr><td>src-delete-after</td><td><p></p><p>Determines when (if ever) the shovel should delete
itself. This can be useful if the shovel is being treated
as more of a move operation - i.e. being used to move
messages from one queue to another on an ad hoc basis.</p><p></p><p></p><p>The default is <code>never</code>, meaning the
shovel should never delete itself.</p><p></p><p></p><p>If set to <code>queue-length</code> then the shovel will
measure the length of the source queue when starting up,
and delete itself after it has transferred that many
messages.</p><p></p><p></p><p>If set to an integer, then the shovel will transfer that
number of messages before deleting itself.</p><p></p></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="status">Monitoring Shovels<a href="#status" class="hash-link" aria-label="Direct link to Monitoring Shovels" title="Direct link to Monitoring Shovels">​</a></h2>
<p>See <a href="/rabbitmq-website/docs/3.13/shovel#status">Monitoring Shovels</a> in the overview Shovel plugin guide.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/rabbitmq/rabbitmq-website/tree/main/versioned_docs/version-3.13/shovel-dynamic.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rabbitmq-website/docs/3.13/shovel-static"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Static Shovels</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rabbitmq-website/docs/3.13/stomp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">STOMP Plugin</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#declaring" class="table-of-contents__link toc-highlight">Declaring a Dynamic Shovel</a><ul><li><a href="#using-cli-tools" class="table-of-contents__link toc-highlight">Using CLI Tools</a></li><li><a href="#using-http-api" class="table-of-contents__link toc-highlight">Using HTTP API</a></li><li><a href="#using-management-ui" class="table-of-contents__link toc-highlight">Using Management UI</a></li></ul></li><li><a href="#status" class="table-of-contents__link toc-highlight">Inspecting Status of Dynamic Shovels</a><ul><li><a href="#using-cli-tools-1" class="table-of-contents__link toc-highlight">Using CLI Tools</a></li><li><a href="#using-http-api-1" class="table-of-contents__link toc-highlight">Using HTTP API</a></li><li><a href="#using-management-ui-1" class="table-of-contents__link toc-highlight">Using Management UI</a></li></ul></li><li><a href="#restarting" class="table-of-contents__link toc-highlight">Restarting a Shovel</a><ul><li><a href="#using-cli-tools-2" class="table-of-contents__link toc-highlight">Using CLI Tools</a></li><li><a href="#using-http-api-2" class="table-of-contents__link toc-highlight">Using HTTP API</a></li><li><a href="#using-management-ui-2" class="table-of-contents__link toc-highlight">Using Management UI</a></li></ul></li><li><a href="#deleting" class="table-of-contents__link toc-highlight">Deleting a Shovel</a><ul><li><a href="#using-cli-tools-3" class="table-of-contents__link toc-highlight">Using CLI Tools</a></li><li><a href="#using-http-api-3" class="table-of-contents__link toc-highlight">Using HTTP API</a></li></ul></li><li><a href="#amqp091-reference" class="table-of-contents__link toc-highlight">AMQP 0-9-1 Shovel Definition Reference</a></li><li><a href="#amqp10-reference" class="table-of-contents__link toc-highlight">AMQP 1.0 Shovel Definition Reference</a></li><li><a href="#status" class="table-of-contents__link toc-highlight">Monitoring Shovels</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn about RabbitMQ</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reach out to the RabbitMQ team</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rabbitmq" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rabbitmq/rabbitmq-server/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact?utm_source=rmq_release-information_tableheader&amp;utm_medium=rmq_website&amp;utm_campaign=tanzu">Long Term Commercial Support</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact">Contact Us</a></li><li class="footer__item"><a href="https://www.rabbitmq.com/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Broadcom</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tanzu.vmware.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VMware Tanzu<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/legal.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/trademark-guidelines">Trademark Guidelines</a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy/california-privacy-rights.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Your California Privacy Rights<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item ot-sdk-show-settings">Cookie Settings</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2005-2025 Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.</div></div></div></footer></div>
</body>
</html>