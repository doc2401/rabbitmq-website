<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-classic-queues" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Classic Queues | RabbitMQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" name="twitter:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" property="og:url" content="https://www.rabbitmq.com/rabbitmq-website/docs/next/classic-queues"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Classic Queues | RabbitMQ"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/rabbitmq-website/img/rabbitmq-logo.svg"><link data-rh="true" rel="canonical" href="https://www.rabbitmq.com/rabbitmq-website/docs/next/classic-queues"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/next/classic-queues" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/next/classic-queues" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H10VQIW16Y-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rabbitmq-website/blog/rss.xml" title="RabbitMQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rabbitmq-website/blog/atom.xml" title="RabbitMQ Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="RabbitMQ" href="/rabbitmq-website/opensearch.xml">







<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-domain-script="018ee308-473e-754f-b0c2-cbe82d25512f"></script>
<script>function OptanonWrapper(){}</script>
<script>function setGTM(e,t,o,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(o)[0],a=t.createElement(o),s="dataLayer"!=n?"&l="+n:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+r+s,i.parentNode.insertBefore(a,i)}var timer;function waitForOnetrustActiveGroups(){document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?(clearTimeout(timer),setGTM(window,document,"script","dataLayer","GTM-TT84L8K")):timer=setTimeout(waitForOnetrustActiveGroups,250)}document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?setGTM(window,document,"script","dataLayer","GTM-TT84L8K"):waitForOnetrustActiveGroups()</script><link rel="stylesheet" href="/rabbitmq-website/styles.css">
<script src="/rabbitmq-website/runtime~main.js" defer="defer"></script>
<script src="/rabbitmq-website/main.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-color-primary-contrast-background);color:var(--ifm-font-color-base)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong style="font-size: var(--ifm-h4-font-size);"><a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v4.1.0">RabbitMQ 4.1.0 is out</a></strong></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rabbitmq-website/"><div class="navbar__logo"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/rabbitmq-website/tutorials">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rabbitmq-website/docs/next">Docs</a><a class="navbar__item navbar__link" href="/rabbitmq-website/blog">Blog</a><a class="navbar__item navbar__link" href="/rabbitmq-website/contact">Support</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/rabbitmq-website/docs/next/classic-queues">Next</a><ul class="dropdown__menu"><li class=""><strong>Release series</strong></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/rabbitmq-website/docs/next/classic-queues">Next</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/classic-queues">4.1</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/4.0/classic-queues">4.0</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/3.13/classic-queues">3.13</a></li><li><a href="https://v3-12.rabbitmq.com/documentation.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">3.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/rabbitmq-website/release-information">Release Information</a></li></ul></div><a href="https://github.com/rabbitmq/rabbitmq-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs/next">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/release-information">Release Information</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/next/download">Install and Upgrade</a><button aria-label="Expand sidebar category &#x27;Install and Upgrade&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rabbitmq-website/docs/next/use-rabbitmq">How to Use RabbitMQ</a><button aria-label="Collapse sidebar category &#x27;How to Use RabbitMQ&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/next/publishers">Publishing Messages</a><button aria-label="Expand sidebar category &#x27;Publishing Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/exchanges">Exchanges</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/next/consumers">Consuming Messages</a><button aria-label="Expand sidebar category &#x27;Consuming Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rabbitmq-website/docs/next/queues">Queues</a><button aria-label="Collapse sidebar category &#x27;Queues&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/quorum-queues">Quorum Queues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rabbitmq-website/docs/next/classic-queues">Classic Queues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/ttl">Time-to-Live and Expiration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/maxlength">Queue Length</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/lazy-queues">Lazy Queues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/dlx">Dead Lettering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/priority">Priority Queues</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/streams">Streams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/channels">Channels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/reliability">Reliability and Data Safety</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/confirms">Consumer Acknowledgements and Publisher Confirms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/distributed">Network Distribution</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/next/plugins">Plugins</a><button aria-label="Expand sidebar category &#x27;Plugins&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/next/protocols">Protocols</a><button aria-label="Expand sidebar category &#x27;Protocols&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/message-interceptors">Intercepting Messages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/client-libraries">Client Libraries</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/next/manage-rabbitmq">How to Manage RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Manage RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/next/monitoring">How to Monitor RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Monitor RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->RabbitMQ<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/rabbitmq-website/docs/classic-queues">latest version</a></b> (<!-- -->4.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rabbitmq-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/next/use-rabbitmq"><span itemprop="name">How to Use RabbitMQ</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/next/queues"><span itemprop="name">Queues</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Classic Queues</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Classic Queues</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">What is a Classic Queue<a href="#overview" class="hash-link" aria-label="Direct link to What is a Classic Queue" title="Direct link to What is a Classic Queue">​</a></h2>
<p>A RabbitMQ classic queue (the original queue type) is a versatile queue type suitable for use cases where data safety is not a priority because the data stored in classic queues is not replicated.
Classic queues uses the <strong>non-replicated</strong> FIFO queue implementation.</p>
<p>If data safety is a priority, the recommendation is to use <a href="/rabbitmq-website/docs/next/quorum-queues">quorum queues</a> and <a href="/rabbitmq-website/docs/next/streams">streams</a> instead of classic queues.</p>
<p>Classic queues are the default queue type
as long as the default queue type is not overridden for the virtual host.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="features">Classic Queue Features<a href="#features" class="hash-link" aria-label="Direct link to Classic Queue Features" title="Direct link to Classic Queue Features">​</a></h2>
<p>Classic queues fully support <a href="/rabbitmq-website/docs/next/queues">queue exclusivity</a>,
<a href="/rabbitmq-website/docs/next/ttl">queue and message TTL (Time-To-Live)</a>,
<a href="/rabbitmq-website/docs/next/maxlength">queue length limits</a>,
<a href="/rabbitmq-website/docs/next/priority">message priority</a>,
<a href="/rabbitmq-website/docs/next/consumer-priority">consumer priority</a>
and adhere to settings <a href="/rabbitmq-website/docs/next/policies">controlled using policies</a>.</p>
<p>Classic queues support <a href="/rabbitmq-website/docs/next/dlx">dead letter exchanges</a> with
the exception of <a href="/rabbitmq-website/docs/next/quorum-queues#dead-lettering">at-least-once dead-lettering</a>.</p>
<p>Classic queues do not support <a href="https://en.wikipedia.org/wiki/Poison_message" target="_blank" rel="noopener noreferrer">poison message handling</a>,
unlike <a href="/rabbitmq-website/docs/next/quorum-queues">quorum queues</a>. Classic queues also do not
support at-least-once dead-lettering, supported by quorum queues.</p>
<p><a href="/rabbitmq-website/docs/next/consumer-prefetch">Per-consumer QoS prefetch</a> should be
preferred over global QoS prefetch, even though classic queues support
both options. Global QoS prefetch is a deprecated feature that will be
removed in <strong>RabbitMQ 4.0</strong>.</p>
<p>While classic queues can be declared as transient, this makes queue
removal difficult to reason about in case of node restarts during upgrades and such,
so the use of transient queues is discouraged. Support for transient queues
is deprecated and will be removed in <strong>RabbitMQ 4.0</strong>.</p>
<p>Classic queues is a non-replicated queue type starting with RabbitMQ 4.0.
<a href="/rabbitmq-website/docs/next/quorum-queues">Quorum queues</a> and <a href="/rabbitmq-website/docs/next/streams">streams</a> provide a better alternative when high availability and
data safety is required.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="persistence">Persistence (Durable Storage) in Classic Queues<a href="#persistence" class="hash-link" aria-label="Direct link to Persistence (Durable Storage) in Classic Queues" title="Direct link to Persistence (Durable Storage) in Classic Queues">​</a></h2>
<p>Classic queues use an on-disk index for storing message locations on disk
as well as a message store for persisting messages.</p>
<p>Both <a href="/rabbitmq-website/docs/next/publishers#message-properties">persistent and transient messages</a>
are always persisted to disk except when:</p>
<ul>
<li>the queue is declared as transient or messages are transient</li>
<li>messages are smaller than the embedding threshold (defaults to 4096 bytes)</li>
<li>the queue is short (queues may keep up to 2048 messages in memory at most,
depending on the consumer delivery rate)</li>
</ul>
<p>In general messages are not kept in memory unless the rate of
consumption of messages is high enough that the messages that
are in memory are expected to be consumed within the next
second. Classic queues keep up to 2048 messages in memory,
depending on the consumer delivery rate. Larger messages are not read
into memory until the moment when they have to be sent to consumers.</p>
<p>Persisted messages may be <strong>embedded</strong> in the queue or sent
to a <strong>shared message store</strong>. The decision to store messages
in the queue or in the shared message store is based on the
size of the message, including headers. The shared message
store is more efficient at handling larger messages,
particularly when those messages are sent to multiple
queues.</p>
<p>The message location is written in the queue&#x27;s index.
Each queue has one index. The queue is responsible for
tracking messages location as well as their position
in the queue, and it persists this information in the
index.</p>
<p>Embedded messages are written in its queue index when
using classic queues version 1; and in its
<strong>per-queue message store</strong> when using classic
queues version 2.</p>
<p>Larger messages are written to a shared message store.
Each vhost has two such stores: one for persistent
messages and one for transient messages, but they
are usually considered together as the shared message
store. All queues in the vhost use the same message
store.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="versions">Classic Queue Storage Implementation Versions<a href="#versions" class="hash-link" aria-label="Direct link to Classic Queue Storage Implementation Versions" title="Direct link to Classic Queue Storage Implementation Versions">​</a></h2>
<p>There are currently two classic queue versions (implementation).
Depending on the version, classic queues will
use a different index for messages, as well
as operate differently regarding the embedding of small messages in
the index.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="classic-queue-implementation-version-1">Classic Queue Implementation Version 1<a href="#classic-queue-implementation-version-1" class="hash-link" aria-label="Direct link to Classic Queue Implementation Version 1" title="Direct link to Classic Queue Implementation Version 1">​</a></h4>
<p>RabbitMQ 4.0 removed support for classic queues version 1.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="classic-queue-implementation-version-2">Classic Queue Implementation Version 2<a href="#classic-queue-implementation-version-2" class="hash-link" aria-label="Direct link to Classic Queue Implementation Version 2" title="Direct link to Classic Queue Implementation Version 2">​</a></h3>
<p>The index in version 2 only uses segment files and only loads messages from
disk when necessary. It will load more messages based on the
current consumption rate. Version 2 does not embed messages
in its index, instead a per-queue message store is used.</p>
<p>Version 2 was added in <strong>RabbitMQ 3.10.0</strong> and was significantly
improved in <strong>RabbitMQ 3.12.0</strong>. Version 1 queues are no longer
supported starting with <strong>RabbitMQ 4.0</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migration">Version 1 to Version 2 Migration<a href="#migration" class="hash-link" aria-label="Direct link to Version 1 to Version 2 Migration" title="Direct link to Version 1 to Version 2 Migration">​</a></h2>
<p>When a RabbitMQ 4.0 node starts, it will automatically migrate any existing
v1 queues to v2 (it will rewrite their on-disk representation).</p>
<p>Note that for large queues the conversion
may take some time and results in the queue being unavailable while
the conversion is running. As a point of reference, on our test machine,
the migration takes:</p>
<ul>
<li>2 seconds to migrate 1000 queues with 1000 100-byte messages each</li>
<li>9 seconds to migrate a queue with 1 million 100-byte messages</li>
<li>3 seconds to migrate a queue with 1 million 5000-byte messages
(with the default embedding size of 4096 bytes, 5000-byte
messages are in the message store so there is less data to migrate)</li>
</ul>
<p>Given the numbers above, unless there is a lot of queues with a lot of messages,
the migration should complete in a matter of seconds.</p>
<p>It is possible to perform this migration before upgrading to RabbitMQ 4.0.
Please refer to the RabbitMQ 3.13 documentation for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resource-use">Resource Use with Classic Queues<a href="#resource-use" class="hash-link" aria-label="Direct link to Resource Use with Classic Queues" title="Direct link to Resource Use with Classic Queues">​</a></h2>
<p>Classic queues aim to provide reasonably good throughput in the majority
of situations without configuration. However, some configuration is
sometimes useful. This section covers a few configurable values that
affect stability, throughput, latency and I/O characteristics of a node.
Consider getting accustomed to <a href="https://rabbitmq.github.io/rabbitmq-perf-test/stable/htmlsingle/" target="_blank" rel="noopener noreferrer">benchmarking with PerfTest</a>
in addition to get the most out of your queues.</p>
<p>Some related information includes:</p>
<ul>
<li><a href="/rabbitmq-website/docs/next/configure">Main configuration guide</a></li>
<li><a href="/rabbitmq-website/docs/next/relocate">File and Directory Locations</a></li>
<li><a href="/rabbitmq-website/docs/next/runtime">Runtime Tuning</a></li>
<li><a href="/rabbitmq-website/docs/next/queues#runtime-characteristics">Queues</a> and their runtime characteristics</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-handles">File Handle Usage with Classic Queues<a href="#file-handles" class="hash-link" aria-label="Direct link to File Handle Usage with Classic Queues" title="Direct link to File Handle Usage with Classic Queues">​</a></h3>
<p>The RabbitMQ server is limited in the <a href="/rabbitmq-website/docs/next/networking#open-file-handle-limit">number of file handles</a>
it can open. Every running network connection requires one file handle,
and the rest are available for queues to use.</p>
<p>Classic queues version 2 do not try to accomodate for low numbers
of file descriptors anymore like v1 used to do. They expect servers to
have a large file descriptor limit configured and to always be able to open a
new file handle when necessary. The index keeps up to 4 file
handles open at any time, and the per-queue store keeps 1
file handle open but may open another one when flushing data
to disk. This means that each queue needs up to 6 file
descriptors available to properly function, in theory. In
practice only busy queues will need that many; other queues
will function just fine with 3 or 4 file handles.</p>
<p>As a result of not using the file handle management subsystem,
version 2 does not track as many I/O statistics; only the numbers
of reads and writes. Other metrics can be obtained at the OS level.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory">Memory Footprint with Classic Queues<a href="#memory" class="hash-link" aria-label="Direct link to Memory Footprint with Classic Queues" title="Direct link to Memory Footprint with Classic Queues">​</a></h3>
<p>Classic queues may keep up to 2048 messages in memory, depending
on the consume rate. Classic queues will, however, avoid reading
larger messages from disk too early. In <strong>RabbitMQ 3.12</strong> this
means messages larger than the embedded threshold (by default, 4096 bytes).</p>
<p>The index and per-queue store in version 2 buffer entries.
This is typically not a concern as far as the index is concerned
since it only tracks metadata. The per-queue store will however
use up to 1MB of memory by default (512KB in the write buffer
and 512KB in a cache). When flushing to disk the store will
first clear the cache then move the messages in the write buffer
to the cache, effectively replacing the data in the cache with
the data in the write buffer. The size of the write buffer and
the cache are therefore linked. It can be configured using the
advanced config via rabbit&#x27;s <code>classic_queue_store_v2_max_cache_size</code>
parameter.</p>
<p>Idle queues will reduce their memory usage. This can sometimes
result in surprising spikes when performing operations that
affect many queues, such as defining new policies. In that case
the queues will need to allocate more memory again. The more
queues, the bigger the spike should be expected.</p>
<p>The shared message store needs an index. The default message store
index uses a small amount of memory for every message in the store.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="msg-store-index-implementations">Alternate Message Store Index Implementations<a href="#msg-store-index-implementations" class="hash-link" aria-label="Direct link to Alternate Message Store Index Implementations" title="Direct link to Alternate Message Store Index Implementations">​</a></h2>
<p>As mentioned above, each message which is written to the message
store uses a small amount of memory for its index entry. The
message store index is pluggable in RabbitMQ, and other
implementations are available as plugins which can remove this
limitation.</p>
<p>The reason they are not shipped with the RabbitMQ distribution is
that they all use native code. Note that such plugins typically
make the message store run more slowly.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/rabbitmq/rabbitmq-website/tree/main/docs/classic-queues.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rabbitmq-website/docs/next/quorum-queues"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Quorum Queues</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rabbitmq-website/docs/next/ttl"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Time-to-Live and Expiration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">What is a Classic Queue</a></li><li><a href="#features" class="table-of-contents__link toc-highlight">Classic Queue Features</a></li><li><a href="#persistence" class="table-of-contents__link toc-highlight">Persistence (Durable Storage) in Classic Queues</a></li><li><a href="#versions" class="table-of-contents__link toc-highlight">Classic Queue Storage Implementation Versions</a><ul><li><a href="#classic-queue-implementation-version-2" class="table-of-contents__link toc-highlight">Classic Queue Implementation Version 2</a></li></ul></li><li><a href="#migration" class="table-of-contents__link toc-highlight">Version 1 to Version 2 Migration</a></li><li><a href="#resource-use" class="table-of-contents__link toc-highlight">Resource Use with Classic Queues</a><ul><li><a href="#file-handles" class="table-of-contents__link toc-highlight">File Handle Usage with Classic Queues</a></li><li><a href="#memory" class="table-of-contents__link toc-highlight">Memory Footprint with Classic Queues</a></li></ul></li><li><a href="#msg-store-index-implementations" class="table-of-contents__link toc-highlight">Alternate Message Store Index Implementations</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn about RabbitMQ</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reach out to the RabbitMQ team</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rabbitmq" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rabbitmq/rabbitmq-server/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact?utm_source=rmq_release-information_tableheader&amp;utm_medium=rmq_website&amp;utm_campaign=tanzu">Long Term Commercial Support</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact">Contact Us</a></li><li class="footer__item"><a href="https://www.rabbitmq.com/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Broadcom</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tanzu.vmware.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VMware Tanzu<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/legal.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/trademark-guidelines">Trademark Guidelines</a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy/california-privacy-rights.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Your California Privacy Rights<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item ot-sdk-show-settings">Cookie Settings</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2005-2025 Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.</div></div></div></footer></div>
</body>
</html>