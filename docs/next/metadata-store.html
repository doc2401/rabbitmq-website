<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-metadata-store/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Metadata store | RabbitMQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" name="twitter:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" property="og:url" content="https://www.rabbitmq.com/rabbitmq-website/docs/next/metadata-store"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Metadata store | RabbitMQ"><meta data-rh="true" name="description" content="Role of the metadata store"><meta data-rh="true" property="og:description" content="Role of the metadata store"><link data-rh="true" rel="icon" href="/rabbitmq-website/img/rabbitmq-logo.svg"><link data-rh="true" rel="canonical" href="https://www.rabbitmq.com/rabbitmq-website/docs/next/metadata-store"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/next/metadata-store" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/next/metadata-store" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H10VQIW16Y-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rabbitmq-website/blog/rss.xml" title="RabbitMQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rabbitmq-website/blog/atom.xml" title="RabbitMQ Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="RabbitMQ" href="/rabbitmq-website/opensearch.xml">







<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-domain-script="018ee308-473e-754f-b0c2-cbe82d25512f"></script>
<script>function OptanonWrapper(){}</script>
<script>function setGTM(e,t,o,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(o)[0],a=t.createElement(o),s="dataLayer"!=n?"&l="+n:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+r+s,i.parentNode.insertBefore(a,i)}var timer;function waitForOnetrustActiveGroups(){document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?(clearTimeout(timer),setGTM(window,document,"script","dataLayer","GTM-TT84L8K")):timer=setTimeout(waitForOnetrustActiveGroups,250)}document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?setGTM(window,document,"script","dataLayer","GTM-TT84L8K"):waitForOnetrustActiveGroups()</script><link rel="stylesheet" href="/rabbitmq-website/styles.css">
<script src="/rabbitmq-website/runtime~main.js" defer="defer"></script>
<script src="/rabbitmq-website/main.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-color-primary-contrast-background);color:var(--ifm-font-color-base)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong style="font-size: var(--ifm-h4-font-size);"><a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v4.1.0">RabbitMQ 4.1.0 is out</a></strong></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rabbitmq-website/"><div class="navbar__logo"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/rabbitmq-website/tutorials">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rabbitmq-website/docs/next">Docs</a><a class="navbar__item navbar__link" href="/rabbitmq-website/blog">Blog</a><a class="navbar__item navbar__link" href="/rabbitmq-website/contact">Support</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/rabbitmq-website/docs/next/metadata-store">Next</a><ul class="dropdown__menu"><li class=""><strong>Release series</strong></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/rabbitmq-website/docs/next/metadata-store">Next</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/metadata-store">4.1</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/4.0/metadata-store">4.0</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/3.13">3.13</a></li><li><a href="https://v3-12.rabbitmq.com/documentation.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">3.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/rabbitmq-website/release-information">Release Information</a></li></ul></div><a href="https://github.com/rabbitmq/rabbitmq-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs/next">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/release-information">Release Information</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/next/download">Install and Upgrade</a><button aria-label="Expand sidebar category &#x27;Install and Upgrade&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/next/use-rabbitmq">How to Use RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Use RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rabbitmq-website/docs/next/manage-rabbitmq">How to Manage RabbitMQ</a><button aria-label="Collapse sidebar category &#x27;How to Manage RabbitMQ&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/cli">CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/configure">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/relocate">File and Directory Locations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/logging">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/vhosts">Virtual Hosts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/next/access-control"> Authentication and Authorization</a><button aria-label="Expand sidebar category &#x27; Authentication and Authorization&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/parameters">Policies and Runtime Parameters</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/rabbitmq-website/docs/next/metadata-store">Metadata store</a><button aria-label="Collapse sidebar category &#x27;Metadata store&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/metadata-store/how-to-enable-khepri">How to enable Khepri</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/metadata-store/clustering">Clustering and Khepri</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/metadata-store/everyday-operations">Everyday Operations with Khepri</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/metadata-store/failure-recovery">Failure recovery with Khepri</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/metadata-store/known-issues">Known issues with Khepri</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/metadata-store/khepri-faq">Khepri FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/definitions">Schema Definitions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/next/networking">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/next/clustering">Clustering</a><button aria-label="Expand sidebar category &#x27;Clustering&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/rabbitmq-website/docs/next/memory-use">Resource Management</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/backup">Backup and Restore</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/rabbitmq-website/docs/next/runtime">Tuning</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/production-checklist">Deployment Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/kubernetes/operator/operator-overview">RabbitMQ on Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/next/troubleshooting">Troubleshooting RabbitMQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/next/monitoring">How to Monitor RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Monitor RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->RabbitMQ<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/rabbitmq-website/docs/metadata-store">latest version</a></b> (<!-- -->4.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rabbitmq-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/next/manage-rabbitmq"><span itemprop="name">How to Manage RabbitMQ</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Metadata store</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Metadata store</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="role-of-the-metadata-store">Role of the metadata store<a href="#role-of-the-metadata-store" class="hash-link" aria-label="Direct link to Role of the metadata store" title="Direct link to Role of the metadata store">​</a></h2>
<p>The metadata store is the database where RabbitMQ records everything except
queue and stream messages:</p>
<ul>
<li>users and permissions in the internal data store; &quot;internal&quot; as opposed to
users defined externally, for instance, <a href="/rabbitmq-website/docs/next/ldap">LDAP</a></li>
<li>virtual hosts</li>
<li>topology: exchanges, queues, bindings</li>
<li><a href="/rabbitmq-website/docs/next/parameters">runtime parameters and policies</a></li>
</ul>
<figure class="diagram_xNT2"><svg width="195mm" height="60mm" viewBox="0 0 194.99999 60" id="svg1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><defs id="defs1"></defs><g id="layer1" transform="translate(-37.333735,-133.2555)"><text xml:space="preserve" style="line-height:1.25;-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="202.79694" y="174.95424" id="text12" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" letter-spacing="0px" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583"><tspan style="-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="202.79694" y="174.95424" id="tspan12" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583">Runtime parameters</tspan></text><g id="g11" transform="matrix(0.49308712,0,0,0.49308712,196.98996,155.17991)" fill="none" stroke="#000000"><path d="m 12,15 c 1.6569,0 3,-1.3431 3,-3 0,-1.6569 -1.3431,-3 -3,-3 -1.6569,0 -3,1.3431 -3,3 0,1.6569 1.3431,3 3,3 z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="path1-0" stroke="#000000"></path><path d="m 18.7273,14.7273 c -0.121,0.2742 -0.1571,0.5783 -0.1037,0.8732 0.0535,0.2949 0.1941,0.5671 0.4037,0.7813 l 0.0545,0.0546 c 0.1691,0.1688 0.3032,0.3693 0.3947,0.5901 0.0915,0.2207 0.1386,0.4573 0.1386,0.6962 0,0.239 -0.0471,0.4756 -0.1386,0.6963 -0.0915,0.2207 -0.2256,0.4212 -0.3947,0.5901 -0.1688,0.169 -0.3694,0.3031 -0.5901,0.3946 -0.2207,0.0915 -0.4573,0.1386 -0.6962,0.1386 -0.239,0 -0.4756,-0.0471 -0.6963,-0.1386 -0.2207,-0.0915 -0.4212,-0.2256 -0.5901,-0.3946 L 16.4545,18.9545 C 16.2403,18.745 15.9682,18.6044 15.6733,18.5509 15.3784,18.4974 15.0742,18.5335 14.8,18.6545 c -0.2689,0.1153 -0.4982,0.3066 -0.6597,0.5505 -0.1615,0.2439 -0.2482,0.5297 -0.2494,0.8223 v 0.1545 c 0,0.4822 -0.1915,0.9447 -0.5325,1.2857 C 13.0174,21.8084 12.5549,22 12.0727,22 11.5905,22 11.1281,21.8084 10.7871,21.4675 10.4461,21.1265 10.2545,20.664 10.2545,20.1818 V 20.1 C 10.2475,19.7991 10.1501,19.5073 9.97501,19.2625 9.79991,19.0176 9.55521,18.8312 9.27273,18.7273 8.99853,18.6063 8.69437,18.5702 8.39947,18.6236 8.10456,18.6771 7.83244,18.8177 7.61818,19.0273 L 7.56364,19.0818 C 7.39478,19.2509 7.19425,19.385 6.97353,19.4765 6.7528,19.568 6.51621,19.6151 6.27727,19.6151 6.03834,19.6151 5.80174,19.568 5.58102,19.4765 5.36029,19.385 5.15977,19.2509 4.99091,19.0818 4.82186,18.913 4.68775,18.7124 4.59626,18.4917 4.50476,18.271 4.45766,18.0344 4.45766,17.7955 c 0,-0.239 0.0471,-0.4756 0.1386,-0.6963 0.09149,-0.2207 0.2256,-0.4212 0.39465,-0.5901 L 5.04545,16.4545 C 5.25503,16.2403 5.39562,15.9682 5.4491,15.6733 5.50257,15.3784 5.46647,15.0742 5.34545,14.8 5.23022,14.5311 5.03887,14.3018 4.79497,14.1403 4.55107,13.9788 4.26526,13.8921 3.97273,13.8909 H 3.81818 c -0.48221,0 -0.94467,-0.1915 -1.28565,-0.5325 C 2.19156,13.0174 2,12.5549 2,12.0727 2,11.5905 2.19156,11.1281 2.53253,10.7871 2.87351,10.4461 3.33597,10.2545 3.81818,10.2545 H 3.9 C 4.2009,10.2475 4.49273,10.1501 4.73754,9.97501 4.98236,9.79991 5.16883,9.55521 5.27273,9.27273 5.39374,8.99853 5.42984,8.69437 5.37637,8.39947 5.3229,8.10456 5.18231,7.83244 4.97273,7.61818 L 4.91818,7.56364 C 4.74913,7.39478 4.61503,7.19425 4.52353,6.97353 4.43203,6.7528 4.38493,6.51621 4.38493,6.27727 c 0,-0.23893 0.0471,-0.47553 0.1386,-0.69625 0.0915,-0.22073 0.2256,-0.42125 0.39465,-0.59011 0.16886,-0.16905 0.36939,-0.30316 0.59011,-0.39465 0.22072,-0.0915 0.45732,-0.1386 0.69626,-0.1386 0.23893,0 0.47553,0.0471 0.69625,0.1386 0.22072,0.09149 0.42125,0.2256 0.59011,0.39465 L 7.54545,5.04545 C 7.75971,5.25503 8.03183,5.39562 8.32674,5.4491 8.62164,5.50257 8.9258,5.46647 9.2,5.34545 H 9.27273 C 9.54161,5.23022 9.77093,5.03887 9.93245,4.79497 10.094,4.55107 10.1807,4.26526 10.1818,3.97273 V 3.81818 c 0,-0.48221 0.1916,-0.94467 0.5326,-1.28565 C 11.0553,2.19156 11.5178,2 12,2 c 0.4822,0 0.9447,0.19156 1.2856,0.53253 0.341,0.34098 0.5326,0.80344 0.5326,1.28565 V 3.9 c 0.0011,0.29253 0.0878,0.57834 0.2494,0.82224 0.1615,0.2439 0.3908,0.43525 0.6597,0.55049 0.2742,0.12101 0.5783,0.15711 0.8732,0.10364 0.2949,-0.05347 0.5671,-0.19406 0.7813,-0.40364 l 0.0546,-0.05455 c 0.1688,-0.16905 0.3693,-0.30315 0.5901,-0.39465 0.2207,-0.0915 0.4573,-0.1386 0.6962,-0.1386 0.239,0 0.4756,0.0471 0.6963,0.1386 0.2207,0.0915 0.4212,0.2256 0.5901,0.39465 0.169,0.16886 0.3031,0.36939 0.3946,0.59011 0.0915,0.22072 0.1386,0.45732 0.1386,0.69626 0,0.23893 -0.0471,0.47553 -0.1386,0.69625 -0.0915,0.22072 -0.2256,0.42125 -0.3946,0.59011 L 18.9545,7.54545 C 18.745,7.75971 18.6044,8.03183 18.5509,8.32674 18.4974,8.62164 18.5335,8.9258 18.6545,9.2 v 0.07273 c 0.1153,0.26888 0.3066,0.4982 0.5505,0.65972 0.2439,0.16155 0.5297,0.24825 0.8223,0.24935 h 0.1545 c 0.4822,0 0.9447,0.1916 1.2857,0.5326 C 21.8084,11.0553 22,11.5178 22,12 c 0,0.4822 -0.1916,0.9447 -0.5325,1.2856 -0.341,0.341 -0.8035,0.5326 -1.2857,0.5326 H 20.1 c -0.2925,0.0011 -0.5783,0.0878 -0.8222,0.2494 -0.2439,0.1615 -0.4353,0.3908 -0.5505,0.6597 z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" id="path2" stroke="#000000"></path></g><text xml:space="preserve" style="line-height:1.25;-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="164.93829" y="174.95424" id="text6-5" transform="translate(9.1964554e-7)" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" letter-spacing="0px" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583"><tspan style="-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="164.93829" y="174.95424" id="tspan7" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583">Topology</tspan></text><path d="m 167.64393,165.43613 h -0.10848 c -0.91133,0 -1.36695,0 -1.71506,-0.17737 -0.30618,-0.15599 -0.55508,-0.4049 -0.71108,-0.71108 -0.17736,-0.34811 -0.17736,-0.80372 -0.17736,-1.71505 v -3.47134 c 0,-0.91131 0,-1.36696 0.17736,-1.71504 0.156,-0.30617 0.4049,-0.5551 0.71108,-0.7111 0.34811,-0.17736 0.80373,-0.17736 1.71506,-0.17736 h 0.10848 m 0,8.67834 c 0,0.59913 0.48566,1.08479 1.08479,1.08479 0.59913,0 1.08479,-0.48566 1.08479,-1.08479 0,-0.59913 -0.48566,-1.0848 -1.08479,-1.0848 -0.59913,0 -1.08479,0.48567 -1.08479,1.0848 z m 0,-8.67834 c 0,0.59912 0.48566,1.08479 1.08479,1.08479 0.59913,0 1.08479,-0.48567 1.08479,-1.08479 0,-0.59911 -0.48566,-1.08479 -1.08479,-1.08479 -0.59913,0 -1.08479,0.48568 -1.08479,1.08479 z m -5.42396,4.33917 h 5.42396 m -5.42396,0 c 0,0.59913 -0.48568,1.08479 -1.08479,1.08479 -0.59912,0 -1.08479,-0.48566 -1.08479,-1.08479 0,-0.59913 0.48567,-1.08479 1.08479,-1.08479 0.59911,0 1.08479,0.48566 1.08479,1.08479 z m 5.42396,0 c 0,0.59913 0.48566,1.08479 1.08479,1.08479 0.59913,0 1.08479,-0.48566 1.08479,-1.08479 0,-0.59913 -0.48566,-1.08479 -1.08479,-1.08479 -0.59913,0 -1.08479,0.48566 -1.08479,1.08479 z" stroke-width="1.08479" stroke-linecap="round" stroke-linejoin="round" id="path1" stroke="#000000" transform="translate(9.1964554e-7)" fill="none"></path><text xml:space="preserve" style="line-height:1.25;-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="127.0077" y="174.95424" id="text6-5-4" transform="translate(9.1964554e-7)" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" letter-spacing="0px" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583"><tspan style="-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="127.0077" y="174.95424" id="tspan7-6" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583">Virtual hosts</tspan></text><path d="m 123.999,158.13906 h 0.005 m -0.005,5.91579 h 0.005 m -0.39931,-3.94386 h 6.70456 c 0.55219,0 0.82831,0 1.03921,-0.10746 0.18551,-0.0945 0.33636,-0.24536 0.43086,-0.43088 0.10747,-0.21091 0.10747,-0.487 0.10747,-1.0392 v -0.78877 c 0,-0.55219 0,-0.82829 -0.10747,-1.0392 -0.0945,-0.18552 -0.24535,-0.33636 -0.43086,-0.43088 -0.2109,-0.10747 -0.48702,-0.10747 -1.03921,-0.10747 h -6.70456 c -0.5522,0 -0.82829,0 -1.0392,0.10747 -0.18552,0.0945 -0.33636,0.24536 -0.43088,0.43088 -0.10747,0.21091 -0.10747,0.487 -0.10747,1.0392 v 0.78877 c 0,0.5522 0,0.82829 0.10747,1.0392 0.0945,0.18552 0.24536,0.33635 0.43088,0.43088 0.21091,0.10746 0.48701,0.10746 1.0392,0.10746 z m 0,5.91579 h 6.70456 c 0.55219,0 0.82831,0 1.03921,-0.10747 0.18551,-0.0945 0.33636,-0.24535 0.43086,-0.43086 0.10747,-0.2109 0.10747,-0.48702 0.10747,-1.03921 v -0.78877 c 0,-0.55219 0,-0.82831 -0.10747,-1.03921 -0.0945,-0.18551 -0.24535,-0.33636 -0.43086,-0.43087 -0.2109,-0.10747 -0.48702,-0.10747 -1.03921,-0.10747 h -6.70456 c -0.5522,0 -0.82829,0 -1.0392,0.10747 -0.18552,0.0945 -0.33636,0.24536 -0.43088,0.43087 -0.10747,0.2109 -0.10747,0.48702 -0.10747,1.03921 v 0.78877 c 0,0.55219 0,0.82831 0.10747,1.03921 0.0945,0.18551 0.24536,0.33636 0.43088,0.43086 0.21091,0.10747 0.48701,0.10747 1.0392,0.10747 z" stroke-width="0.985965" stroke-linecap="round" stroke-linejoin="round" id="path1-2" stroke="#000000" transform="translate(9.1964554e-7)" fill="none"></path><text xml:space="preserve" style="line-height:1.25;-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="88.87178" y="174.95424" id="text6-5-9" transform="translate(9.1964554e-7)" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" letter-spacing="0px" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583"><tspan style="-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="88.87178" y="174.95424" id="tspan22" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583">Internal users</tspan></text><path d="m 93.802822,166.52056 c 0,-0.84102 0,-1.26147 -0.103772,-1.60364 -0.233696,-0.77039 -0.836619,-1.37331 -1.607011,-1.60701 -0.342169,-0.10377 -0.762618,-0.10377 -1.603637,-0.10377 h -3.013108 c -0.840995,0 -1.261499,0 -1.603661,0.10377 -0.770398,0.2337 -1.373267,0.83662 -1.606963,1.60701 -0.103796,0.34217 -0.103796,0.76262 -0.103796,1.60364 m 7.532772,-8.1354 c 0,1.49769 -1.214102,2.7118 -2.711798,2.7118 -1.497684,0 -2.711798,-1.21411 -2.711798,-2.7118 0,-1.49768 1.214114,-2.71179 2.711798,-2.71179 1.497696,0 2.711798,1.21411 2.711798,2.71179 z" stroke-width="1.20524" stroke-linecap="round" stroke-linejoin="round" id="path1-86" stroke="#000000" transform="translate(9.1964554e-7)" fill="none"></path><text xml:space="preserve" style="line-height:1.25;-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="50.896729" y="174.95424" id="text6-02-1" transform="translate(9.1964554e-7)" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" letter-spacing="0px" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583"><tspan id="tspan6-11-1" style="-inkscape-font-specification:&#x27;Raleway, @wght=400&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&#x27;wght&#x27; 400;text-align:center" x="50.896729" y="174.95424" font-style="normal" font-variant="normal" font-weight="normal" font-stretch="normal" font-size="4.23333px" font-family="Raleway" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583">Messages</tspan></text><path d="m 46.076548,158.63183 4.025499,2.81784 c 0.325988,0.22822 0.488982,0.34231 0.666274,0.38648 0.156585,0.0391 0.320367,0.0391 0.476952,0 0.177292,-0.0442 0.340286,-0.15826 0.666274,-0.38648 l 4.025499,-2.81784 m -7.493979,6.40933 h 5.12746 c 0.82838,0 1.242521,0 1.558944,-0.16122 0.278313,-0.14179 0.504562,-0.36804 0.646356,-0.64636 0.161219,-0.31642 0.161219,-0.73056 0.161219,-1.55894 v -3.15536 c 0,-0.82836 0,-1.24254 -0.161219,-1.55893 -0.141794,-0.27831 -0.368043,-0.50458 -0.646356,-0.64638 -0.316423,-0.16121 -0.730564,-0.16121 -1.558944,-0.16121 h -5.12746 c -0.82836,0 -1.242541,0 -1.55893,0.16121 -0.278307,0.1418 -0.504576,0.36807 -0.64638,0.64638 -0.161209,0.31639 -0.161209,0.73057 -0.161209,1.55893 v 3.15536 c 0,0.82838 0,1.24252 0.161209,1.55894 0.141804,0.27832 0.368073,0.50457 0.64638,0.64636 0.316389,0.16122 0.73057,0.16122 1.55893,0.16122 z" stroke-width="0.98605" stroke-linecap="round" stroke-linejoin="round" id="path1-8" stroke="#000000" transform="translate(9.1964554e-7)" fill="none"></path><rect style="font-variation-settings:&#x27;wght&#x27; 400" id="rect20" width="157.51302" height="46.973965" x="70.598801" y="141.99547" rx="1.0916115" ry="1.0582386" transform="translate(9.1964554e-7)" fill="none" fill-opacity="1" fill-rule="evenodd" stroke="#000000" stroke-width="0.268699" stroke-linejoin="round" stroke-dasharray="1.07479, 0.537398" stroke-dashoffset="0" stroke-opacity="1"></rect><rect style="font-variation-settings:&#x27;wght&#x27; 500" id="metadata-store-label-bg" width="64.894218" height="8.2458239" x="116.90814" y="137.53326" rx="1.0583333" ry="1.0583333" transform="translate(9.1964554e-7)" fill="#73a942" fill-opacity="1" fill-rule="evenodd" stroke="#000000" stroke-width="0.264583" stroke-linejoin="round" stroke-dasharray="none" stroke-opacity="1"></rect><text xml:space="preserve" style="line-height:1.25;-inkscape-font-specification:&#x27;Raleway Bold&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center" x="149.23036" y="143.18018" id="text6-0" transform="translate(9.1964554e-7)" font-style="normal" font-variant="normal" font-weight="bold" font-stretch="normal" font-size="4.23333px" font-family="Raleway" letter-spacing="0px" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583"><tspan id="tspan6-1" style="-inkscape-font-specification:&#x27;Raleway Bold&#x27;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center" x="149.23036" y="143.18018" font-style="normal" font-variant="normal" font-weight="bold" font-stretch="normal" font-size="4.23333px" font-family="Raleway" text-anchor="middle" fill="#000000" fill-opacity="1" stroke-width="0.264583">Metadata store</tspan></text></g></svg><figcaption>Role of the metadata store</figcaption></figure>
<p>In a cluster, the metadata store is responsible for replicating that across
all RabbitMQ nodes.</p>
<p>The metadata store subsystem relies on a backend library to provide the
database, its replication algorithm and failure recovery characteristics.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-backends">Supported Backends<a href="#supported-backends" class="hash-link" aria-label="Direct link to Supported Backends" title="Direct link to Supported Backends">​</a></h2>
<p>RabbitMQ supports two different libraries that provide this database:</p>
<ul>
<li>Mnesia</li>
<li>Khepri</li>
</ul>
<p>Only one of them is used at a given time. Each one is described below.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mnesia">Mnesia<a href="#mnesia" class="hash-link" aria-label="Direct link to Mnesia" title="Direct link to Mnesia">​</a></h3>
<figure class="without-borders" style="float:right"><p><img decoding="async" loading="lazy" src="https://www.erlang.org/assets/img/erlang-logo.svg" alt="" class="img_ev3q">
</p><figcaption>Erlang/OTP logo</figcaption><p></p></figure>
<p>Mnesia is the original backend, and the only backend used by RabbitMQ until
RabbitMQ 3.13.x. This library is part of Erlang/OTP’s standard distribution.</p>
<p>It is reasonably efficient, provides transactions and cluster replication, an
API for backup and restore and, being a native Erlang/OTP library, is
perfectly integrated in any Erlang application.</p>
<p>Mnesia’s <strong>weakness is its failure recovery characteristics</strong>, in particular
when it comes to network partitions. Its replication algorithm assumes that
the system that uses Mnesia can afford to throw away all data on one side of a
network partition, which is not always the case and does not match the
expectations of many technical operations teams.</p>
<p>With Mnesia, it’s up to RabbitMQ to resolve conflicts in the data if two nodes
could not communicate for a while and the database was updated on one side
(e.g. a queue was declared).</p>
<p>To deal with this, <a href="/rabbitmq-website/docs/next/partitions">network partition strategies</a> were
introduced in RabbitMQ. However they are by no means a fundamental solution
and are difficult to reason about.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="khepri">Khepri<a href="#khepri" class="hash-link" aria-label="Direct link to Khepri" title="Direct link to Khepri">​</a></h3>
<figure class="without-borders" style="float:right"><svg viewBox="0 0 313.52 684.98" xmlns="http://www.w3.org/2000/svg" class="floating-logo" style="width:100px;height:175px"><g stroke="#4d3d36" stroke-width="14.362"><path d="m243.54 36.109v92.57c0 15.976-38.854 28.928-86.784 28.928-47.93 0-86.784-12.952-86.784-28.928v-92.57" fill="#fff" stroke-linecap="round" stroke-linejoin="round"></path><path d="m243.54 36.109c0 15.976-38.854 28.928-86.784 28.928-47.93 0-86.784-12.952-86.784-28.928 0-15.976 38.854-28.928 86.784-28.928 47.93 0 86.784 12.952 86.784 28.928z" fill="#f60"></path><g fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="m156.76 192.32v-34.714"></path><path d="m133.62 215.46h-80.998"></path><path d="m179.9 215.46h80.998"></path></g><path d="m179.9 215.46c0 12.781-10.361 23.142-23.142 23.142-12.781 0-23.142-10.361-23.142-23.142 0-12.781 10.361-23.142 23.142-23.142 12.781 0 23.142 10.361 23.142 23.142z" fill="#f60" stroke-linecap="round" stroke-linejoin="round"></path><path d="m243.54 82.394c0 15.976-38.854 28.928-86.784 28.928-47.93 0-86.784-12.952-86.784-28.928" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></g><path d="m258.5 534.2c-1.477-0.999-2.549-2.491-3.024-4.209-0.054-0.193-2.315-8.354-5.204-18.859l-25.144 7.83-2.87 13.239c-0.762 3.513-3.869 5.912-7.323 5.913-0.526 0-1.061-0.056-1.596-0.172-4.049-0.878-6.618-4.871-5.741-8.919l3.797-17.512c0.573-2.641 2.521-4.769 5.101-5.572l29.807-9.281c-2.983-10.91-5.918-21.744-7.45-27.676-2.604-10.077-6.936-19.471-12.876-27.921-2.041-2.903-1.768-6.84 0.655-9.433 20.751-22.216 37.581-48.204 50.024-77.244 16.344-38.145 23.685-78.409 21.48-117.29-29.672 25.223-53.761 58.31-70.106 96.456-9.873 23.043-16.479 46.917-19.664 71.037 3.58 2.156 7.039 4.527 10.313 7.117 3.249 2.569 3.8 7.286 1.229 10.534-1.479 1.872-3.673 2.848-5.887 2.848-1.63 0-3.271-0.528-4.647-1.618-3.899-3.083-8.096-5.821-12.473-8.157-0.036-0.019-0.074-0.031-0.11-0.05-12.315-6.551-25.784-9.872-40.031-9.872s-27.716 3.321-40.031 9.872c-0.034 0.018-0.07 0.03-0.105 0.048-4.378 2.337-8.577 5.074-12.478 8.159-1.377 1.09-3.019 1.618-4.647 1.618-2.214 0-4.407-0.976-5.887-2.848-2.57-3.248-2.02-7.965 1.229-10.534 3.274-2.59 6.734-4.961 10.313-7.117-3.185-24.121-9.791-47.995-19.664-71.038-16.346-38.146-40.435-71.233-70.106-96.456-2.205 38.882 5.137 79.146 21.483 117.29 12.444 29.041 29.275 55.03 50.025 77.245 2.422 2.593 2.695 6.529 0.654 9.433-5.94 8.449-10.272 17.843-12.876 27.92-1.533 5.932-4.468 16.765-7.45 27.676l29.807 9.281c2.58 0.804 4.527 2.932 5.101 5.572l3.797 17.512c0.877 4.048-1.692 8.041-5.741 8.919-0.535 0.115-1.069 0.172-1.596 0.172-3.454 0-6.562-2.4-7.323-5.913l-2.87-13.239-25.144-7.83c-2.89 10.505-5.151 18.666-5.204 18.859-0.476 1.718-1.548 3.21-3.024 4.209-17.987 12.172-28.727 32.385-28.727 54.07 0 35.972 29.266 65.236 65.237 65.236h20.768c1.792 0 3.524 0.642 4.884 1.809 11.017 9.454 25.072 14.66 39.577 14.66s28.561-5.206 39.577-14.66c1.359-1.167 3.092-1.809 4.884-1.809h20.768c35.972 0 65.237-29.265 65.237-65.236-2e-3 -21.686-10.741-41.899-28.728-54.071zm-109.24-57.818c0-4.143 3.357-7.5 7.5-7.5s7.5 3.357 7.5 7.5v10.877c0 4.143-3.357 7.5-7.5 7.5s-7.5-3.357-7.5-7.5zm-20-21.754v-10.877c0-4.143 3.357-7.5 7.5-7.5s7.5 3.357 7.5 7.5v10.877c0 4.143-3.357 7.5-7.5 7.5s-7.5-3.357-7.5-7.5zm43.831 185.32h-32.66c-4.143 0-7.5-3.357-7.5-7.5s3.357-7.5 7.5-7.5h8.83v-15.816l-13.419-10.382c-3.276-2.534-3.878-7.245-1.343-10.521 1.471-1.902 3.676-2.895 5.907-2.904 0.024-7e-3 32.685-7e-3 32.685-7e-3 2.255 0.015 4.461 1.008 5.932 2.911 2.535 3.275 1.934 7.986-1.343 10.521l-13.42 10.383v15.816h8.83c4.143 0 7.5 3.357 7.5 7.5s-3.357 7.499-7.499 7.499zm11.169-185.32c0 4.143-3.357 7.5-7.5 7.5s-7.5-3.357-7.5-7.5v-10.877c0-4.143 3.357-7.5 7.5-7.5s7.5 3.357 7.5 7.5z" fill="#fff"></path><path d="m269.21 523.4c-2.74-9.907-12.56-45.468-15.841-58.168-2.546-9.855-6.504-19.158-11.791-27.731 20.114-22.501 36.535-48.445 48.858-77.206 19.311-45.067 26.714-93.023 21.409-138.68-0.311-2.67-2.025-4.97-4.496-6.028-2.472-1.061-5.319-0.715-7.466 0.902-36.718 27.653-66.335 66.09-85.645 111.16-9.723 22.691-16.444 46.163-20.031 69.914-11.791-4.709-24.555-7.167-37.451-7.167s-25.66 2.458-37.451 7.167c-3.587-23.751-10.309-47.223-20.031-69.914-19.312-45.067-48.928-83.504-85.647-111.16-2.146-1.617-4.993-1.963-7.466-0.902-2.471 1.059-4.186 3.358-4.496 6.028-5.305 45.659 2.099 93.615 21.409 138.68 12.324 28.76 28.747 54.707 48.857 77.206-5.286 8.573-9.244 17.876-11.79 27.731-3.281 12.7-13.101 48.261-15.841 58.168-20.724 15.102-33.012 39.143-33.012 64.872 0 44.242 35.994 80.236 80.237 80.236h18.072c13.383 10.641 30.017 16.469 47.156 16.469s33.773-5.828 47.156-16.469h18.072c44.243 0 80.237-35.994 80.237-80.236 3e-3 -25.73-12.285-49.771-33.008-64.872zm-47.226 130.11h-20.768c-1.792 0-3.524 0.642-4.884 1.809-11.017 9.454-25.072 14.66-39.577 14.66s-28.561-5.206-39.577-14.66c-1.359-1.167-3.092-1.809-4.884-1.809h-20.768c-35.972 0-65.237-29.265-65.237-65.236 0-21.686 10.739-41.898 28.727-54.07 1.477-0.999 2.549-2.491 3.024-4.209 0.054-0.193 2.315-8.354 5.204-18.859l25.144 7.83 2.87 13.239c0.762 3.513 3.869 5.913 7.323 5.913 0.526 0 1.061-0.057 1.596-0.172 4.049-0.878 6.618-4.871 5.741-8.919l-3.797-17.512c-0.573-2.641-2.521-4.769-5.101-5.572l-29.807-9.281c2.983-10.91 5.918-21.744 7.45-27.676 2.604-10.077 6.936-19.471 12.876-27.92 2.041-2.903 1.768-6.84-0.654-9.433-20.75-22.215-37.581-48.204-50.025-77.245-16.344-38.146-23.686-78.41-21.481-117.29 29.672 25.223 53.761 58.31 70.106 96.456 9.873 23.043 16.479 46.917 19.664 71.038-3.579 2.155-7.039 4.527-10.313 7.117-3.249 2.569-3.8 7.286-1.229 10.534 1.479 1.872 3.673 2.848 5.887 2.848 1.629 0 3.271-0.528 4.647-1.618 3.901-3.085 8.1-5.823 12.478-8.159 0.034-0.018 0.071-0.03 0.105-0.048 12.315-6.551 25.784-9.872 40.031-9.872s27.716 3.321 40.031 9.872c0.036 0.019 0.074 0.031 0.11 0.05 4.377 2.336 8.574 5.073 12.473 8.157 1.377 1.09 3.018 1.618 4.647 1.618 2.214 0 4.407-0.976 5.887-2.848 2.57-3.248 2.02-7.965-1.229-10.534-3.274-2.59-6.733-4.961-10.313-7.117 3.185-24.121 9.791-47.995 19.664-71.037 16.346-38.146 40.435-71.233 70.106-96.456 2.205 38.881-5.137 79.145-21.482 117.29-12.443 29.04-29.273 55.028-50.024 77.244-2.423 2.593-2.696 6.529-0.655 9.433 5.94 8.45 10.272 17.844 12.876 27.921 1.533 5.932 4.468 16.765 7.45 27.676l-29.807 9.281c-2.58 0.804-4.527 2.932-5.101 5.572l-3.797 17.512c-0.877 4.048 1.692 8.041 5.741 8.919 0.535 0.116 1.069 0.172 1.596 0.172 3.454-1e-3 6.562-2.4 7.323-5.913l2.87-13.239 25.144-7.83c2.89 10.505 5.151 18.666 5.204 18.859 0.476 1.718 1.548 3.21 3.024 4.209 17.987 12.172 28.727 32.385 28.727 54.07 1e-3 35.97-29.264 65.235-65.236 65.235z" fill="#4d3d36"></path><path d="m156.76 595.98 11.741-9.083c1.373-1.063 3-1.567 4.612-1.561-0.023-7e-3 -32.684-7e-3 -32.684-7e-3 1.589 1e-3 3.216 0.505 4.589 1.568z" fill="#f60"></path><path d="m173.09 624.95h-8.83v-15.816l13.419-10.382c3.276-2.534 3.878-7.245 1.343-10.521-1.471-1.903-3.677-2.896-5.908-2.904-1.613-6e-3 -3.239 0.499-4.612 1.561l-11.743 9.085-11.741-9.083c-1.373-1.063-3-1.567-4.613-1.561-2.231 9e-3 -4.436 1.002-5.907 2.904-2.535 3.275-1.934 7.986 1.343 10.521l13.419 10.382v15.816h-8.83c-4.143 0-7.5 3.357-7.5 7.5s3.357 7.5 7.5 7.5h32.66c4.143 0 7.5-3.357 7.5-7.5s-3.358-7.502-7.5-7.502z" fill="#4d3d36" stroke-width="1.0016"></path><g fill="#f60"><path d="m144.26 454.63v-10.877c0-4.143-3.357-7.5-7.5-7.5s-7.5 3.357-7.5 7.5v10.877c0 4.143 3.357 7.5 7.5 7.5s7.5-3.357 7.5-7.5z"></path><path d="m156.76 494.76c4.143 0 7.5-3.357 7.5-7.5v-10.877c0-4.143-3.357-7.5-7.5-7.5s-7.5 3.357-7.5 7.5v10.877c0 4.143 3.358 7.5 7.5 7.5z"></path><path d="m176.76 436.25c-4.143 0-7.5 3.357-7.5 7.5v10.877c0 4.143 3.357 7.5 7.5 7.5s7.5-3.357 7.5-7.5v-10.877c0-4.142-3.357-7.5-7.5-7.5z"></path></g></svg><figcaption>Khepri logo</figcaption></figure>
<p>Khepri is a fully supported metadata store starting with RabbitMQ 4.0.x. It is
developed by the RabbitMQ team and reuses a lot of the work done for <a href="/rabbitmq-website/docs/next/quorum-queues">quorum
queues</a> and <a href="/rabbitmq-website/docs/next/streams">streams</a>.</p>
<p>Indeed all these components are based on the <a href="https://raft.github.io/" target="_blank" rel="noopener noreferrer">Raft consensus
algorithm</a>. Therefore the behavior is well defined in
the case of a loss of connectivity and is way easier to reason about. The
behavior is also consistent across RabbitMQ components and subsystems because
they all use the same algorithm.</p>
<p>The goal is to ultimately switch to Khepri only and stop using Mnesia.
However, the use of Khepri is a breaking change compared to Mnesia — even
though it is an internal piece — because it affects various user-visible
parts behavior when the cluster or the network have a bad day.</p>
<p>If you want to learn more about Khepri and its intagration into RabbitMQ,
Michael Davis, who works on this project, made a presentation at the Code BEAM
Europe 2023 confenence. You can watch the <a href="https://www.youtube.com/watch?v=whVqpgvep90" target="_blank" rel="noopener noreferrer">recording of &quot;Khepri: Replacing
Mnesia in RabbitMQ&quot;</a> on YouTube.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Khepri became the default backend as of RabbitMQ 4.2.0.</p><p>Mnesia will still be supported. An existing RabbitMQ deployment will continue
to use it once upgraded to RabbitMQ 4.2.x until Khepri is explicitly enabled
by the administrator.</p><p>Mnesia support will be removed in a future version. That is why <strong>the RabbitMQ
team encourages users to test their workload and applications with Khepri</strong> to
truely mature it to become the future default (and only) metadata store in
RabbitMQ.</p></div></div>
<p>The few next pages will explain how to enable Khepri and will cover these
changes of behavior for various daily operations.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/rabbitmq/rabbitmq-website/tree/main/docs/metadata-store/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rabbitmq-website/docs/next/parameters"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Policies and Runtime Parameters</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rabbitmq-website/docs/next/metadata-store/how-to-enable-khepri"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to enable Khepri</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#role-of-the-metadata-store" class="table-of-contents__link toc-highlight">Role of the metadata store</a></li><li><a href="#supported-backends" class="table-of-contents__link toc-highlight">Supported Backends</a><ul><li><a href="#mnesia" class="table-of-contents__link toc-highlight">Mnesia</a></li><li><a href="#khepri" class="table-of-contents__link toc-highlight">Khepri</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn about RabbitMQ</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reach out to the RabbitMQ team</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rabbitmq" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rabbitmq/rabbitmq-server/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact?utm_source=rmq_release-information_tableheader&amp;utm_medium=rmq_website&amp;utm_campaign=tanzu">Long Term Commercial Support</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact">Contact Us</a></li><li class="footer__item"><a href="https://www.rabbitmq.com/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Broadcom</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tanzu.vmware.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VMware Tanzu<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/legal.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/trademark-guidelines">Trademark Guidelines</a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy/california-privacy-rights.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Your California Privacy Rights<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item ot-sdk-show-settings">Cookie Settings</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2005-2025 Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.</div></div></div></footer></div>
</body>
</html>