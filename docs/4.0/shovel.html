<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-4.0 docs-doc-page docs-doc-id-shovel" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Shovel Plugin | RabbitMQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" name="twitter:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" property="og:url" content="https://www.rabbitmq.com/rabbitmq-website/docs/4.0/shovel"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="4.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-4.0"><meta data-rh="true" name="docsearch:version" content="4.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-4.0"><meta data-rh="true" property="og:title" content="Shovel Plugin | RabbitMQ"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/rabbitmq-website/img/rabbitmq-logo.svg"><link data-rh="true" rel="canonical" href="https://www.rabbitmq.com/rabbitmq-website/docs/4.0/shovel"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/4.0/shovel" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/docs/4.0/shovel" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H10VQIW16Y-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rabbitmq-website/blog/rss.xml" title="RabbitMQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rabbitmq-website/blog/atom.xml" title="RabbitMQ Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="RabbitMQ" href="/rabbitmq-website/opensearch.xml">







<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-domain-script="018ee308-473e-754f-b0c2-cbe82d25512f"></script>
<script>function OptanonWrapper(){}</script>
<script>function setGTM(e,t,o,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(o)[0],a=t.createElement(o),s="dataLayer"!=n?"&l="+n:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+r+s,i.parentNode.insertBefore(a,i)}var timer;function waitForOnetrustActiveGroups(){document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?(clearTimeout(timer),setGTM(window,document,"script","dataLayer","GTM-TT84L8K")):timer=setTimeout(waitForOnetrustActiveGroups,250)}document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?setGTM(window,document,"script","dataLayer","GTM-TT84L8K"):waitForOnetrustActiveGroups()</script><link rel="stylesheet" href="/rabbitmq-website/styles.css">
<script src="/rabbitmq-website/runtime~main.js" defer="defer"></script>
<script src="/rabbitmq-website/main.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-color-primary-contrast-background);color:var(--ifm-font-color-base)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong style="font-size: var(--ifm-h4-font-size);"><a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v4.1.0">RabbitMQ 4.1.0 is out</a></strong></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rabbitmq-website/"><div class="navbar__logo"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/rabbitmq-website/tutorials">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rabbitmq-website/docs/4.0">Docs</a><a class="navbar__item navbar__link" href="/rabbitmq-website/blog">Blog</a><a class="navbar__item navbar__link" href="/rabbitmq-website/contact">Support</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/rabbitmq-website/docs/4.0/shovel">4.0</a><ul class="dropdown__menu"><li class=""><strong>Release series</strong></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/next/shovel">Next</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/shovel">4.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/rabbitmq-website/docs/4.0/shovel">4.0</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/3.13/shovel">3.13</a></li><li><a href="https://v3-12.rabbitmq.com/documentation.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">3.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/rabbitmq-website/release-information">Release Information</a></li></ul></div><a href="https://github.com/rabbitmq/rabbitmq-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/docs/4.0">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/release-information">Release Information</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/4.0/download">Install and Upgrade</a><button aria-label="Expand sidebar category &#x27;Install and Upgrade&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/rabbitmq-website/docs/4.0/use-rabbitmq">How to Use RabbitMQ</a><button aria-label="Collapse sidebar category &#x27;How to Use RabbitMQ&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/4.0/publishers">Publishing Messages</a><button aria-label="Expand sidebar category &#x27;Publishing Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/exchanges">Exchanges</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/4.0/consumers">Consuming Messages</a><button aria-label="Expand sidebar category &#x27;Consuming Messages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/4.0/queues">Queues</a><button aria-label="Expand sidebar category &#x27;Queues&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/streams">Streams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/channels">Channels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/reliability">Reliability and Data Safety</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/confirms">Consumer Acknowledgements and Publisher Confirms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/distributed">Network Distribution</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/rabbitmq-website/docs/4.0/plugins">Plugins</a><button aria-label="Collapse sidebar category &#x27;Plugins&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/management">Management Plugin</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/4.0/federation">Federation Plugin</a><button aria-label="Expand sidebar category &#x27;Federation Plugin&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/rabbitmq-website/docs/4.0/shovel">Shovel Plugin</a><button aria-label="Collapse sidebar category &#x27;Shovel Plugin&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/shovel-static">Static Shovels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/shovel-dynamic">Dynamic Shovels</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/stomp">STOMP Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/web-stomp">Web STOMP Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/mqtt">MQTT Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/web-mqtt">Web MQTT Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/stream">Stream Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/docs/4.0/installing-plugins">Installing 3rd-party Plugins</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/rabbitmq-website/docs/4.0/protocols">Protocols</a><button aria-label="Expand sidebar category &#x27;Protocols&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rabbitmq-website/client-libraries">Client Libraries</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/4.0/manage-rabbitmq">How to Manage RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Manage RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/rabbitmq-website/docs/4.0/monitoring">How to Monitor RabbitMQ</a><button aria-label="Expand sidebar category &#x27;How to Monitor RabbitMQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->RabbitMQ<!-- --> <b>4.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/rabbitmq-website/docs/shovel">latest version</a></b> (<!-- -->4.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rabbitmq-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/4.0/use-rabbitmq"><span itemprop="name">How to Use RabbitMQ</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rabbitmq-website/docs/4.0/plugins"><span itemprop="name">Plugins</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Shovel Plugin</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 4.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Shovel Plugin</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>This guide provides an overview of RabbitMQ Shovel, a core RabbitMQ plugin that unidirectionally
moves messages from a source to a destination. Two more guides
cover the two flavors of Shovels, <a href="/rabbitmq-website/docs/4.0/shovel-dynamic">dynamic shovels</a> and <a href="/rabbitmq-website/docs/4.0/shovel-static">static shovels</a>,
respectively. This one focuses on explaining the concept, how do shovels work
and what they can do.</p>
<p>Sometimes it is necessary to reliably and continually move messages from a source (typically a queue)
in one cluster to a destination (an exchange, topic, etc) in another cluster.</p>
<p>The <code>rabbitmq_shovel</code> <a href="/rabbitmq-website/docs/4.0/plugins">plugin</a> allows you to
configure a number of shovels (transfer workers), which do just that
and run as part of a RabbitMQ cluster.</p>
<p>The source and destination can be in the same
cluster (typically in different vhosts) or distinct ones.
Shovels support AMQP 0.9.1 and AMQP 1.0 sources and destinations.
The source and destination do not have to use the same protocol,
so it is possible to move messages from an AMQP 1.0 broker to RabbitMQ
or vice versa.</p>
<p>A shovel behaves like a well-written client application, which
connects to its source and destination, consumes and republishes messages,
and uses <a href="/rabbitmq-website/docs/4.0/confirms">acknowledgements</a> on both ends to cope with failures.</p>
<p>A Shovel uses <a href="/rabbitmq-website/client-libraries/erlang-client-user-guide">Erlang AMQP 0-9-1</a>
and <a href="https://github.com/rabbitmq/rabbitmq-server/tree/main/deps/rabbitmq_amqp_client" target="_blank" rel="noopener noreferrer">Erlang AMQP 1.0</a> clients under the hood.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benefits">Why Use Shovel<a href="#benefits" class="hash-link" aria-label="Direct link to Why Use Shovel" title="Direct link to Why Use Shovel">​</a></h2>
<p>Shovel is a minimalistic yet flexible tool in the distributed messaging toolkit
that can accommodate a number of use cases. Below are some of its key features
and design goals.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="loose-coupling">Loose Coupling<a href="#loose-coupling" class="hash-link" aria-label="Direct link to Loose Coupling" title="Direct link to Loose Coupling">​</a></h3>
<p>A shovel can move messages between brokers (or clusters) in
different geographic or administrative domains that</p>
<ul>
<li>may have different loosely related purposes</li>
<li>may run on different versions of RabbitMQ</li>
<li>may use different messaging products or protocols</li>
<li>may have different users and virtual hosts</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wan-friendly">WAN-friendly<a href="#wan-friendly" class="hash-link" aria-label="Direct link to WAN-friendly" title="Direct link to WAN-friendly">​</a></h3>
<p>The Shovel plugin uses <a href="/rabbitmq-website/docs/4.0/connections">client connections</a> under the hood.
<a href="/rabbitmq-website/docs/4.0/confirms">Acknowledgements and publisher confirms</a> are used to ensure data safety in case of connection
and node failures.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cross-protocol-and-product-message-transfers">Cross-protocol and Product Message Transfers<a href="#cross-protocol-and-product-message-transfers" class="hash-link" aria-label="Direct link to Cross-protocol and Product Message Transfers" title="Direct link to Cross-protocol and Product Message Transfers">​</a></h3>
<p>Modern Shovel versions support multiple protocols: AMQP 0.9.1 and AMQP 1.0.</p>
<p>This means it is possible to shovel, e.g. from and AMQP 1.0
broker source to a RabbitMQ destination and vice versa.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flexibility">Flexibility<a href="#flexibility" class="hash-link" aria-label="Direct link to Flexibility" title="Direct link to Flexibility">​</a></h3>
<p>When a shovel connects (either to the source or the
destination) it can be configured to predeclare a certain topology
it needs.</p>
<p>There is no requirement to run the shovel on the same broker
(or cluster) as its source or destination, although that&#x27;s the most typical approach;
the shovel can run on an entirely separate node or cluster.</p>
<p>A comparison between <a href="/rabbitmq-website/docs/4.0/clustering">clustering</a>, <a href="/rabbitmq-website/docs/4.0/federation">federation</a>
is provided in the <a href="/rabbitmq-website/docs/4.0/distributed">Distributed Messaging</a> guide.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-it-does">What Does a Shovel Do?<a href="#what-it-does" class="hash-link" aria-label="Direct link to What Does a Shovel Do?" title="Direct link to What Does a Shovel Do?">​</a></h2>
<p>In essence, a shovel is a minimalistic message pump. Each shovel:</p>
<ul>
<li><a href="/rabbitmq-website/docs/4.0/connections">Connects</a> to the source and destination clusters</li>
<li><a href="/rabbitmq-website/docs/4.0/consumers">Consumes</a> messages from a queue</li>
<li><a href="/rabbitmq-website/docs/4.0/publishers">Re-publishes</a> to a destination</li>
<li>Uses <a href="/rabbitmq-website/docs/4.0/confirms">data safety features</a> on both ends and handles failures</li>
</ul>
<p>The shovel configuration allows each of these processes to be tailored.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection">Connection<a href="#connection" class="hash-link" aria-label="Direct link to Connection" title="Direct link to Connection">​</a></h3>
<p>After connection to a source or a destination broker a
series of configured topology declaration operations can be
issued. For example, on an AMQP 0-9-1 endpoint, queues,
exchanges and bindings can be declared.</p>
<p>A shovel will attempt to reconnect if a failure
occurs and <a href="#clustering">multiple brokers can be specified</a> for the source and
destination so that another broker may be selected (at
random) to reconnect to. A reconnection delay can be
specified to avoid flooding the network with reconnection
attempts, or to prevent reconnection on failure altogether.</p>
<p>All configured topology declaration operations for that source or
destination are re-issued upon reconnection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consumption">Consumption<a href="#consumption" class="hash-link" aria-label="Direct link to Consumption" title="Direct link to Consumption">​</a></h3>
<p>The Shovel&#x27;s consumer will <a href="/rabbitmq-website/docs/4.0/confirms">acknowledge</a> messages
automatically on receipt, after (re-)publication, or after
<a href="/rabbitmq-website/docs/4.0/confirms">confirmation of its publication</a> from the destination server.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="re-publishing">Re-publishing<a href="#re-publishing" class="hash-link" aria-label="Direct link to Re-publishing" title="Direct link to Re-publishing">​</a></h3>
<p>Most publishing and message properties are controlled by the operator.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2>
<p>The Shovel plugin is included in the RabbitMQ distribution.
To enable it, use <a href="/rabbitmq-website/docs/4.0/cli">rabbitmq-plugins</a>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmq-plugins </span><span class="token builtin class-name">enable</span><span class="token plain"> rabbitmq_shovel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="/rabbitmq-website/docs/4.0/management">Management UI</a> users may also wish to enable the <code>rabbitmq_shovel_management</code> plugin
for <a href="#status">Shovel status monitoring</a>.</p>
<p>There are two distinct ways to define shovels: <a href="/rabbitmq-website/docs/4.0/shovel-dynamic">dynamic shovels</a> are defined using
<a href="/rabbitmq-website/docs/4.0/parameters">runtime parameters</a> and <a href="/rabbitmq-website/docs/4.0/shovel-static">static shovels</a> are defined in the <a href="/rabbitmq-website/docs/4.0/configure"><code>advanced.config</code> file</a>.</p>
<p>The pros and cons with each approach are covered below. Most users should consider
dynamic shovels first for their ease of reconfiguration and management.</p>
<table><tr><th><a href="./shovel-static">Static Shovels</a></th><th><a href="./shovel-dynamic">Dynamic Shovels</a></th></tr><tr><td><p>Defined in the broker <a href="./configure">advanced configuration file</a>.</p></td><td><p>Defined using <a href="./parameters">runtime parameters</a>.</p></td></tr><tr><td><p>Creation and deletion require a node restart.</p></td><td><p>Creation and deletion do not require a node restart. Can be created and deleted at any time.</p></td></tr><tr><td><p>Less opinionated, less automation-friendly: any queues, exchanges or bindings can
be declared manually at startup.</p></td><td><p>More opinionated, more automation-friendly: the queues, exchanges and
bindings used by the shovel will be declared automatically.</p></td></tr></table>
<p>Note that when using AMQP 1.0 the &quot;nodes&quot; may still need to be created
outside of the shovel as the protocol does not include topology
creation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="shovel-connection-endpoints">Shovel Connection Endpoints<a href="#shovel-connection-endpoints" class="hash-link" aria-label="Direct link to Shovel Connection Endpoints" title="Direct link to Shovel Connection Endpoints">​</a></h2>
<p>Shovels use URIs to connect to both source and destination.</p>
<p>For AMQP 0-9-1, the URI format follows the <a href="/rabbitmq-website/docs/4.0/uri-spec">RabbitMQ URI specification</a>.</p>
<p>For AMQP 1.0, the format is slightly different, specifically the part that specifies
what virtual host to connect to (assuming the target AMQP 1.0 broker is RabbitMQ, and thus has such a concept).</p>
<p>See the <a href="/rabbitmq-website/docs/4.0/shovel-dynamic#amqp10-reference">dynamic AMQP 1.0 Shovel reference</a> to learn more.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authn-authz-for-shovels">Authentication and authorisation for Shovels<a href="#authn-authz-for-shovels" class="hash-link" aria-label="Direct link to Authentication and authorisation for Shovels" title="Direct link to Authentication and authorisation for Shovels">​</a></h2>
<p>The plugin uses <a href="/rabbitmq-website/client-libraries/erlang-client-user-guide">Erlang AMQP 0-9-1</a> and <a href="https://github.com/rabbitmq/rabbitmq-server/tree/main/deps/rabbitmq_amqp_client" target="_blank" rel="noopener noreferrer">Erlang AMQP 1.0</a>
clients under the hood to open connections to its source and/or destination. Just like any other
<a href="/rabbitmq-website/docs/4.0/connections">client library connection</a>, a Shovel connection must <a href="/rabbitmq-website/docs/4.0/access-control">successfully authenticate</a>
and be <a href="/rabbitmq-website/docs/4.0/access-control">authorized to access</a> the virtual host and resources it is trying to use.
This is true for both sources and destinations.</p>
<p>Authentication and authorisation failures of shovel connections will be
<a href="/rabbitmq-website/docs/4.0/logging">logged</a> by the node that&#x27;s running the shovel.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="clustering">Shovel Failure Handling in Clusters<a href="#clustering" class="hash-link" aria-label="Direct link to Shovel Failure Handling in Clusters" title="Direct link to Shovel Failure Handling in Clusters">​</a></h2>
<p>It&#x27;s normally desirable to ensure that shovels are resilient
to failure of any node in the source or destination clusters,
or the cluster hosting the shovel.</p>
<p>A shovel can be provided a list of both source and destination endpoints.
In this case the shovel will connect to the first reachable endpoint.</p>
<p>Dynamic shovels are automatically defined on all nodes of the
hosting cluster on which the shovel plugin is enabled. Each
shovel will only start on one arbitrarily chosen node, but will
be restarted on another node in case of node failure.</p>
<p>Static shovels should be defined in the configuration file for
all nodes of the hosting cluster on which the shovel plugin is
enabled. Again each shovel will only start on one node and
be restarted on another cluster node when a node failure is detected.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tls">Securing Shovel Connections with TLS<a href="#tls" class="hash-link" aria-label="Direct link to Securing Shovel Connections with TLS" title="Direct link to Securing Shovel Connections with TLS">​</a></h2>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>Starting with Erlang 26, <a href="/rabbitmq-website/docs/4.0/ssl#peer-verification">TLS client peer verification</a> is enabled by default by the TLS implementation.</p><p>If client TLS certificate and key pair is not configured, TLS-enabled Shovels
will fail to connect. A certificate (public key) and private key
pair must be configured for TLS-enabled Shovels that need to use peer verification.</p><p>If peer verification is not necessary, it can be disabled.</p></div></div>
<p>To configure Shovel to use TLS, one needs to</p>
<ul>
<li>In source and destination URIs, use the <code>amqps</code> for scheme instead of <code>amqp</code> and port <code>5671 instead of </code>5672` (assuming the default port is used but the port specified explicitly)</li>
<li>In the same source and destination URIs, specify CA certificate and client certificate/key pair, as well as other parameters (namely <a href="/rabbitmq-website/docs/4.0/ssl#peer-verification">enable or disable peer verification</a>, <a href="/rabbitmq-website/docs/4.0/ssl#peer-verification-depth">peer verification depth</a>) via <a href="/rabbitmq-website/docs/4.0/uri-query-parameters">URI query parameters</a></li>
<li>Optionally, configure <a href="/rabbitmq-website/docs/4.0/ssl">TLS-related</a> settings or defaults common for all shovels (plus, optionally, <a href="/rabbitmq-website/docs/4.0/federation">Federation links</a>) via the Erlang client settings</li>
</ul>
<p>In the following example, the source URI does not use TLS (it connects to <code>localhost</code>, so this may be a reasonable call to make)
while the destination URI is modified to use TLS with a client certificate (public key)
and private key pair but with peer verification disabled (for simplicity, it is encouraged for production use):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Note: this user&#x27;s access is limited to localhost.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># In the following example, the source URI connects to `localhost` and does not use TLS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># while the destination URI is modified to use TLS with peer verification disabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># for simplicity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> guest:guest </span><span class="token parameter variable" style="color:#36acaa">-X</span><span class="token plain"> PUT http://localhost:15672/api/parameters/shovel/%2f/my-shovel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;content-type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> @- </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;value&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;src-protocol&quot;: &quot;amqp091&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;src-uri&quot;: &quot;amqp://localhost&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;src-queue&quot;: &quot;source-queue&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;dest-protocol&quot;: &quot;amqp091&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;dest-uri&quot;: &quot;amqps://target.hostname:5671?cacertfile=/path/to/ca_bundle.pem&amp;certfile=/path/to/client_certificate.pem&amp;keyfile=/path/to/client_key.pem&amp;verify=verify_none&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    &quot;dest-queue&quot;: &quot;destination-queue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These examples use a URI with four additional <a href="/rabbitmq-website/docs/4.0/uri-query-parameters">URI query parameters</a>:</p>
<ul>
<li><code>cacertfile</code>: the CA certificate bundle file that includes one or more CA certificates that were used to sign the client certificate and private key pair</li>
<li><code>certfile</code>: the client certificate (public key)</li>
<li><code>keyfile</code>: the client private key</li>
<li><code>verify</code>: <a href="/rabbitmq-website/docs/4.0/ssl#peer-verification">controls peer verification</a> (in this specific example, disables it)</li>
</ul>
<p>Just like with &quot;regular&quot; client connections, if TLS-enabled shovels need to perform peer verification then server&#x27;s CA must be
trusted on the node where shovels runs, and vice versa.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="status">Monitoring Shovels<a href="#status" class="hash-link" aria-label="Direct link to Monitoring Shovels" title="Direct link to Monitoring Shovels">​</a></h2>
<p>There are two ways of discovering the status of shovels.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="status-management">Using Management UI<a href="#status-management" class="hash-link" aria-label="Direct link to Using Management UI" title="Direct link to Using Management UI">​</a></h3>
<p>Shovel status can be reported on the <a href="/rabbitmq-website/docs/4.0/management">Management plugin</a> user interface
in the administrative section.
This requires the <code>rabbitmq_shovel_management</code> plugin to be <a href="/rabbitmq-website/docs/4.0/plugins">enabled</a>
on the node used to access management UI.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="status-cli">Using CLI Tools<a href="#status-cli" class="hash-link" aria-label="Direct link to Using CLI Tools" title="Direct link to Using CLI Tools">​</a></h3>
<p>Shovel status can be obtained by direct query of the Shovel plugin app using <a href="/rabbitmq-website/docs/4.0/cli"><code>rabbitmqctl</code></a>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># use the -n switch to target a remote node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rabbitmqctl shovel_status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The result will return a list of statuses, one per Shovel running.</p>
<p>Each element of the list is a map with several properties:</p>
<ul>
<li>Name</li>
<li>Type</li>
<li>Status</li>
<li>Last state change timestamp</li>
</ul>
<table><thead><tr><td><strong>Property</strong></td><td><strong>Description</strong></td></tr></thead><tbody><tr><td>Name</td><td>Name of the shovel</td></tr><tr><td>Type</td><td><code>static</code> for static shovels, <code>dynamic</code> for dynamic ones</td></tr><tr><td>Status</td><td>Current state of the shovel</td></tr><tr><td>Timestamp</td><td><p>Time when the shovel has last entered this state (e.g. successfully connected,
lost connection, ran into an exception)</p></td></tr></tbody></table>
<p>Timestamp will return a local calendar time of the form
of <code>{{YYYY, MM, DD}, {HH, MM, SS}}</code>.</p>
<p>Key states of a shovel are</p>
<table><thead><tr><td><strong>State</strong></td><td><strong>Description</strong></td></tr></thead><tbody><tr><td>starting</td><td><p>Shovel is starting or trying to connect to its configured endpoints</p></td></tr><tr><td>running</td><td><p>Shovel has successfully connected and running (consuming from the source and republishing to the destination).
This state will report some basic endpoint and protocol information.</p></td></tr><tr><td>terminated</td><td><p>Shovel has stopped or ran into an exception. A reason will be provided.</p></td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/rabbitmq/rabbitmq-website/tree/main/versioned_docs/version-4.0/shovel.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rabbitmq-website/docs/4.0/federation-reference"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Federation Reference</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rabbitmq-website/docs/4.0/shovel-static"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Static Shovels</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#benefits" class="table-of-contents__link toc-highlight">Why Use Shovel</a><ul><li><a href="#loose-coupling" class="table-of-contents__link toc-highlight">Loose Coupling</a></li><li><a href="#wan-friendly" class="table-of-contents__link toc-highlight">WAN-friendly</a></li><li><a href="#cross-protocol-and-product-message-transfers" class="table-of-contents__link toc-highlight">Cross-protocol and Product Message Transfers</a></li><li><a href="#flexibility" class="table-of-contents__link toc-highlight">Flexibility</a></li></ul></li><li><a href="#what-it-does" class="table-of-contents__link toc-highlight">What Does a Shovel Do?</a><ul><li><a href="#connection" class="table-of-contents__link toc-highlight">Connection</a></li><li><a href="#consumption" class="table-of-contents__link toc-highlight">Consumption</a></li><li><a href="#re-publishing" class="table-of-contents__link toc-highlight">Re-publishing</a></li></ul></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting started</a></li><li><a href="#shovel-connection-endpoints" class="table-of-contents__link toc-highlight">Shovel Connection Endpoints</a></li><li><a href="#authn-authz-for-shovels" class="table-of-contents__link toc-highlight">Authentication and authorisation for Shovels</a></li><li><a href="#clustering" class="table-of-contents__link toc-highlight">Shovel Failure Handling in Clusters</a></li><li><a href="#tls" class="table-of-contents__link toc-highlight">Securing Shovel Connections with TLS</a></li><li><a href="#status" class="table-of-contents__link toc-highlight">Monitoring Shovels</a><ul><li><a href="#status-management" class="table-of-contents__link toc-highlight">Using Management UI</a></li><li><a href="#status-cli" class="table-of-contents__link toc-highlight">Using CLI Tools</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn about RabbitMQ</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reach out to the RabbitMQ team</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rabbitmq" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rabbitmq/rabbitmq-server/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact?utm_source=rmq_release-information_tableheader&amp;utm_medium=rmq_website&amp;utm_campaign=tanzu">Long Term Commercial Support</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact">Contact Us</a></li><li class="footer__item"><a href="https://www.rabbitmq.com/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Broadcom</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tanzu.vmware.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VMware Tanzu<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/legal.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/trademark-guidelines">Trademark Guidelines</a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy/california-privacy-rights.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Your California Privacy Rights<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item ot-sdk-show-settings">Cookie Settings</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2005-2025 Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.</div></div></div></footer></div>
</body>
</html>