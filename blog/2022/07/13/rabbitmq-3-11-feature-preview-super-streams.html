<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">RabbitMQ 3.11 Feature Preview: Super Streams | RabbitMQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" name="twitter:image" content="https://www.rabbitmq.com/rabbitmq-website/img/rabbitmq-social-media-card.svg"><meta data-rh="true" property="og:url" content="https://www.rabbitmq.com/rabbitmq-website/blog/2022/07/13/rabbitmq-3-11-feature-preview-super-streams"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="RabbitMQ 3.11 Feature Preview: Super Streams | RabbitMQ"><meta data-rh="true" name="description" content="RabbitMQ 3.11 will bring a feature with one of the coolest names in its history: super streams."><meta data-rh="true" property="og:description" content="RabbitMQ 3.11 will bring a feature with one of the coolest names in its history: super streams."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-07-13T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/acogoluegnes"><meta data-rh="true" property="article:tag" content="Streams,New Features"><link data-rh="true" rel="icon" href="/rabbitmq-website/img/rabbitmq-logo.svg"><link data-rh="true" rel="canonical" href="https://www.rabbitmq.com/rabbitmq-website/blog/2022/07/13/rabbitmq-3-11-feature-preview-super-streams"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/blog/2022/07/13/rabbitmq-3-11-feature-preview-super-streams" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.rabbitmq.com/rabbitmq-website/blog/2022/07/13/rabbitmq-3-11-feature-preview-super-streams" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://H10VQIW16Y-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://www.rabbitmq.com/rabbitmq-website/blog/2022/07/13/rabbitmq-3-11-feature-preview-super-streams","mainEntityOfPage":"https://www.rabbitmq.com/rabbitmq-website/blog/2022/07/13/rabbitmq-3-11-feature-preview-super-streams","url":"https://www.rabbitmq.com/rabbitmq-website/blog/2022/07/13/rabbitmq-3-11-feature-preview-super-streams","headline":"RabbitMQ 3.11 Feature Preview: Super Streams","name":"RabbitMQ 3.11 Feature Preview: Super Streams","description":"RabbitMQ 3.11 will bring a feature with one of the coolest names in its history: super streams.","datePublished":"2022-07-13T00:00:00.000Z","author":{"@type":"Person","name":"Arnaud Cogolu√®gnes","url":"https://github.com/acogoluegnes","image":"https://github.com/acogoluegnes.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://www.rabbitmq.com/rabbitmq-website/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/rabbitmq-website/blog/rss.xml" title="RabbitMQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rabbitmq-website/blog/atom.xml" title="RabbitMQ Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="RabbitMQ" href="/rabbitmq-website/opensearch.xml">







<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-domain-script="018ee308-473e-754f-b0c2-cbe82d25512f"></script>
<script>function OptanonWrapper(){}</script>
<script>function setGTM(e,t,o,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName(o)[0],a=t.createElement(o),s="dataLayer"!=n?"&l="+n:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+r+s,i.parentNode.insertBefore(a,i)}var timer;function waitForOnetrustActiveGroups(){document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?(clearTimeout(timer),setGTM(window,document,"script","dataLayer","GTM-TT84L8K")):timer=setTimeout(waitForOnetrustActiveGroups,250)}document.cookie.indexOf("OptanonConsent")>-1&&document.cookie.indexOf("groups=")>-1?setGTM(window,document,"script","dataLayer","GTM-TT84L8K"):waitForOnetrustActiveGroups()</script><link rel="stylesheet" href="/rabbitmq-website/styles.css">
<script src="/rabbitmq-website/runtime~main.js" defer="defer"></script>
<script src="/rabbitmq-website/main.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-color-primary-contrast-background);color:var(--ifm-font-color-base)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><strong style="font-size: var(--ifm-h4-font-size);"><a href="https://github.com/rabbitmq/rabbitmq-server/releases/tag/v4.1.0">RabbitMQ 4.1.0 is out</a></strong></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rabbitmq-website/"><div class="navbar__logo"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rabbitmq-website/img/rabbitmq-logo-with-name.svg" alt="RabbitMQ" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/rabbitmq-website/tutorials">Getting Started</a><a class="navbar__item navbar__link" href="/rabbitmq-website/docs">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rabbitmq-website/blog">Blog</a><a class="navbar__item navbar__link" href="/rabbitmq-website/contact">Support</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/rabbitmq-website/docs">4.1</a><ul class="dropdown__menu"><li class=""><strong>Release series</strong></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/next">Next</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs">4.1</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/4.0">4.0</a></li><li><a class="dropdown__link" href="/rabbitmq-website/docs/3.13">3.13</a></li><li><a href="https://v3-12.rabbitmq.com/documentation.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">3.12<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/rabbitmq-website/release-information">Release Information</a></li></ul></div><a href="https://github.com/rabbitmq/rabbitmq-website" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-1"><article class=""><header><h1 class="title_f1Hy">RabbitMQ 3.11 Feature Preview: Super Streams</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-07-13T00:00:00.000Z">July 13, 2022</time> ¬∑ <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/acogoluegnes" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://github.com/acogoluegnes.png" alt="Arnaud Cogolu√®gnes"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/acogoluegnes" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Arnaud Cogolu√®gnes</span></a></div><div class="authorSocials_rSDt"><a href="https://github.com/acogoluegnes" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialLink_owbf githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a><a href="https://www.linkedin.com/in/arnaudcogoluegnes/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" class="authorSocialLink_owbf"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453" fill="#0A66C2"></path></svg></a><a href="https://bsky.app/profile/acogoluegnes.bsky.social" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="Bluesky"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 226" class="authorSocialLink_owbf"><path fill="#1185FE" d="M55.491 15.172c29.35 22.035 60.917 66.712 72.509 90.686 11.592-23.974 43.159-68.651 72.509-90.686C221.686-.727 256-13.028 256 26.116c0 7.818-4.482 65.674-7.111 75.068-9.138 32.654-42.436 40.983-72.057 35.942 51.775 8.812 64.946 38 36.501 67.187-54.021 55.433-77.644-13.908-83.696-31.676-1.11-3.257-1.63-4.78-1.637-3.485-.008-1.296-.527.228-1.637 3.485-6.052 17.768-29.675 87.11-83.696 31.676-28.445-29.187-15.274-58.375 36.5-67.187-29.62 5.041-62.918-3.288-72.056-35.942C4.482 91.79 0 33.934 0 26.116 0-13.028 34.314-.727 55.491 15.172Z"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>RabbitMQ 3.11 will bring a feature with one of the coolest names in its history: super streams.
Super streams are a way to scale out by partitioning a large stream into smaller streams.
They integrate with <a href="/rabbitmq-website/blog/2022/07/05/rabbitmq-3-11-feature-preview-single-active-consumer-for-streams">single active consumer</a> to preserve message order within a partition.</p>
<p>This blog post gives an overview of super streams and the use cases they unlock.
Read on to learn more, we value <a href="/rabbitmq-website/contact">your feedback</a> to make this feature the best it can be.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">‚Äã</a></h2>
<p>A super stream is a logical stream made of individual, regular <a href="/rabbitmq-website/blog/2021/07/13/rabbitmq-streams-overview#what-are-rabbitmq-streams">streams</a>.
It is a way to <em>scale out publishing and consuming</em> with RabbitMQ Streams: a large logical stream is divided into partition streams, splitting up the storage and the traffic on several cluster nodes.</p>
<p>A super stream remains a logical entity: applications see it as one &quot;big&quot; stream, thanks to the smartness of client libraries.
The topology of a super stream is based on the <a href="/rabbitmq-website/tutorials/amqp-concepts">AMQP 0.9.1 model</a>, that is exchange, queues, and bindings between them.</p>
<p>The following figure shows an <code>invoices</code> super stream made of 3 partitions.
It is defined by an <code>invoices</code> exchange with 3 streams bound to it.</p>
<p></p><figure><img decoding="async" loading="lazy" alt="A super stream is a structure that sits above streams, allowing to logically group a set of streams. AMQP 0.9.1 resources define its physical topology." src="data:image/png;base64,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" width="400" height="210" class="img_ev3q"><figcaption>A super stream is a structure that sits above streams, allowing to logically group a set of streams. AMQP 0.9.1 resources define its physical topology.</figcaption></figure><p></p>
<p>Messages do not go through the exchange, they go directly to the partition streams.
But <a href="https://rabbitmq.github.io/rabbitmq-stream-java-client/snapshot/htmlsingle/#super-streams" target="_blank" rel="noopener noreferrer">client libraries</a> use the topology information to figure out where to route messages to and where to consume them from.</p>
<p>Let&#x27;s talk about the elephant in the room: how does it compare to Kafka?
We can compare a super stream to a Kafka topic and a stream to a partition of a Kafka topic.
A RabbitMQ stream is a first-class, individually-named object though, whereas a Kafka partition is a subordinate of a Kafka topic.
This explanation leaves <em>a lot</em> of details out, there is no real 1-to-1 mapping, but it is accurate enough for our point in this post.</p>
<p>Super streams also leverage <a href="/rabbitmq-website/blog/2022/07/05/rabbitmq-3-11-feature-preview-single-active-consumer-for-streams">single active consumer</a> to preserve the order of messages within a partition during the consumer processing.
More on this below.</p>
<p>Don&#x27;t get us wrong, super streams do not deprecate individual streams or make them useless.
They are not streams version 2.0 either, because we made streams wrong in the first place.
Super streams sit on top of streams, they bring their own set of features and capabilities.
You can keep using individual streams where they fit the bill and you can explore super streams for more demanding use cases.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="publishing-to-a-super-stream">Publishing To a Super Stream<a href="#publishing-to-a-super-stream" class="hash-link" aria-label="Direct link to Publishing To a Super Stream" title="Direct link to Publishing To a Super Stream">‚Äã</a></h2>
<p>A message an application publishes to a super stream must go to one of the partitions.
The application gets to choose the partition, with some help from the client library, the broker does not handle the routing.
This is flexible and avoids a bottleneck on the server side.</p>
<p>The application must provide at least one piece of information: a routing key extracted from the message.
The following snippet shows how an application provides this code with the stream Java client library:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Producer</span><span class="token plain"> producer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> environment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">producerBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">superStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;invoices&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// set the super stream name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">routing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getProperties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMessageIdAsString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// extract routing key </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">producerBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">producer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Publishing remains the same as with a <a href="/rabbitmq-website/blog/2021/07/19/rabbitmq-streams-first-application#publishing-to-a-stream">regular stream</a>, the producer configuration is just a bit different.
Publishing to a stream or a super stream does not impact the code of the application much.</p>
<p>Where does the message go? In this case, the library chooses the stream partition by hashing the routing key using <a href="https://en.wikipedia.org/wiki/MurmurHash" target="_blank" rel="noopener noreferrer">MurmurHash3</a>.
This hash function provides good uniformity, performance, and portability, making it a good default choice.
The routing key is an invoice ID in our case, so the invoices should be spread uniformly across the partitions.
If the routing key was the customer ID, we would have the guarantee that all the invoices for a given customer would be on the same partition.
Here is a use case that can take advantage of this: per-customer reporting on a given period of time with the appropriate <a href="https://rabbitmq.github.io/rabbitmq-stream-java-client/stable/htmlsingle/#specifying-an-offset" target="_blank" rel="noopener noreferrer">timestamp-based offset specification</a>.</p>
<p>Speaking about processing, let&#x27;s see how to consume from a super stream.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="consuming-from-a-super-stream">Consuming From a Super Stream<a href="#consuming-from-a-super-stream" class="hash-link" aria-label="Direct link to Consuming From a Super Stream" title="Direct link to Consuming From a Super Stream">‚Äã</a></h2>
<p>The partitions of a super stream are regular streams, so applications could consume from them as usual.
But this implies knowing about the topology of the super stream, whereas we sold it as a logical entity, something applications see as an individual stream.
Fortunately, the client library can make it so, with some help from the broker, making it all transparent for applications.</p>
<p>A client library can implement a <a href="https://en.wikipedia.org/wiki/Composite_pattern" target="_blank" rel="noopener noreferrer">well-known design pattern</a> and provide a composite consumer that consumes from all the partitions of a super stream at the same time:</p>
<p></p><figure><img decoding="async" loading="lazy" alt="A client library provides a composite consumer that consumes from all partitions at the same time. Applications then see the super stream as an individual stream. This is not enough though." src="/rabbitmq-website/assets/images/super-streams-composite-consumer-27f509885b69becf4fca602da1aa9998.png" width="710" height="322" class="img_ev3q"><figcaption>A client library provides a composite consumer that consumes from all partitions at the same time. Applications then see the super stream as an individual stream. This is not enough though.</figcaption></figure><p></p>
<p>The composite consumer implemented this way has limitations: if you spin up several instances of the same application for redundancy and scalability, they will consume the same messages, duplicating the processing.
All this needs coordination and luckily we can apply the semantics of <a href="/rabbitmq-website/blog/2022/07/05/rabbitmq-3-11-feature-preview-single-active-consumer-for-streams">single active consumer</a> to our super stream composite consumers.</p>
<p>Now with single active consumer enabled, the instances of our composite consumers coordinate with the broker to make sure there is only one consumer on a given partition at a time.</p>
<p></p><figure><img decoding="async" loading="lazy" alt="Combining super stream consumers and single active consumer. There is only one active consumer on a partition at a time for a given group." src="/rabbitmq-website/assets/images/super-streams-sac-4671aa06b5c0cc6d262decc5dfac7ab5.png" width="730" height="672" class="img_ev3q"><figcaption>Combining super stream consumers and single active consumer. There is only one active consumer on a partition at a time for a given group.</figcaption></figure><p></p>
<p>The good news is that all these are implementation details.
Application instances can come up and down, the consumers will be activated or deactivated according to the single-active-consumer semantics.</p>
<p>How does it translate into code? Here is an example with the stream Java client:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Consumer</span><span class="token plain"> consumer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> environment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">consumerBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">superStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;invoices&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// set the super stream name </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;application-1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// set the consumer name (mandatory) </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">singleActiveConsumer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// enable single active consumer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">messageHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// message processing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This stays similar to a <a href="/rabbitmq-website/blog/2021/07/19/rabbitmq-streams-first-application#consuming-the-messages">consumer of a regular stream</a>, only the configuration changes, and more importantly the message handling code remains the same.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="wrapping-up">Wrapping Up<a href="#wrapping-up" class="hash-link" aria-label="Direct link to Wrapping Up" title="Direct link to Wrapping Up">‚Äã</a></h2>
<p>We covered <em>super streams</em> in this blog post, a new feature in the upcoming RabbitMQ 3.11 release.
Super streams are partitioned streams, they bring scalability to RabbitMQ Stream.
Together with <a href="/rabbitmq-website/blog/2022/07/05/rabbitmq-3-11-feature-preview-single-active-consumer-for-streams">single active consumer</a>, they offer the guarantee of processing messages in their publishing order within a partition.</p>
<p>This blog post has a <a href="https://github.com/acogoluegnes/rabbitmq-stream-single-active-consumer#super-streams" target="_blank" rel="noopener noreferrer">companion sample project</a>, that provides a step-by-step demonstration to illustrate the features covered.
Do not hesitate to have a look at it!</p>
<p>We are excited to share this new feature with the RabbitMQ community and we can&#x27;t wait to hear <a href="/rabbitmq-website/contact">some feedback</a> before RabbitMQ 3.11 goes GA later this year.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/rabbitmq-website/blog/tags/streams">Streams</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/rabbitmq-website/blog/tags/new-features">New Features</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/rabbitmq/rabbitmq-website/tree/main/blog/2022-07-13-rabbitmq-3-11-feature-preview-super-streams/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/rabbitmq-website/blog/2022/07/20/required-feature-flags-in-rabbitmq-3.11"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Required feature flags in RabbitMQ 3.11.0</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rabbitmq-website/blog/2022/07/05/rabbitmq-3-11-feature-preview-single-active-consumer-for-streams"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">RabbitMQ 3.11 Feature Preview: Single Active Consumer for Streams</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#publishing-to-a-super-stream" class="table-of-contents__link toc-highlight">Publishing To a Super Stream</a></li><li><a href="#consuming-from-a-super-stream" class="table-of-contents__link toc-highlight">Consuming From a Super Stream</a></li><li><a href="#wrapping-up" class="table-of-contents__link toc-highlight">Wrapping Up</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn about RabbitMQ</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/tutorials">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/docs">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Reach out to the RabbitMQ team</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/rabbitmq" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/rabbitmq/rabbitmq-server/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact?utm_source=rmq_release-information_tableheader&amp;utm_medium=rmq_website&amp;utm_campaign=tanzu">Long Term Commercial Support</a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/contact">Contact Us</a></li><li class="footer__item"><a href="https://www.rabbitmq.com/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Broadcom</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tanzu.vmware.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VMware Tanzu<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/legal.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/rabbitmq-website/trademark-guidelines">Trademark Guidelines</a></li><li class="footer__item"><a href="https://www.vmware.com/help/privacy/california-privacy-rights.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Your California Privacy Rights<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item ot-sdk-show-settings">Cookie Settings</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2005-2025 Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.</div></div></div></footer></div>
</body>
</html>