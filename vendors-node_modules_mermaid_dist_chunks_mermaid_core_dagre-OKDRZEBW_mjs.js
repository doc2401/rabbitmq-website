"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunkrabbitmq_website"] = globalThis["webpackChunkrabbitmq_website"] || []).push([["vendors-node_modules_mermaid_dist_chunks_mermaid_core_dagre-OKDRZEBW_mjs"],{

/***/ "./node_modules/dagre-d3-es/src/graphlib/json.js":
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   read: () => (/* binding */ read),\n/* harmony export */   write: () => (/* binding */ write)\n/* harmony export */ });\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/lodash-es/isUndefined.js\");\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/lodash-es/clone.js\");\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./node_modules/lodash-es/map.js\");\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/lodash-es/forEach.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/dagre-d3-es/src/graphlib/graph.js\");\n\n\n\n\n\nfunction write(g) {\n  var json = {\n    options: {\n      directed: g.isDirected(),\n      multigraph: g.isMultigraph(),\n      compound: g.isCompound(),\n    },\n    nodes: writeNodes(g),\n    edges: writeEdges(g),\n  };\n  if (!lodash_es__WEBPACK_IMPORTED_MODULE_1__[\"default\"](g.graph())) {\n    json.value = lodash_es__WEBPACK_IMPORTED_MODULE_2__[\"default\"](g.graph());\n  }\n  return json;\n}\n\nfunction writeNodes(g) {\n  return lodash_es__WEBPACK_IMPORTED_MODULE_3__[\"default\"](g.nodes(), function (v) {\n    var nodeValue = g.node(v);\n    var parent = g.parent(v);\n    var node = { v: v };\n    if (!lodash_es__WEBPACK_IMPORTED_MODULE_1__[\"default\"](nodeValue)) {\n      node.value = nodeValue;\n    }\n    if (!lodash_es__WEBPACK_IMPORTED_MODULE_1__[\"default\"](parent)) {\n      node.parent = parent;\n    }\n    return node;\n  });\n}\n\nfunction writeEdges(g) {\n  return lodash_es__WEBPACK_IMPORTED_MODULE_3__[\"default\"](g.edges(), function (e) {\n    var edgeValue = g.edge(e);\n    var edge = { v: e.v, w: e.w };\n    if (!lodash_es__WEBPACK_IMPORTED_MODULE_1__[\"default\"](e.name)) {\n      edge.name = e.name;\n    }\n    if (!lodash_es__WEBPACK_IMPORTED_MODULE_1__[\"default\"](edgeValue)) {\n      edge.value = edgeValue;\n    }\n    return edge;\n  });\n}\n\nfunction read(json) {\n  var g = new _graph_js__WEBPACK_IMPORTED_MODULE_0__.Graph(json.options).setGraph(json.value);\n  lodash_es__WEBPACK_IMPORTED_MODULE_4__[\"default\"](json.nodes, function (entry) {\n    g.setNode(entry.v, entry.value);\n    if (entry.parent) {\n      g.setParent(entry.v, entry.parent);\n    }\n  });\n  lodash_es__WEBPACK_IMPORTED_MODULE_4__[\"default\"](json.edges, function (entry) {\n    g.setEdge({ v: entry.v, w: entry.w, name: entry.name }, entry.value);\n  });\n  return g;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZGFncmUtZDMtZXMvc3JjL2dyYXBobGliL2pzb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmJpdG1xLXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvZGFncmUtZDMtZXMvc3JjL2dyYXBobGliL2pzb24uanM/OWUxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaC1lcyc7XG5pbXBvcnQgeyBHcmFwaCB9IGZyb20gJy4vZ3JhcGguanMnO1xuXG5leHBvcnQgeyB3cml0ZSwgcmVhZCB9O1xuXG5mdW5jdGlvbiB3cml0ZShnKSB7XG4gIHZhciBqc29uID0ge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgIGRpcmVjdGVkOiBnLmlzRGlyZWN0ZWQoKSxcbiAgICAgIG11bHRpZ3JhcGg6IGcuaXNNdWx0aWdyYXBoKCksXG4gICAgICBjb21wb3VuZDogZy5pc0NvbXBvdW5kKCksXG4gICAgfSxcbiAgICBub2Rlczogd3JpdGVOb2RlcyhnKSxcbiAgICBlZGdlczogd3JpdGVFZGdlcyhnKSxcbiAgfTtcbiAgaWYgKCFfLmlzVW5kZWZpbmVkKGcuZ3JhcGgoKSkpIHtcbiAgICBqc29uLnZhbHVlID0gXy5jbG9uZShnLmdyYXBoKCkpO1xuICB9XG4gIHJldHVybiBqc29uO1xufVxuXG5mdW5jdGlvbiB3cml0ZU5vZGVzKGcpIHtcbiAgcmV0dXJuIF8ubWFwKGcubm9kZXMoKSwgZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgbm9kZVZhbHVlID0gZy5ub2RlKHYpO1xuICAgIHZhciBwYXJlbnQgPSBnLnBhcmVudCh2KTtcbiAgICB2YXIgbm9kZSA9IHsgdjogdiB9O1xuICAgIGlmICghXy5pc1VuZGVmaW5lZChub2RlVmFsdWUpKSB7XG4gICAgICBub2RlLnZhbHVlID0gbm9kZVZhbHVlO1xuICAgIH1cbiAgICBpZiAoIV8uaXNVbmRlZmluZWQocGFyZW50KSkge1xuICAgICAgbm9kZS5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gd3JpdGVFZGdlcyhnKSB7XG4gIHJldHVybiBfLm1hcChnLmVkZ2VzKCksIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGVkZ2VWYWx1ZSA9IGcuZWRnZShlKTtcbiAgICB2YXIgZWRnZSA9IHsgdjogZS52LCB3OiBlLncgfTtcbiAgICBpZiAoIV8uaXNVbmRlZmluZWQoZS5uYW1lKSkge1xuICAgICAgZWRnZS5uYW1lID0gZS5uYW1lO1xuICAgIH1cbiAgICBpZiAoIV8uaXNVbmRlZmluZWQoZWRnZVZhbHVlKSkge1xuICAgICAgZWRnZS52YWx1ZSA9IGVkZ2VWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGVkZ2U7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWFkKGpzb24pIHtcbiAgdmFyIGcgPSBuZXcgR3JhcGgoanNvbi5vcHRpb25zKS5zZXRHcmFwaChqc29uLnZhbHVlKTtcbiAgXy5lYWNoKGpzb24ubm9kZXMsIGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIGcuc2V0Tm9kZShlbnRyeS52LCBlbnRyeS52YWx1ZSk7XG4gICAgaWYgKGVudHJ5LnBhcmVudCkge1xuICAgICAgZy5zZXRQYXJlbnQoZW50cnkudiwgZW50cnkucGFyZW50KTtcbiAgICB9XG4gIH0pO1xuICBfLmVhY2goanNvbi5lZGdlcywgZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgZy5zZXRFZGdlKHsgdjogZW50cnkudiwgdzogZW50cnkudywgbmFtZTogZW50cnkubmFtZSB9LCBlbnRyeS52YWx1ZSk7XG4gIH0pO1xuICByZXR1cm4gZztcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/dagre-d3-es/src/graphlib/json.js\n");

/***/ }),

/***/ "./node_modules/lodash-es/clone.js":
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _baseClone_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/lodash-es/_baseClone.js\");\n\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return (0,_baseClone_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(value, CLONE_SYMBOLS_FLAG);\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clone);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbG9kYXNoLWVzL2Nsb25lLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmFiYml0bXEtd2Vic2l0ZS8uL25vZGVfbW9kdWxlcy9sb2Rhc2gtZXMvY2xvbmUuanM/YWU0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmFzZUNsb25lIGZyb20gJy4vX2Jhc2VDbG9uZS5qcyc7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNsb25pbmcuICovXG52YXIgQ0xPTkVfU1lNQk9MU19GTEFHID0gNDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgc2hhbGxvdyBjbG9uZSBvZiBgdmFsdWVgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uIHRoZVxuICogW3N0cnVjdHVyZWQgY2xvbmUgYWxnb3JpdGhtXShodHRwczovL21kbi5pby9TdHJ1Y3R1cmVkX2Nsb25lX2FsZ29yaXRobSlcbiAqIGFuZCBzdXBwb3J0cyBjbG9uaW5nIGFycmF5cywgYXJyYXkgYnVmZmVycywgYm9vbGVhbnMsIGRhdGUgb2JqZWN0cywgbWFwcyxcbiAqIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIHNldHMsIHN0cmluZ3MsIHN5bWJvbHMsIGFuZCB0eXBlZFxuICogYXJyYXlzLiBUaGUgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBgYXJndW1lbnRzYCBvYmplY3RzIGFyZSBjbG9uZWRcbiAqIGFzIHBsYWluIG9iamVjdHMuIEFuIGVtcHR5IG9iamVjdCBpcyByZXR1cm5lZCBmb3IgdW5jbG9uZWFibGUgdmFsdWVzIHN1Y2hcbiAqIGFzIGVycm9yIG9iamVjdHMsIGZ1bmN0aW9ucywgRE9NIG5vZGVzLCBhbmQgV2Vha01hcHMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNsb25lLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNsb25lZCB2YWx1ZS5cbiAqIEBzZWUgXy5jbG9uZURlZXBcbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdHMgPSBbeyAnYSc6IDEgfSwgeyAnYic6IDIgfV07XG4gKlxuICogdmFyIHNoYWxsb3cgPSBfLmNsb25lKG9iamVjdHMpO1xuICogY29uc29sZS5sb2coc2hhbGxvd1swXSA9PT0gb2JqZWN0c1swXSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGNsb25lKHZhbHVlKSB7XG4gIHJldHVybiBiYXNlQ2xvbmUodmFsdWUsIENMT05FX1NZTUJPTFNfRkxBRyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsb25lO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/lodash-es/clone.js\n");

/***/ }),

/***/ "./node_modules/mermaid/dist/chunks/mermaid.core/dagre-OKDRZEBW.mjs":
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   render: () => (/* binding */ render)\n/* harmony export */ });\n/* harmony import */ var _chunk_IIMUDSI4_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-IIMUDSI4.mjs\");\n/* harmony import */ var _chunk_VV3M67IP_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-VV3M67IP.mjs\");\n/* harmony import */ var _chunk_HRU6DDCH_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-HRU6DDCH.mjs\");\n/* harmony import */ var _chunk_K557N5IZ_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-K557N5IZ.mjs\");\n/* harmony import */ var _chunk_H2D2JQ3I_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-H2D2JQ3I.mjs\");\n/* harmony import */ var _chunk_C3MQ5ANM_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-C3MQ5ANM.mjs\");\n/* harmony import */ var _chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-O4NI6UNU.mjs\");\n/* harmony import */ var _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs\");\n/* harmony import */ var dagre_d3_es_src_dagre_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./node_modules/dagre-d3-es/src/dagre/index.js\");\n/* harmony import */ var dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./node_modules/dagre-d3-es/src/graphlib/json.js\");\n/* harmony import */ var dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./node_modules/dagre-d3-es/src/graphlib/index.js\");\n\n\n\n\n\n\n\n\n\n// src/rendering-util/layout-algorithms/dagre/index.js\n\n\n\n\n// src/rendering-util/layout-algorithms/dagre/mermaid-graphlib.js\n\n\nvar clusterDb = /* @__PURE__ */ new Map();\nvar descendants = /* @__PURE__ */ new Map();\nvar parents = /* @__PURE__ */ new Map();\nvar clear4 = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)(() => {\n  descendants.clear();\n  parents.clear();\n  clusterDb.clear();\n}, \"clear\");\nvar isDescendant = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((id, ancestorId) => {\n  const ancestorDescendants = descendants.get(ancestorId) || [];\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.trace(\"In isDescendant\", ancestorId, \" \", id, \" = \", ancestorDescendants.includes(id));\n  return ancestorDescendants.includes(id);\n}, \"isDescendant\");\nvar edgeInCluster = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((edge, clusterId) => {\n  const clusterDescendants = descendants.get(clusterId) || [];\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Descendants of \", clusterId, \" is \", clusterDescendants);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Edge is \", edge);\n  if (edge.v === clusterId || edge.w === clusterId) {\n    return false;\n  }\n  if (!clusterDescendants) {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Tilt, \", clusterId, \",not in descendants\");\n    return false;\n  }\n  return clusterDescendants.includes(edge.v) || isDescendant(edge.v, clusterId) || isDescendant(edge.w, clusterId) || clusterDescendants.includes(edge.w);\n}, \"edgeInCluster\");\nvar copy = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((clusterId, graph, newGraph, rootId) => {\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\n    \"Copying children of \",\n    clusterId,\n    \"root\",\n    rootId,\n    \"data\",\n    graph.node(clusterId),\n    rootId\n  );\n  const nodes = graph.children(clusterId) || [];\n  if (clusterId !== rootId) {\n    nodes.push(clusterId);\n  }\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Copying (nodes) clusterId\", clusterId, \"nodes\", nodes);\n  nodes.forEach((node) => {\n    if (graph.children(node).length > 0) {\n      copy(node, graph, newGraph, rootId);\n    } else {\n      const data = graph.node(node);\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"cp \", node, \" to \", rootId, \" with parent \", clusterId);\n      newGraph.setNode(node, data);\n      if (rootId !== graph.parent(node)) {\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Setting parent\", node, graph.parent(node));\n        newGraph.setParent(node, graph.parent(node));\n      }\n      if (clusterId !== rootId && node !== clusterId) {\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Setting parent\", node, clusterId);\n        newGraph.setParent(node, clusterId);\n      } else {\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"In copy \", clusterId, \"root\", rootId, \"data\", graph.node(clusterId), rootId);\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\n          \"Not Setting parent for node=\",\n          node,\n          \"cluster!==rootId\",\n          clusterId !== rootId,\n          \"node!==clusterId\",\n          node !== clusterId\n        );\n      }\n      const edges = graph.edges(node);\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Copying Edges\", edges);\n      edges.forEach((edge) => {\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Edge\", edge);\n        const data2 = graph.edge(edge.v, edge.w, edge.name);\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Edge data\", data2, rootId);\n        try {\n          if (edgeInCluster(edge, rootId)) {\n            _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Copying as \", edge.v, edge.w, data2, edge.name);\n            newGraph.setEdge(edge.v, edge.w, data2, edge.name);\n            _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"newGraph edges \", newGraph.edges(), newGraph.edge(newGraph.edges()[0]));\n          } else {\n            _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\n              \"Skipping copy of edge \",\n              edge.v,\n              \"-->\",\n              edge.w,\n              \" rootId: \",\n              rootId,\n              \" clusterId:\",\n              clusterId\n            );\n          }\n        } catch (e) {\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.error(e);\n        }\n      });\n    }\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Removing node\", node);\n    graph.removeNode(node);\n  });\n}, \"copy\");\nvar extractDescendants = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((id, graph) => {\n  const children = graph.children(id);\n  let res = [...children];\n  for (const child of children) {\n    parents.set(child, id);\n    res = [...res, ...extractDescendants(child, graph)];\n  }\n  return res;\n}, \"extractDescendants\");\nvar findCommonEdges = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((graph, id1, id2) => {\n  const edges1 = graph.edges().filter((edge) => edge.v === id1 || edge.w === id1);\n  const edges2 = graph.edges().filter((edge) => edge.v === id2 || edge.w === id2);\n  const edges1Prim = edges1.map((edge) => {\n    return { v: edge.v === id1 ? id2 : edge.v, w: edge.w === id1 ? id1 : edge.w };\n  });\n  const edges2Prim = edges2.map((edge) => {\n    return { v: edge.v, w: edge.w };\n  });\n  const result = edges1Prim.filter((edgeIn1) => {\n    return edges2Prim.some((edge) => edgeIn1.v === edge.v && edgeIn1.w === edge.w);\n  });\n  return result;\n}, \"findCommonEdges\");\nvar findNonClusterChild = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((id, graph, clusterId) => {\n  const children = graph.children(id);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.trace(\"Searching children of id \", id, children);\n  if (children.length < 1) {\n    return id;\n  }\n  let reserve;\n  for (const child of children) {\n    const _id = findNonClusterChild(child, graph, clusterId);\n    const commonEdges = findCommonEdges(graph, clusterId, _id);\n    if (_id) {\n      if (commonEdges.length > 0) {\n        reserve = _id;\n      } else {\n        return _id;\n      }\n    }\n  }\n  return reserve;\n}, \"findNonClusterChild\");\nvar getAnchorId = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((id) => {\n  if (!clusterDb.has(id)) {\n    return id;\n  }\n  if (!clusterDb.get(id).externalConnections) {\n    return id;\n  }\n  if (clusterDb.has(id)) {\n    return clusterDb.get(id).id;\n  }\n  return id;\n}, \"getAnchorId\");\nvar adjustClustersAndEdges = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((graph, depth) => {\n  if (!graph || depth > 10) {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Opting out, no graph \");\n    return;\n  } else {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Opting in, graph \");\n  }\n  graph.nodes().forEach(function(id) {\n    const children = graph.children(id);\n    if (children.length > 0) {\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\n        \"Cluster identified\",\n        id,\n        \" Replacement id in edges: \",\n        findNonClusterChild(id, graph, id)\n      );\n      descendants.set(id, extractDescendants(id, graph));\n      clusterDb.set(id, { id: findNonClusterChild(id, graph, id), clusterData: graph.node(id) });\n    }\n  });\n  graph.nodes().forEach(function(id) {\n    const children = graph.children(id);\n    const edges = graph.edges();\n    if (children.length > 0) {\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Cluster identified\", id, descendants);\n      edges.forEach((edge) => {\n        const d1 = isDescendant(edge.v, id);\n        const d2 = isDescendant(edge.w, id);\n        if (d1 ^ d2) {\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Edge: \", edge, \" leaves cluster \", id);\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Descendants of XXX \", id, \": \", descendants.get(id));\n          clusterDb.get(id).externalConnections = true;\n        }\n      });\n    } else {\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Not a cluster \", id, descendants);\n    }\n  });\n  for (let id of clusterDb.keys()) {\n    const nonClusterChild = clusterDb.get(id).id;\n    const parent = graph.parent(nonClusterChild);\n    if (parent !== id && clusterDb.has(parent) && !clusterDb.get(parent).externalConnections) {\n      clusterDb.get(id).id = parent;\n    }\n  }\n  graph.edges().forEach(function(e) {\n    const edge = graph.edge(e);\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(e));\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(graph.edge(e)));\n    let v = e.v;\n    let w = e.w;\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\n      \"Fix XXX\",\n      clusterDb,\n      \"ids:\",\n      e.v,\n      e.w,\n      \"Translating: \",\n      clusterDb.get(e.v),\n      \" --- \",\n      clusterDb.get(e.w)\n    );\n    if (clusterDb.get(e.v) || clusterDb.get(e.w)) {\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Fixing and trying - removing XXX\", e.v, e.w, e.name);\n      v = getAnchorId(e.v);\n      w = getAnchorId(e.w);\n      graph.removeEdge(e.v, e.w, e.name);\n      if (v !== e.v) {\n        const parent = graph.parent(v);\n        clusterDb.get(parent).externalConnections = true;\n        edge.fromCluster = e.v;\n      }\n      if (w !== e.w) {\n        const parent = graph.parent(w);\n        clusterDb.get(parent).externalConnections = true;\n        edge.toCluster = e.w;\n      }\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Fix Replacing with XXX\", v, w, e.name);\n      graph.setEdge(v, w, edge, e.name);\n    }\n  });\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Adjusted Graph\", dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(graph));\n  extractor(graph, 0);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.trace(clusterDb);\n}, \"adjustClustersAndEdges\");\nvar extractor = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((graph, depth) => {\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"extractor - \", depth, dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(graph), graph.children(\"D\"));\n  if (depth > 10) {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.error(\"Bailing out\");\n    return;\n  }\n  let nodes = graph.nodes();\n  let hasChildren = false;\n  for (const node of nodes) {\n    const children = graph.children(node);\n    hasChildren = hasChildren || children.length > 0;\n  }\n  if (!hasChildren) {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Done, no node has children\", graph.nodes());\n    return;\n  }\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Nodes = \", nodes, depth);\n  for (const node of nodes) {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\n      \"Extracting node\",\n      node,\n      clusterDb,\n      clusterDb.has(node) && !clusterDb.get(node).externalConnections,\n      !graph.parent(node),\n      graph.node(node),\n      graph.children(\"D\"),\n      \" Depth \",\n      depth\n    );\n    if (!clusterDb.has(node)) {\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Not a cluster\", node, depth);\n    } else if (!clusterDb.get(node).externalConnections && graph.children(node) && graph.children(node).length > 0) {\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\n        \"Cluster without external connections, without a parent and with children\",\n        node,\n        depth\n      );\n      const graphSettings = graph.graph();\n      let dir = graphSettings.rankdir === \"TB\" ? \"LR\" : \"TB\";\n      if (clusterDb.get(node)?.clusterData?.dir) {\n        dir = clusterDb.get(node).clusterData.dir;\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Fixing dir\", clusterDb.get(node).clusterData.dir, dir);\n      }\n      const clusterGraph = new dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_10__.Graph({\n        multigraph: true,\n        compound: true\n      }).setGraph({\n        rankdir: dir,\n        nodesep: 50,\n        ranksep: 50,\n        marginx: 8,\n        marginy: 8\n      }).setDefaultEdgeLabel(function() {\n        return {};\n      });\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Old graph before copy\", dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(graph));\n      copy(node, graph, clusterGraph, node);\n      graph.setNode(node, {\n        clusterNode: true,\n        id: node,\n        clusterData: clusterDb.get(node).clusterData,\n        label: clusterDb.get(node).label,\n        graph: clusterGraph\n      });\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"New graph after copy node: (\", node, \")\", dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(clusterGraph));\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Old graph after copy\", dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(graph));\n    } else {\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\n        \"Cluster ** \",\n        node,\n        \" **not meeting the criteria !externalConnections:\",\n        !clusterDb.get(node).externalConnections,\n        \" no parent: \",\n        !graph.parent(node),\n        \" children \",\n        graph.children(node) && graph.children(node).length > 0,\n        graph.children(\"D\"),\n        depth\n      );\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(clusterDb);\n    }\n  }\n  nodes = graph.nodes();\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"New list of nodes\", nodes);\n  for (const node of nodes) {\n    const data = graph.node(node);\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\" Now next level\", node, data);\n    if (data?.clusterNode) {\n      extractor(data.graph, depth + 1);\n    }\n  }\n}, \"extractor\");\nvar sorter = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((graph, nodes) => {\n  if (nodes.length === 0) {\n    return [];\n  }\n  let result = Object.assign([], nodes);\n  nodes.forEach((node) => {\n    const children = graph.children(node);\n    const sorted = sorter(graph, children);\n    result = [...result, ...sorted];\n  });\n  return result;\n}, \"sorter\");\nvar sortNodesByHierarchy = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)((graph) => sorter(graph, graph.children()), \"sortNodesByHierarchy\");\n\n// src/rendering-util/layout-algorithms/dagre/index.js\nvar recursiveRender = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)(async (_elem, graph, diagramType, id, parentCluster, siteConfig) => {\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Graph in recursive render:XAX\", dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(graph), parentCluster);\n  const dir = graph.graph().rankdir;\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.trace(\"Dir in recursive render - dir:\", dir);\n  const elem = _elem.insert(\"g\").attr(\"class\", \"root\");\n  if (!graph.nodes()) {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"No nodes found for\", graph);\n  } else {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Recursive render XXX\", graph.nodes());\n  }\n  if (graph.edges().length > 0) {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Recursive edges\", graph.edge(graph.edges()[0]));\n  }\n  const clusters = elem.insert(\"g\").attr(\"class\", \"clusters\");\n  const edgePaths = elem.insert(\"g\").attr(\"class\", \"edgePaths\");\n  const edgeLabels = elem.insert(\"g\").attr(\"class\", \"edgeLabels\");\n  const nodes = elem.insert(\"g\").attr(\"class\", \"nodes\");\n  await Promise.all(\n    graph.nodes().map(async function(v) {\n      const node = graph.node(v);\n      if (parentCluster !== void 0) {\n        const data = JSON.parse(JSON.stringify(parentCluster.clusterData));\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.trace(\n          \"Setting data for parent cluster XXX\\n Node.id = \",\n          v,\n          \"\\n data=\",\n          data.height,\n          \"\\nParent cluster\",\n          parentCluster.height\n        );\n        graph.setNode(parentCluster.id, data);\n        if (!graph.parent(v)) {\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.trace(\"Setting parent\", v, parentCluster.id);\n          graph.setParent(v, parentCluster.id, data);\n        }\n      }\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"(Insert) Node XXX\" + v + \": \" + JSON.stringify(graph.node(v)));\n      if (node?.clusterNode) {\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Cluster identified XBX\", v, node.width, graph.node(v));\n        const { ranksep, nodesep } = graph.graph();\n        node.graph.setGraph({\n          ...node.graph.graph(),\n          ranksep: ranksep + 25,\n          nodesep\n        });\n        const o = await recursiveRender(\n          nodes,\n          node.graph,\n          diagramType,\n          id,\n          graph.node(v),\n          siteConfig\n        );\n        const newEl = o.elem;\n        (0,_chunk_HRU6DDCH_mjs__WEBPACK_IMPORTED_MODULE_2__.updateNodeBounds)(node, newEl);\n        node.diff = o.diff || 0;\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\n          \"New compound node after recursive render XAX\",\n          v,\n          \"width\",\n          // node,\n          node.width,\n          \"height\",\n          node.height\n          // node.x,\n          // node.y\n        );\n        (0,_chunk_HRU6DDCH_mjs__WEBPACK_IMPORTED_MODULE_2__.setNodeElem)(newEl, node);\n      } else {\n        if (graph.children(v).length > 0) {\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.trace(\n            \"Cluster - the non recursive path XBX\",\n            v,\n            node.id,\n            node,\n            node.width,\n            \"Graph:\",\n            graph\n          );\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.trace(findNonClusterChild(node.id, graph));\n          clusterDb.set(node.id, { id: findNonClusterChild(node.id, graph), node });\n        } else {\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.trace(\"Node - the non recursive path XAX\", v, nodes, graph.node(v), dir);\n          await (0,_chunk_HRU6DDCH_mjs__WEBPACK_IMPORTED_MODULE_2__.insertNode)(nodes, graph.node(v), { config: siteConfig, dir });\n        }\n      }\n    })\n  );\n  const processEdges = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)(async () => {\n    const edgePromises = graph.edges().map(async function(e) {\n      const edge = graph.edge(e.v, e.w, e.name);\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(e));\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Edge \" + e.v + \" -> \" + e.w + \": \", e, \" \", JSON.stringify(graph.edge(e)));\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\n        \"Fix\",\n        clusterDb,\n        \"ids:\",\n        e.v,\n        e.w,\n        \"Translating: \",\n        clusterDb.get(e.v),\n        clusterDb.get(e.w)\n      );\n      await (0,_chunk_IIMUDSI4_mjs__WEBPACK_IMPORTED_MODULE_0__.insertEdgeLabel)(edgeLabels, edge);\n    });\n    await Promise.all(edgePromises);\n  }, \"processEdges\");\n  await processEdges();\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Graph before layout:\", JSON.stringify(dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(graph)));\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"############################################# XXX\");\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"###                Layout                 ### XXX\");\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"############################################# XXX\");\n  (0,dagre_d3_es_src_dagre_index_js__WEBPACK_IMPORTED_MODULE_8__.layout)(graph);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Graph after layout:\", JSON.stringify(dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(graph)));\n  let diff = 0;\n  let { subGraphTitleTotalMargin } = (0,_chunk_K557N5IZ_mjs__WEBPACK_IMPORTED_MODULE_3__.getSubGraphTitleMargins)(siteConfig);\n  await Promise.all(\n    sortNodesByHierarchy(graph).map(async function(v) {\n      const node = graph.node(v);\n      _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\n        \"Position XBX => \" + v + \": (\" + node.x,\n        \",\" + node.y,\n        \") width: \",\n        node.width,\n        \" height: \",\n        node.height\n      );\n      if (node?.clusterNode) {\n        node.y += subGraphTitleTotalMargin;\n        _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\n          \"A tainted cluster node XBX1\",\n          v,\n          node.id,\n          node.width,\n          node.height,\n          node.x,\n          node.y,\n          graph.parent(v)\n        );\n        clusterDb.get(node.id).node = node;\n        (0,_chunk_HRU6DDCH_mjs__WEBPACK_IMPORTED_MODULE_2__.positionNode)(node);\n      } else {\n        if (graph.children(v).length > 0) {\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\n            \"A pure cluster node XBX1\",\n            v,\n            node.id,\n            node.x,\n            node.y,\n            node.width,\n            node.height,\n            graph.parent(v)\n          );\n          node.height += subGraphTitleTotalMargin;\n          graph.node(node.parentId);\n          const halfPadding = node?.padding / 2 || 0;\n          const labelHeight = node?.labelBBox?.height || 0;\n          const offsetY = labelHeight - halfPadding || 0;\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"OffsetY\", offsetY, \"labelHeight\", labelHeight, \"halfPadding\", halfPadding);\n          await (0,_chunk_HRU6DDCH_mjs__WEBPACK_IMPORTED_MODULE_2__.insertCluster)(clusters, node);\n          clusterDb.get(node.id).node = node;\n        } else {\n          const parent = graph.node(node.parentId);\n          node.y += subGraphTitleTotalMargin / 2;\n          _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\n            \"A regular node XBX1 - using the padding\",\n            node.id,\n            \"parent\",\n            node.parentId,\n            node.width,\n            node.height,\n            node.x,\n            node.y,\n            \"offsetY\",\n            node.offsetY,\n            \"parent\",\n            parent,\n            parent?.offsetY,\n            node\n          );\n          (0,_chunk_HRU6DDCH_mjs__WEBPACK_IMPORTED_MODULE_2__.positionNode)(node);\n        }\n      }\n    })\n  );\n  graph.edges().forEach(function(e) {\n    const edge = graph.edge(e);\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(edge), edge);\n    edge.points.forEach((point) => point.y += subGraphTitleTotalMargin / 2);\n    const startNode = graph.node(e.v);\n    var endNode = graph.node(e.w);\n    const paths = (0,_chunk_IIMUDSI4_mjs__WEBPACK_IMPORTED_MODULE_0__.insertEdge)(edgePaths, edge, clusterDb, diagramType, startNode, endNode, id);\n    (0,_chunk_IIMUDSI4_mjs__WEBPACK_IMPORTED_MODULE_0__.positionEdgeLabel)(edge, paths);\n  });\n  graph.nodes().forEach(function(v) {\n    const n = graph.node(v);\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.info(v, n.type, n.diff);\n    if (n.isGroup) {\n      diff = n.diff;\n    }\n  });\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Returning from recursive render XAX\", elem, diff);\n  return { elem, diff };\n}, \"recursiveRender\");\nvar render = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.__name)(async (data4Layout, svg) => {\n  const graph = new dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_10__.Graph({\n    multigraph: true,\n    compound: true\n  }).setGraph({\n    rankdir: data4Layout.direction,\n    nodesep: data4Layout.config?.nodeSpacing || data4Layout.config?.flowchart?.nodeSpacing || data4Layout.nodeSpacing,\n    ranksep: data4Layout.config?.rankSpacing || data4Layout.config?.flowchart?.rankSpacing || data4Layout.rankSpacing,\n    marginx: 8,\n    marginy: 8\n  }).setDefaultEdgeLabel(function() {\n    return {};\n  });\n  const element = svg.select(\"g\");\n  (0,_chunk_IIMUDSI4_mjs__WEBPACK_IMPORTED_MODULE_0__.markers_default)(element, data4Layout.markers, data4Layout.type, data4Layout.diagramId);\n  (0,_chunk_HRU6DDCH_mjs__WEBPACK_IMPORTED_MODULE_2__.clear2)();\n  (0,_chunk_IIMUDSI4_mjs__WEBPACK_IMPORTED_MODULE_0__.clear)();\n  (0,_chunk_HRU6DDCH_mjs__WEBPACK_IMPORTED_MODULE_2__.clear)();\n  clear4();\n  data4Layout.nodes.forEach((node) => {\n    graph.setNode(node.id, { ...node });\n    if (node.parentId) {\n      graph.setParent(node.id, node.parentId);\n    }\n  });\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.debug(\"Edges:\", data4Layout.edges);\n  data4Layout.edges.forEach((edge) => {\n    if (edge.start === edge.end) {\n      const nodeId = edge.start;\n      const specialId1 = nodeId + \"---\" + nodeId + \"---1\";\n      const specialId2 = nodeId + \"---\" + nodeId + \"---2\";\n      const node = graph.node(nodeId);\n      graph.setNode(specialId1, {\n        domId: specialId1,\n        id: specialId1,\n        parentId: node.parentId,\n        labelStyle: \"\",\n        label: \"\",\n        padding: 0,\n        shape: \"labelRect\",\n        // shape: 'rect',\n        style: \"\",\n        width: 10,\n        height: 10\n      });\n      graph.setParent(specialId1, node.parentId);\n      graph.setNode(specialId2, {\n        domId: specialId2,\n        id: specialId2,\n        parentId: node.parentId,\n        labelStyle: \"\",\n        padding: 0,\n        // shape: 'rect',\n        shape: \"labelRect\",\n        label: \"\",\n        style: \"\",\n        width: 10,\n        height: 10\n      });\n      graph.setParent(specialId2, node.parentId);\n      const edge1 = structuredClone(edge);\n      const edgeMid = structuredClone(edge);\n      const edge2 = structuredClone(edge);\n      edge1.label = \"\";\n      edge1.arrowTypeEnd = \"none\";\n      edge1.id = nodeId + \"-cyclic-special-1\";\n      edgeMid.arrowTypeStart = \"none\";\n      edgeMid.arrowTypeEnd = \"none\";\n      edgeMid.id = nodeId + \"-cyclic-special-mid\";\n      edge2.label = \"\";\n      if (node.isGroup) {\n        edge1.fromCluster = nodeId;\n        edge2.toCluster = nodeId;\n      }\n      edge2.id = nodeId + \"-cyclic-special-2\";\n      edge2.arrowTypeStart = \"none\";\n      graph.setEdge(nodeId, specialId1, edge1, nodeId + \"-cyclic-special-0\");\n      graph.setEdge(specialId1, specialId2, edgeMid, nodeId + \"-cyclic-special-1\");\n      graph.setEdge(specialId2, nodeId, edge2, nodeId + \"-cyc<lic-special-2\");\n    } else {\n      graph.setEdge(edge.start, edge.end, { ...edge }, edge.id);\n    }\n  });\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Graph at first:\", JSON.stringify(dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(graph)));\n  adjustClustersAndEdges(graph);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.log.warn(\"Graph after XAX:\", JSON.stringify(dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_9__.write(graph)));\n  const siteConfig = (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_7__.getConfig2)();\n  await recursiveRender(\n    element,\n    graph,\n    data4Layout.type,\n    data4Layout.diagramId,\n    void 0,\n    siteConfig\n  );\n}, \"render\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NodW5rcy9tZXJtYWlkLmNvcmUvZGFncmUtT0tEUlpFQlcubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFTQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmJpdG1xLXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NodW5rcy9tZXJtYWlkLmNvcmUvZGFncmUtT0tEUlpFQlcubWpzPzk1MjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY2xlYXIgYXMgY2xlYXIyLFxuICBpbnNlcnRFZGdlLFxuICBpbnNlcnRFZGdlTGFiZWwsXG4gIG1hcmtlcnNfZGVmYXVsdCxcbiAgcG9zaXRpb25FZGdlTGFiZWxcbn0gZnJvbSBcIi4vY2h1bmstSUlNVURTSTQubWpzXCI7XG5pbXBvcnQgXCIuL2NodW5rLVZWM002N0lQLm1qc1wiO1xuaW1wb3J0IHtcbiAgY2xlYXIsXG4gIGNsZWFyMiBhcyBjbGVhcjMsXG4gIGluc2VydENsdXN0ZXIsXG4gIGluc2VydE5vZGUsXG4gIHBvc2l0aW9uTm9kZSxcbiAgc2V0Tm9kZUVsZW0sXG4gIHVwZGF0ZU5vZGVCb3VuZHNcbn0gZnJvbSBcIi4vY2h1bmstSFJVNkREQ0gubWpzXCI7XG5pbXBvcnQge1xuICBnZXRTdWJHcmFwaFRpdGxlTWFyZ2luc1xufSBmcm9tIFwiLi9jaHVuay1LNTU3TjVJWi5tanNcIjtcbmltcG9ydCBcIi4vY2h1bmstSDJEMkpRM0kubWpzXCI7XG5pbXBvcnQgXCIuL2NodW5rLUMzTVE1QU5NLm1qc1wiO1xuaW1wb3J0IFwiLi9jaHVuay1PNE5JNlVOVS5tanNcIjtcbmltcG9ydCB7XG4gIF9fbmFtZSxcbiAgZ2V0Q29uZmlnMiBhcyBnZXRDb25maWcsXG4gIGxvZ1xufSBmcm9tIFwiLi9jaHVuay1ZVEpOVDdEVS5tanNcIjtcblxuLy8gc3JjL3JlbmRlcmluZy11dGlsL2xheW91dC1hbGdvcml0aG1zL2RhZ3JlL2luZGV4LmpzXG5pbXBvcnQgeyBsYXlvdXQgYXMgZGFncmVMYXlvdXQgfSBmcm9tIFwiZGFncmUtZDMtZXMvc3JjL2RhZ3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgKiBhcyBncmFwaGxpYkpzb24yIGZyb20gXCJkYWdyZS1kMy1lcy9zcmMvZ3JhcGhsaWIvanNvbi5qc1wiO1xuaW1wb3J0ICogYXMgZ3JhcGhsaWIyIGZyb20gXCJkYWdyZS1kMy1lcy9zcmMvZ3JhcGhsaWIvaW5kZXguanNcIjtcblxuLy8gc3JjL3JlbmRlcmluZy11dGlsL2xheW91dC1hbGdvcml0aG1zL2RhZ3JlL21lcm1haWQtZ3JhcGhsaWIuanNcbmltcG9ydCAqIGFzIGdyYXBobGliIGZyb20gXCJkYWdyZS1kMy1lcy9zcmMvZ3JhcGhsaWIvaW5kZXguanNcIjtcbmltcG9ydCAqIGFzIGdyYXBobGliSnNvbiBmcm9tIFwiZGFncmUtZDMtZXMvc3JjL2dyYXBobGliL2pzb24uanNcIjtcbnZhciBjbHVzdGVyRGIgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xudmFyIGRlc2NlbmRhbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbnZhciBwYXJlbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbnZhciBjbGVhcjQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgZGVzY2VuZGFudHMuY2xlYXIoKTtcbiAgcGFyZW50cy5jbGVhcigpO1xuICBjbHVzdGVyRGIuY2xlYXIoKTtcbn0sIFwiY2xlYXJcIik7XG52YXIgaXNEZXNjZW5kYW50ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoaWQsIGFuY2VzdG9ySWQpID0+IHtcbiAgY29uc3QgYW5jZXN0b3JEZXNjZW5kYW50cyA9IGRlc2NlbmRhbnRzLmdldChhbmNlc3RvcklkKSB8fCBbXTtcbiAgbG9nLnRyYWNlKFwiSW4gaXNEZXNjZW5kYW50XCIsIGFuY2VzdG9ySWQsIFwiIFwiLCBpZCwgXCIgPSBcIiwgYW5jZXN0b3JEZXNjZW5kYW50cy5pbmNsdWRlcyhpZCkpO1xuICByZXR1cm4gYW5jZXN0b3JEZXNjZW5kYW50cy5pbmNsdWRlcyhpZCk7XG59LCBcImlzRGVzY2VuZGFudFwiKTtcbnZhciBlZGdlSW5DbHVzdGVyID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoZWRnZSwgY2x1c3RlcklkKSA9PiB7XG4gIGNvbnN0IGNsdXN0ZXJEZXNjZW5kYW50cyA9IGRlc2NlbmRhbnRzLmdldChjbHVzdGVySWQpIHx8IFtdO1xuICBsb2cuaW5mbyhcIkRlc2NlbmRhbnRzIG9mIFwiLCBjbHVzdGVySWQsIFwiIGlzIFwiLCBjbHVzdGVyRGVzY2VuZGFudHMpO1xuICBsb2cuaW5mbyhcIkVkZ2UgaXMgXCIsIGVkZ2UpO1xuICBpZiAoZWRnZS52ID09PSBjbHVzdGVySWQgfHwgZWRnZS53ID09PSBjbHVzdGVySWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCFjbHVzdGVyRGVzY2VuZGFudHMpIHtcbiAgICBsb2cuZGVidWcoXCJUaWx0LCBcIiwgY2x1c3RlcklkLCBcIixub3QgaW4gZGVzY2VuZGFudHNcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBjbHVzdGVyRGVzY2VuZGFudHMuaW5jbHVkZXMoZWRnZS52KSB8fCBpc0Rlc2NlbmRhbnQoZWRnZS52LCBjbHVzdGVySWQpIHx8IGlzRGVzY2VuZGFudChlZGdlLncsIGNsdXN0ZXJJZCkgfHwgY2x1c3RlckRlc2NlbmRhbnRzLmluY2x1ZGVzKGVkZ2Uudyk7XG59LCBcImVkZ2VJbkNsdXN0ZXJcIik7XG52YXIgY29weSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGNsdXN0ZXJJZCwgZ3JhcGgsIG5ld0dyYXBoLCByb290SWQpID0+IHtcbiAgbG9nLndhcm4oXG4gICAgXCJDb3B5aW5nIGNoaWxkcmVuIG9mIFwiLFxuICAgIGNsdXN0ZXJJZCxcbiAgICBcInJvb3RcIixcbiAgICByb290SWQsXG4gICAgXCJkYXRhXCIsXG4gICAgZ3JhcGgubm9kZShjbHVzdGVySWQpLFxuICAgIHJvb3RJZFxuICApO1xuICBjb25zdCBub2RlcyA9IGdyYXBoLmNoaWxkcmVuKGNsdXN0ZXJJZCkgfHwgW107XG4gIGlmIChjbHVzdGVySWQgIT09IHJvb3RJZCkge1xuICAgIG5vZGVzLnB1c2goY2x1c3RlcklkKTtcbiAgfVxuICBsb2cud2FybihcIkNvcHlpbmcgKG5vZGVzKSBjbHVzdGVySWRcIiwgY2x1c3RlcklkLCBcIm5vZGVzXCIsIG5vZGVzKTtcbiAgbm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgIGlmIChncmFwaC5jaGlsZHJlbihub2RlKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb3B5KG5vZGUsIGdyYXBoLCBuZXdHcmFwaCwgcm9vdElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF0YSA9IGdyYXBoLm5vZGUobm9kZSk7XG4gICAgICBsb2cuaW5mbyhcImNwIFwiLCBub2RlLCBcIiB0byBcIiwgcm9vdElkLCBcIiB3aXRoIHBhcmVudCBcIiwgY2x1c3RlcklkKTtcbiAgICAgIG5ld0dyYXBoLnNldE5vZGUobm9kZSwgZGF0YSk7XG4gICAgICBpZiAocm9vdElkICE9PSBncmFwaC5wYXJlbnQobm9kZSkpIHtcbiAgICAgICAgbG9nLndhcm4oXCJTZXR0aW5nIHBhcmVudFwiLCBub2RlLCBncmFwaC5wYXJlbnQobm9kZSkpO1xuICAgICAgICBuZXdHcmFwaC5zZXRQYXJlbnQobm9kZSwgZ3JhcGgucGFyZW50KG5vZGUpKTtcbiAgICAgIH1cbiAgICAgIGlmIChjbHVzdGVySWQgIT09IHJvb3RJZCAmJiBub2RlICE9PSBjbHVzdGVySWQpIHtcbiAgICAgICAgbG9nLmRlYnVnKFwiU2V0dGluZyBwYXJlbnRcIiwgbm9kZSwgY2x1c3RlcklkKTtcbiAgICAgICAgbmV3R3JhcGguc2V0UGFyZW50KG5vZGUsIGNsdXN0ZXJJZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2cuaW5mbyhcIkluIGNvcHkgXCIsIGNsdXN0ZXJJZCwgXCJyb290XCIsIHJvb3RJZCwgXCJkYXRhXCIsIGdyYXBoLm5vZGUoY2x1c3RlcklkKSwgcm9vdElkKTtcbiAgICAgICAgbG9nLmRlYnVnKFxuICAgICAgICAgIFwiTm90IFNldHRpbmcgcGFyZW50IGZvciBub2RlPVwiLFxuICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgXCJjbHVzdGVyIT09cm9vdElkXCIsXG4gICAgICAgICAgY2x1c3RlcklkICE9PSByb290SWQsXG4gICAgICAgICAgXCJub2RlIT09Y2x1c3RlcklkXCIsXG4gICAgICAgICAgbm9kZSAhPT0gY2x1c3RlcklkXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBlZGdlcyA9IGdyYXBoLmVkZ2VzKG5vZGUpO1xuICAgICAgbG9nLmRlYnVnKFwiQ29weWluZyBFZGdlc1wiLCBlZGdlcyk7XG4gICAgICBlZGdlcy5mb3JFYWNoKChlZGdlKSA9PiB7XG4gICAgICAgIGxvZy5pbmZvKFwiRWRnZVwiLCBlZGdlKTtcbiAgICAgICAgY29uc3QgZGF0YTIgPSBncmFwaC5lZGdlKGVkZ2UudiwgZWRnZS53LCBlZGdlLm5hbWUpO1xuICAgICAgICBsb2cuaW5mbyhcIkVkZ2UgZGF0YVwiLCBkYXRhMiwgcm9vdElkKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoZWRnZUluQ2x1c3RlcihlZGdlLCByb290SWQpKSB7XG4gICAgICAgICAgICBsb2cuaW5mbyhcIkNvcHlpbmcgYXMgXCIsIGVkZ2UudiwgZWRnZS53LCBkYXRhMiwgZWRnZS5uYW1lKTtcbiAgICAgICAgICAgIG5ld0dyYXBoLnNldEVkZ2UoZWRnZS52LCBlZGdlLncsIGRhdGEyLCBlZGdlLm5hbWUpO1xuICAgICAgICAgICAgbG9nLmluZm8oXCJuZXdHcmFwaCBlZGdlcyBcIiwgbmV3R3JhcGguZWRnZXMoKSwgbmV3R3JhcGguZWRnZShuZXdHcmFwaC5lZGdlcygpWzBdKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZy5pbmZvKFxuICAgICAgICAgICAgICBcIlNraXBwaW5nIGNvcHkgb2YgZWRnZSBcIixcbiAgICAgICAgICAgICAgZWRnZS52LFxuICAgICAgICAgICAgICBcIi0tPlwiLFxuICAgICAgICAgICAgICBlZGdlLncsXG4gICAgICAgICAgICAgIFwiIHJvb3RJZDogXCIsXG4gICAgICAgICAgICAgIHJvb3RJZCxcbiAgICAgICAgICAgICAgXCIgY2x1c3RlcklkOlwiLFxuICAgICAgICAgICAgICBjbHVzdGVySWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbG9nLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgbG9nLmRlYnVnKFwiUmVtb3Zpbmcgbm9kZVwiLCBub2RlKTtcbiAgICBncmFwaC5yZW1vdmVOb2RlKG5vZGUpO1xuICB9KTtcbn0sIFwiY29weVwiKTtcbnZhciBleHRyYWN0RGVzY2VuZGFudHMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChpZCwgZ3JhcGgpID0+IHtcbiAgY29uc3QgY2hpbGRyZW4gPSBncmFwaC5jaGlsZHJlbihpZCk7XG4gIGxldCByZXMgPSBbLi4uY2hpbGRyZW5dO1xuICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgcGFyZW50cy5zZXQoY2hpbGQsIGlkKTtcbiAgICByZXMgPSBbLi4ucmVzLCAuLi5leHRyYWN0RGVzY2VuZGFudHMoY2hpbGQsIGdyYXBoKV07XG4gIH1cbiAgcmV0dXJuIHJlcztcbn0sIFwiZXh0cmFjdERlc2NlbmRhbnRzXCIpO1xudmFyIGZpbmRDb21tb25FZGdlcyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGdyYXBoLCBpZDEsIGlkMikgPT4ge1xuICBjb25zdCBlZGdlczEgPSBncmFwaC5lZGdlcygpLmZpbHRlcigoZWRnZSkgPT4gZWRnZS52ID09PSBpZDEgfHwgZWRnZS53ID09PSBpZDEpO1xuICBjb25zdCBlZGdlczIgPSBncmFwaC5lZGdlcygpLmZpbHRlcigoZWRnZSkgPT4gZWRnZS52ID09PSBpZDIgfHwgZWRnZS53ID09PSBpZDIpO1xuICBjb25zdCBlZGdlczFQcmltID0gZWRnZXMxLm1hcCgoZWRnZSkgPT4ge1xuICAgIHJldHVybiB7IHY6IGVkZ2UudiA9PT0gaWQxID8gaWQyIDogZWRnZS52LCB3OiBlZGdlLncgPT09IGlkMSA/IGlkMSA6IGVkZ2UudyB9O1xuICB9KTtcbiAgY29uc3QgZWRnZXMyUHJpbSA9IGVkZ2VzMi5tYXAoKGVkZ2UpID0+IHtcbiAgICByZXR1cm4geyB2OiBlZGdlLnYsIHc6IGVkZ2UudyB9O1xuICB9KTtcbiAgY29uc3QgcmVzdWx0ID0gZWRnZXMxUHJpbS5maWx0ZXIoKGVkZ2VJbjEpID0+IHtcbiAgICByZXR1cm4gZWRnZXMyUHJpbS5zb21lKChlZGdlKSA9PiBlZGdlSW4xLnYgPT09IGVkZ2UudiAmJiBlZGdlSW4xLncgPT09IGVkZ2Uudyk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufSwgXCJmaW5kQ29tbW9uRWRnZXNcIik7XG52YXIgZmluZE5vbkNsdXN0ZXJDaGlsZCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGlkLCBncmFwaCwgY2x1c3RlcklkKSA9PiB7XG4gIGNvbnN0IGNoaWxkcmVuID0gZ3JhcGguY2hpbGRyZW4oaWQpO1xuICBsb2cudHJhY2UoXCJTZWFyY2hpbmcgY2hpbGRyZW4gb2YgaWQgXCIsIGlkLCBjaGlsZHJlbik7XG4gIGlmIChjaGlsZHJlbi5sZW5ndGggPCAxKSB7XG4gICAgcmV0dXJuIGlkO1xuICB9XG4gIGxldCByZXNlcnZlO1xuICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgY29uc3QgX2lkID0gZmluZE5vbkNsdXN0ZXJDaGlsZChjaGlsZCwgZ3JhcGgsIGNsdXN0ZXJJZCk7XG4gICAgY29uc3QgY29tbW9uRWRnZXMgPSBmaW5kQ29tbW9uRWRnZXMoZ3JhcGgsIGNsdXN0ZXJJZCwgX2lkKTtcbiAgICBpZiAoX2lkKSB7XG4gICAgICBpZiAoY29tbW9uRWRnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXNlcnZlID0gX2lkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIF9pZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc2VydmU7XG59LCBcImZpbmROb25DbHVzdGVyQ2hpbGRcIik7XG52YXIgZ2V0QW5jaG9ySWQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChpZCkgPT4ge1xuICBpZiAoIWNsdXN0ZXJEYi5oYXMoaWQpKSB7XG4gICAgcmV0dXJuIGlkO1xuICB9XG4gIGlmICghY2x1c3RlckRiLmdldChpZCkuZXh0ZXJuYWxDb25uZWN0aW9ucykge1xuICAgIHJldHVybiBpZDtcbiAgfVxuICBpZiAoY2x1c3RlckRiLmhhcyhpZCkpIHtcbiAgICByZXR1cm4gY2x1c3RlckRiLmdldChpZCkuaWQ7XG4gIH1cbiAgcmV0dXJuIGlkO1xufSwgXCJnZXRBbmNob3JJZFwiKTtcbnZhciBhZGp1c3RDbHVzdGVyc0FuZEVkZ2VzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoZ3JhcGgsIGRlcHRoKSA9PiB7XG4gIGlmICghZ3JhcGggfHwgZGVwdGggPiAxMCkge1xuICAgIGxvZy5kZWJ1ZyhcIk9wdGluZyBvdXQsIG5vIGdyYXBoIFwiKTtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgbG9nLmRlYnVnKFwiT3B0aW5nIGluLCBncmFwaCBcIik7XG4gIH1cbiAgZ3JhcGgubm9kZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBncmFwaC5jaGlsZHJlbihpZCk7XG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgIGxvZy53YXJuKFxuICAgICAgICBcIkNsdXN0ZXIgaWRlbnRpZmllZFwiLFxuICAgICAgICBpZCxcbiAgICAgICAgXCIgUmVwbGFjZW1lbnQgaWQgaW4gZWRnZXM6IFwiLFxuICAgICAgICBmaW5kTm9uQ2x1c3RlckNoaWxkKGlkLCBncmFwaCwgaWQpXG4gICAgICApO1xuICAgICAgZGVzY2VuZGFudHMuc2V0KGlkLCBleHRyYWN0RGVzY2VuZGFudHMoaWQsIGdyYXBoKSk7XG4gICAgICBjbHVzdGVyRGIuc2V0KGlkLCB7IGlkOiBmaW5kTm9uQ2x1c3RlckNoaWxkKGlkLCBncmFwaCwgaWQpLCBjbHVzdGVyRGF0YTogZ3JhcGgubm9kZShpZCkgfSk7XG4gICAgfVxuICB9KTtcbiAgZ3JhcGgubm9kZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBncmFwaC5jaGlsZHJlbihpZCk7XG4gICAgY29uc3QgZWRnZXMgPSBncmFwaC5lZGdlcygpO1xuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICBsb2cuZGVidWcoXCJDbHVzdGVyIGlkZW50aWZpZWRcIiwgaWQsIGRlc2NlbmRhbnRzKTtcbiAgICAgIGVkZ2VzLmZvckVhY2goKGVkZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZDEgPSBpc0Rlc2NlbmRhbnQoZWRnZS52LCBpZCk7XG4gICAgICAgIGNvbnN0IGQyID0gaXNEZXNjZW5kYW50KGVkZ2UudywgaWQpO1xuICAgICAgICBpZiAoZDEgXiBkMikge1xuICAgICAgICAgIGxvZy53YXJuKFwiRWRnZTogXCIsIGVkZ2UsIFwiIGxlYXZlcyBjbHVzdGVyIFwiLCBpZCk7XG4gICAgICAgICAgbG9nLndhcm4oXCJEZXNjZW5kYW50cyBvZiBYWFggXCIsIGlkLCBcIjogXCIsIGRlc2NlbmRhbnRzLmdldChpZCkpO1xuICAgICAgICAgIGNsdXN0ZXJEYi5nZXQoaWQpLmV4dGVybmFsQ29ubmVjdGlvbnMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nLmRlYnVnKFwiTm90IGEgY2x1c3RlciBcIiwgaWQsIGRlc2NlbmRhbnRzKTtcbiAgICB9XG4gIH0pO1xuICBmb3IgKGxldCBpZCBvZiBjbHVzdGVyRGIua2V5cygpKSB7XG4gICAgY29uc3Qgbm9uQ2x1c3RlckNoaWxkID0gY2x1c3RlckRiLmdldChpZCkuaWQ7XG4gICAgY29uc3QgcGFyZW50ID0gZ3JhcGgucGFyZW50KG5vbkNsdXN0ZXJDaGlsZCk7XG4gICAgaWYgKHBhcmVudCAhPT0gaWQgJiYgY2x1c3RlckRiLmhhcyhwYXJlbnQpICYmICFjbHVzdGVyRGIuZ2V0KHBhcmVudCkuZXh0ZXJuYWxDb25uZWN0aW9ucykge1xuICAgICAgY2x1c3RlckRiLmdldChpZCkuaWQgPSBwYXJlbnQ7XG4gICAgfVxuICB9XG4gIGdyYXBoLmVkZ2VzKCkuZm9yRWFjaChmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgZWRnZSA9IGdyYXBoLmVkZ2UoZSk7XG4gICAgbG9nLndhcm4oXCJFZGdlIFwiICsgZS52ICsgXCIgLT4gXCIgKyBlLncgKyBcIjogXCIgKyBKU09OLnN0cmluZ2lmeShlKSk7XG4gICAgbG9nLndhcm4oXCJFZGdlIFwiICsgZS52ICsgXCIgLT4gXCIgKyBlLncgKyBcIjogXCIgKyBKU09OLnN0cmluZ2lmeShncmFwaC5lZGdlKGUpKSk7XG4gICAgbGV0IHYgPSBlLnY7XG4gICAgbGV0IHcgPSBlLnc7XG4gICAgbG9nLndhcm4oXG4gICAgICBcIkZpeCBYWFhcIixcbiAgICAgIGNsdXN0ZXJEYixcbiAgICAgIFwiaWRzOlwiLFxuICAgICAgZS52LFxuICAgICAgZS53LFxuICAgICAgXCJUcmFuc2xhdGluZzogXCIsXG4gICAgICBjbHVzdGVyRGIuZ2V0KGUudiksXG4gICAgICBcIiAtLS0gXCIsXG4gICAgICBjbHVzdGVyRGIuZ2V0KGUudylcbiAgICApO1xuICAgIGlmIChjbHVzdGVyRGIuZ2V0KGUudikgfHwgY2x1c3RlckRiLmdldChlLncpKSB7XG4gICAgICBsb2cud2FybihcIkZpeGluZyBhbmQgdHJ5aW5nIC0gcmVtb3ZpbmcgWFhYXCIsIGUudiwgZS53LCBlLm5hbWUpO1xuICAgICAgdiA9IGdldEFuY2hvcklkKGUudik7XG4gICAgICB3ID0gZ2V0QW5jaG9ySWQoZS53KTtcbiAgICAgIGdyYXBoLnJlbW92ZUVkZ2UoZS52LCBlLncsIGUubmFtZSk7XG4gICAgICBpZiAodiAhPT0gZS52KSB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGdyYXBoLnBhcmVudCh2KTtcbiAgICAgICAgY2x1c3RlckRiLmdldChwYXJlbnQpLmV4dGVybmFsQ29ubmVjdGlvbnMgPSB0cnVlO1xuICAgICAgICBlZGdlLmZyb21DbHVzdGVyID0gZS52O1xuICAgICAgfVxuICAgICAgaWYgKHcgIT09IGUudykge1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBncmFwaC5wYXJlbnQodyk7XG4gICAgICAgIGNsdXN0ZXJEYi5nZXQocGFyZW50KS5leHRlcm5hbENvbm5lY3Rpb25zID0gdHJ1ZTtcbiAgICAgICAgZWRnZS50b0NsdXN0ZXIgPSBlLnc7XG4gICAgICB9XG4gICAgICBsb2cud2FybihcIkZpeCBSZXBsYWNpbmcgd2l0aCBYWFhcIiwgdiwgdywgZS5uYW1lKTtcbiAgICAgIGdyYXBoLnNldEVkZ2UodiwgdywgZWRnZSwgZS5uYW1lKTtcbiAgICB9XG4gIH0pO1xuICBsb2cud2FybihcIkFkanVzdGVkIEdyYXBoXCIsIGdyYXBobGliSnNvbi53cml0ZShncmFwaCkpO1xuICBleHRyYWN0b3IoZ3JhcGgsIDApO1xuICBsb2cudHJhY2UoY2x1c3RlckRiKTtcbn0sIFwiYWRqdXN0Q2x1c3RlcnNBbmRFZGdlc1wiKTtcbnZhciBleHRyYWN0b3IgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChncmFwaCwgZGVwdGgpID0+IHtcbiAgbG9nLndhcm4oXCJleHRyYWN0b3IgLSBcIiwgZGVwdGgsIGdyYXBobGliSnNvbi53cml0ZShncmFwaCksIGdyYXBoLmNoaWxkcmVuKFwiRFwiKSk7XG4gIGlmIChkZXB0aCA+IDEwKSB7XG4gICAgbG9nLmVycm9yKFwiQmFpbGluZyBvdXRcIik7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBub2RlcyA9IGdyYXBoLm5vZGVzKCk7XG4gIGxldCBoYXNDaGlsZHJlbiA9IGZhbHNlO1xuICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IGdyYXBoLmNoaWxkcmVuKG5vZGUpO1xuICAgIGhhc0NoaWxkcmVuID0gaGFzQ2hpbGRyZW4gfHwgY2hpbGRyZW4ubGVuZ3RoID4gMDtcbiAgfVxuICBpZiAoIWhhc0NoaWxkcmVuKSB7XG4gICAgbG9nLmRlYnVnKFwiRG9uZSwgbm8gbm9kZSBoYXMgY2hpbGRyZW5cIiwgZ3JhcGgubm9kZXMoKSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxvZy5kZWJ1ZyhcIk5vZGVzID0gXCIsIG5vZGVzLCBkZXB0aCk7XG4gIGZvciAoY29uc3Qgbm9kZSBvZiBub2Rlcykge1xuICAgIGxvZy5kZWJ1ZyhcbiAgICAgIFwiRXh0cmFjdGluZyBub2RlXCIsXG4gICAgICBub2RlLFxuICAgICAgY2x1c3RlckRiLFxuICAgICAgY2x1c3RlckRiLmhhcyhub2RlKSAmJiAhY2x1c3RlckRiLmdldChub2RlKS5leHRlcm5hbENvbm5lY3Rpb25zLFxuICAgICAgIWdyYXBoLnBhcmVudChub2RlKSxcbiAgICAgIGdyYXBoLm5vZGUobm9kZSksXG4gICAgICBncmFwaC5jaGlsZHJlbihcIkRcIiksXG4gICAgICBcIiBEZXB0aCBcIixcbiAgICAgIGRlcHRoXG4gICAgKTtcbiAgICBpZiAoIWNsdXN0ZXJEYi5oYXMobm9kZSkpIHtcbiAgICAgIGxvZy5kZWJ1ZyhcIk5vdCBhIGNsdXN0ZXJcIiwgbm9kZSwgZGVwdGgpO1xuICAgIH0gZWxzZSBpZiAoIWNsdXN0ZXJEYi5nZXQobm9kZSkuZXh0ZXJuYWxDb25uZWN0aW9ucyAmJiBncmFwaC5jaGlsZHJlbihub2RlKSAmJiBncmFwaC5jaGlsZHJlbihub2RlKS5sZW5ndGggPiAwKSB7XG4gICAgICBsb2cud2FybihcbiAgICAgICAgXCJDbHVzdGVyIHdpdGhvdXQgZXh0ZXJuYWwgY29ubmVjdGlvbnMsIHdpdGhvdXQgYSBwYXJlbnQgYW5kIHdpdGggY2hpbGRyZW5cIixcbiAgICAgICAgbm9kZSxcbiAgICAgICAgZGVwdGhcbiAgICAgICk7XG4gICAgICBjb25zdCBncmFwaFNldHRpbmdzID0gZ3JhcGguZ3JhcGgoKTtcbiAgICAgIGxldCBkaXIgPSBncmFwaFNldHRpbmdzLnJhbmtkaXIgPT09IFwiVEJcIiA/IFwiTFJcIiA6IFwiVEJcIjtcbiAgICAgIGlmIChjbHVzdGVyRGIuZ2V0KG5vZGUpPy5jbHVzdGVyRGF0YT8uZGlyKSB7XG4gICAgICAgIGRpciA9IGNsdXN0ZXJEYi5nZXQobm9kZSkuY2x1c3RlckRhdGEuZGlyO1xuICAgICAgICBsb2cud2FybihcIkZpeGluZyBkaXJcIiwgY2x1c3RlckRiLmdldChub2RlKS5jbHVzdGVyRGF0YS5kaXIsIGRpcik7XG4gICAgICB9XG4gICAgICBjb25zdCBjbHVzdGVyR3JhcGggPSBuZXcgZ3JhcGhsaWIuR3JhcGgoe1xuICAgICAgICBtdWx0aWdyYXBoOiB0cnVlLFxuICAgICAgICBjb21wb3VuZDogdHJ1ZVxuICAgICAgfSkuc2V0R3JhcGgoe1xuICAgICAgICByYW5rZGlyOiBkaXIsXG4gICAgICAgIG5vZGVzZXA6IDUwLFxuICAgICAgICByYW5rc2VwOiA1MCxcbiAgICAgICAgbWFyZ2lueDogOCxcbiAgICAgICAgbWFyZ2lueTogOFxuICAgICAgfSkuc2V0RGVmYXVsdEVkZ2VMYWJlbChmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfSk7XG4gICAgICBsb2cud2FybihcIk9sZCBncmFwaCBiZWZvcmUgY29weVwiLCBncmFwaGxpYkpzb24ud3JpdGUoZ3JhcGgpKTtcbiAgICAgIGNvcHkobm9kZSwgZ3JhcGgsIGNsdXN0ZXJHcmFwaCwgbm9kZSk7XG4gICAgICBncmFwaC5zZXROb2RlKG5vZGUsIHtcbiAgICAgICAgY2x1c3Rlck5vZGU6IHRydWUsXG4gICAgICAgIGlkOiBub2RlLFxuICAgICAgICBjbHVzdGVyRGF0YTogY2x1c3RlckRiLmdldChub2RlKS5jbHVzdGVyRGF0YSxcbiAgICAgICAgbGFiZWw6IGNsdXN0ZXJEYi5nZXQobm9kZSkubGFiZWwsXG4gICAgICAgIGdyYXBoOiBjbHVzdGVyR3JhcGhcbiAgICAgIH0pO1xuICAgICAgbG9nLndhcm4oXCJOZXcgZ3JhcGggYWZ0ZXIgY29weSBub2RlOiAoXCIsIG5vZGUsIFwiKVwiLCBncmFwaGxpYkpzb24ud3JpdGUoY2x1c3RlckdyYXBoKSk7XG4gICAgICBsb2cuZGVidWcoXCJPbGQgZ3JhcGggYWZ0ZXIgY29weVwiLCBncmFwaGxpYkpzb24ud3JpdGUoZ3JhcGgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nLndhcm4oXG4gICAgICAgIFwiQ2x1c3RlciAqKiBcIixcbiAgICAgICAgbm9kZSxcbiAgICAgICAgXCIgKipub3QgbWVldGluZyB0aGUgY3JpdGVyaWEgIWV4dGVybmFsQ29ubmVjdGlvbnM6XCIsXG4gICAgICAgICFjbHVzdGVyRGIuZ2V0KG5vZGUpLmV4dGVybmFsQ29ubmVjdGlvbnMsXG4gICAgICAgIFwiIG5vIHBhcmVudDogXCIsXG4gICAgICAgICFncmFwaC5wYXJlbnQobm9kZSksXG4gICAgICAgIFwiIGNoaWxkcmVuIFwiLFxuICAgICAgICBncmFwaC5jaGlsZHJlbihub2RlKSAmJiBncmFwaC5jaGlsZHJlbihub2RlKS5sZW5ndGggPiAwLFxuICAgICAgICBncmFwaC5jaGlsZHJlbihcIkRcIiksXG4gICAgICAgIGRlcHRoXG4gICAgICApO1xuICAgICAgbG9nLmRlYnVnKGNsdXN0ZXJEYik7XG4gICAgfVxuICB9XG4gIG5vZGVzID0gZ3JhcGgubm9kZXMoKTtcbiAgbG9nLndhcm4oXCJOZXcgbGlzdCBvZiBub2Rlc1wiLCBub2Rlcyk7XG4gIGZvciAoY29uc3Qgbm9kZSBvZiBub2Rlcykge1xuICAgIGNvbnN0IGRhdGEgPSBncmFwaC5ub2RlKG5vZGUpO1xuICAgIGxvZy53YXJuKFwiIE5vdyBuZXh0IGxldmVsXCIsIG5vZGUsIGRhdGEpO1xuICAgIGlmIChkYXRhPy5jbHVzdGVyTm9kZSkge1xuICAgICAgZXh0cmFjdG9yKGRhdGEuZ3JhcGgsIGRlcHRoICsgMSk7XG4gICAgfVxuICB9XG59LCBcImV4dHJhY3RvclwiKTtcbnZhciBzb3J0ZXIgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChncmFwaCwgbm9kZXMpID0+IHtcbiAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBsZXQgcmVzdWx0ID0gT2JqZWN0LmFzc2lnbihbXSwgbm9kZXMpO1xuICBub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBncmFwaC5jaGlsZHJlbihub2RlKTtcbiAgICBjb25zdCBzb3J0ZWQgPSBzb3J0ZXIoZ3JhcGgsIGNoaWxkcmVuKTtcbiAgICByZXN1bHQgPSBbLi4ucmVzdWx0LCAuLi5zb3J0ZWRdO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn0sIFwic29ydGVyXCIpO1xudmFyIHNvcnROb2Rlc0J5SGllcmFyY2h5ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoZ3JhcGgpID0+IHNvcnRlcihncmFwaCwgZ3JhcGguY2hpbGRyZW4oKSksIFwic29ydE5vZGVzQnlIaWVyYXJjaHlcIik7XG5cbi8vIHNyYy9yZW5kZXJpbmctdXRpbC9sYXlvdXQtYWxnb3JpdGhtcy9kYWdyZS9pbmRleC5qc1xudmFyIHJlY3Vyc2l2ZVJlbmRlciA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoYXN5bmMgKF9lbGVtLCBncmFwaCwgZGlhZ3JhbVR5cGUsIGlkLCBwYXJlbnRDbHVzdGVyLCBzaXRlQ29uZmlnKSA9PiB7XG4gIGxvZy53YXJuKFwiR3JhcGggaW4gcmVjdXJzaXZlIHJlbmRlcjpYQVhcIiwgZ3JhcGhsaWJKc29uMi53cml0ZShncmFwaCksIHBhcmVudENsdXN0ZXIpO1xuICBjb25zdCBkaXIgPSBncmFwaC5ncmFwaCgpLnJhbmtkaXI7XG4gIGxvZy50cmFjZShcIkRpciBpbiByZWN1cnNpdmUgcmVuZGVyIC0gZGlyOlwiLCBkaXIpO1xuICBjb25zdCBlbGVtID0gX2VsZW0uaW5zZXJ0KFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJyb290XCIpO1xuICBpZiAoIWdyYXBoLm5vZGVzKCkpIHtcbiAgICBsb2cuaW5mbyhcIk5vIG5vZGVzIGZvdW5kIGZvclwiLCBncmFwaCk7XG4gIH0gZWxzZSB7XG4gICAgbG9nLmluZm8oXCJSZWN1cnNpdmUgcmVuZGVyIFhYWFwiLCBncmFwaC5ub2RlcygpKTtcbiAgfVxuICBpZiAoZ3JhcGguZWRnZXMoKS5sZW5ndGggPiAwKSB7XG4gICAgbG9nLmluZm8oXCJSZWN1cnNpdmUgZWRnZXNcIiwgZ3JhcGguZWRnZShncmFwaC5lZGdlcygpWzBdKSk7XG4gIH1cbiAgY29uc3QgY2x1c3RlcnMgPSBlbGVtLmluc2VydChcImdcIikuYXR0cihcImNsYXNzXCIsIFwiY2x1c3RlcnNcIik7XG4gIGNvbnN0IGVkZ2VQYXRocyA9IGVsZW0uaW5zZXJ0KFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJlZGdlUGF0aHNcIik7XG4gIGNvbnN0IGVkZ2VMYWJlbHMgPSBlbGVtLmluc2VydChcImdcIikuYXR0cihcImNsYXNzXCIsIFwiZWRnZUxhYmVsc1wiKTtcbiAgY29uc3Qgbm9kZXMgPSBlbGVtLmluc2VydChcImdcIikuYXR0cihcImNsYXNzXCIsIFwibm9kZXNcIik7XG4gIGF3YWl0IFByb21pc2UuYWxsKFxuICAgIGdyYXBoLm5vZGVzKCkubWFwKGFzeW5jIGZ1bmN0aW9uKHYpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBncmFwaC5ub2RlKHYpO1xuICAgICAgaWYgKHBhcmVudENsdXN0ZXIgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJlbnRDbHVzdGVyLmNsdXN0ZXJEYXRhKSk7XG4gICAgICAgIGxvZy50cmFjZShcbiAgICAgICAgICBcIlNldHRpbmcgZGF0YSBmb3IgcGFyZW50IGNsdXN0ZXIgWFhYXFxuIE5vZGUuaWQgPSBcIixcbiAgICAgICAgICB2LFxuICAgICAgICAgIFwiXFxuIGRhdGE9XCIsXG4gICAgICAgICAgZGF0YS5oZWlnaHQsXG4gICAgICAgICAgXCJcXG5QYXJlbnQgY2x1c3RlclwiLFxuICAgICAgICAgIHBhcmVudENsdXN0ZXIuaGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIGdyYXBoLnNldE5vZGUocGFyZW50Q2x1c3Rlci5pZCwgZGF0YSk7XG4gICAgICAgIGlmICghZ3JhcGgucGFyZW50KHYpKSB7XG4gICAgICAgICAgbG9nLnRyYWNlKFwiU2V0dGluZyBwYXJlbnRcIiwgdiwgcGFyZW50Q2x1c3Rlci5pZCk7XG4gICAgICAgICAgZ3JhcGguc2V0UGFyZW50KHYsIHBhcmVudENsdXN0ZXIuaWQsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsb2cuaW5mbyhcIihJbnNlcnQpIE5vZGUgWFhYXCIgKyB2ICsgXCI6IFwiICsgSlNPTi5zdHJpbmdpZnkoZ3JhcGgubm9kZSh2KSkpO1xuICAgICAgaWYgKG5vZGU/LmNsdXN0ZXJOb2RlKSB7XG4gICAgICAgIGxvZy5pbmZvKFwiQ2x1c3RlciBpZGVudGlmaWVkIFhCWFwiLCB2LCBub2RlLndpZHRoLCBncmFwaC5ub2RlKHYpKTtcbiAgICAgICAgY29uc3QgeyByYW5rc2VwLCBub2Rlc2VwIH0gPSBncmFwaC5ncmFwaCgpO1xuICAgICAgICBub2RlLmdyYXBoLnNldEdyYXBoKHtcbiAgICAgICAgICAuLi5ub2RlLmdyYXBoLmdyYXBoKCksXG4gICAgICAgICAgcmFua3NlcDogcmFua3NlcCArIDI1LFxuICAgICAgICAgIG5vZGVzZXBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG8gPSBhd2FpdCByZWN1cnNpdmVSZW5kZXIoXG4gICAgICAgICAgbm9kZXMsXG4gICAgICAgICAgbm9kZS5ncmFwaCxcbiAgICAgICAgICBkaWFncmFtVHlwZSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBncmFwaC5ub2RlKHYpLFxuICAgICAgICAgIHNpdGVDb25maWdcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbmV3RWwgPSBvLmVsZW07XG4gICAgICAgIHVwZGF0ZU5vZGVCb3VuZHMobm9kZSwgbmV3RWwpO1xuICAgICAgICBub2RlLmRpZmYgPSBvLmRpZmYgfHwgMDtcbiAgICAgICAgbG9nLmluZm8oXG4gICAgICAgICAgXCJOZXcgY29tcG91bmQgbm9kZSBhZnRlciByZWN1cnNpdmUgcmVuZGVyIFhBWFwiLFxuICAgICAgICAgIHYsXG4gICAgICAgICAgXCJ3aWR0aFwiLFxuICAgICAgICAgIC8vIG5vZGUsXG4gICAgICAgICAgbm9kZS53aWR0aCxcbiAgICAgICAgICBcImhlaWdodFwiLFxuICAgICAgICAgIG5vZGUuaGVpZ2h0XG4gICAgICAgICAgLy8gbm9kZS54LFxuICAgICAgICAgIC8vIG5vZGUueVxuICAgICAgICApO1xuICAgICAgICBzZXROb2RlRWxlbShuZXdFbCwgbm9kZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZ3JhcGguY2hpbGRyZW4odikubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxvZy50cmFjZShcbiAgICAgICAgICAgIFwiQ2x1c3RlciAtIHRoZSBub24gcmVjdXJzaXZlIHBhdGggWEJYXCIsXG4gICAgICAgICAgICB2LFxuICAgICAgICAgICAgbm9kZS5pZCxcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICBub2RlLndpZHRoLFxuICAgICAgICAgICAgXCJHcmFwaDpcIixcbiAgICAgICAgICAgIGdyYXBoXG4gICAgICAgICAgKTtcbiAgICAgICAgICBsb2cudHJhY2UoZmluZE5vbkNsdXN0ZXJDaGlsZChub2RlLmlkLCBncmFwaCkpO1xuICAgICAgICAgIGNsdXN0ZXJEYi5zZXQobm9kZS5pZCwgeyBpZDogZmluZE5vbkNsdXN0ZXJDaGlsZChub2RlLmlkLCBncmFwaCksIG5vZGUgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG9nLnRyYWNlKFwiTm9kZSAtIHRoZSBub24gcmVjdXJzaXZlIHBhdGggWEFYXCIsIHYsIG5vZGVzLCBncmFwaC5ub2RlKHYpLCBkaXIpO1xuICAgICAgICAgIGF3YWl0IGluc2VydE5vZGUobm9kZXMsIGdyYXBoLm5vZGUodiksIHsgY29uZmlnOiBzaXRlQ29uZmlnLCBkaXIgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICApO1xuICBjb25zdCBwcm9jZXNzRWRnZXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBlZGdlUHJvbWlzZXMgPSBncmFwaC5lZGdlcygpLm1hcChhc3luYyBmdW5jdGlvbihlKSB7XG4gICAgICBjb25zdCBlZGdlID0gZ3JhcGguZWRnZShlLnYsIGUudywgZS5uYW1lKTtcbiAgICAgIGxvZy5pbmZvKFwiRWRnZSBcIiArIGUudiArIFwiIC0+IFwiICsgZS53ICsgXCI6IFwiICsgSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgICAgbG9nLmluZm8oXCJFZGdlIFwiICsgZS52ICsgXCIgLT4gXCIgKyBlLncgKyBcIjogXCIsIGUsIFwiIFwiLCBKU09OLnN0cmluZ2lmeShncmFwaC5lZGdlKGUpKSk7XG4gICAgICBsb2cuaW5mbyhcbiAgICAgICAgXCJGaXhcIixcbiAgICAgICAgY2x1c3RlckRiLFxuICAgICAgICBcImlkczpcIixcbiAgICAgICAgZS52LFxuICAgICAgICBlLncsXG4gICAgICAgIFwiVHJhbnNsYXRpbmc6IFwiLFxuICAgICAgICBjbHVzdGVyRGIuZ2V0KGUudiksXG4gICAgICAgIGNsdXN0ZXJEYi5nZXQoZS53KVxuICAgICAgKTtcbiAgICAgIGF3YWl0IGluc2VydEVkZ2VMYWJlbChlZGdlTGFiZWxzLCBlZGdlKTtcbiAgICB9KTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChlZGdlUHJvbWlzZXMpO1xuICB9LCBcInByb2Nlc3NFZGdlc1wiKTtcbiAgYXdhaXQgcHJvY2Vzc0VkZ2VzKCk7XG4gIGxvZy5pbmZvKFwiR3JhcGggYmVmb3JlIGxheW91dDpcIiwgSlNPTi5zdHJpbmdpZnkoZ3JhcGhsaWJKc29uMi53cml0ZShncmFwaCkpKTtcbiAgbG9nLmluZm8oXCIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgWFhYXCIpO1xuICBsb2cuaW5mbyhcIiMjIyAgICAgICAgICAgICAgICBMYXlvdXQgICAgICAgICAgICAgICAgICMjIyBYWFhcIik7XG4gIGxvZy5pbmZvKFwiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFhYWFwiKTtcbiAgZGFncmVMYXlvdXQoZ3JhcGgpO1xuICBsb2cuaW5mbyhcIkdyYXBoIGFmdGVyIGxheW91dDpcIiwgSlNPTi5zdHJpbmdpZnkoZ3JhcGhsaWJKc29uMi53cml0ZShncmFwaCkpKTtcbiAgbGV0IGRpZmYgPSAwO1xuICBsZXQgeyBzdWJHcmFwaFRpdGxlVG90YWxNYXJnaW4gfSA9IGdldFN1YkdyYXBoVGl0bGVNYXJnaW5zKHNpdGVDb25maWcpO1xuICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICBzb3J0Tm9kZXNCeUhpZXJhcmNoeShncmFwaCkubWFwKGFzeW5jIGZ1bmN0aW9uKHYpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBncmFwaC5ub2RlKHYpO1xuICAgICAgbG9nLmluZm8oXG4gICAgICAgIFwiUG9zaXRpb24gWEJYID0+IFwiICsgdiArIFwiOiAoXCIgKyBub2RlLngsXG4gICAgICAgIFwiLFwiICsgbm9kZS55LFxuICAgICAgICBcIikgd2lkdGg6IFwiLFxuICAgICAgICBub2RlLndpZHRoLFxuICAgICAgICBcIiBoZWlnaHQ6IFwiLFxuICAgICAgICBub2RlLmhlaWdodFxuICAgICAgKTtcbiAgICAgIGlmIChub2RlPy5jbHVzdGVyTm9kZSkge1xuICAgICAgICBub2RlLnkgKz0gc3ViR3JhcGhUaXRsZVRvdGFsTWFyZ2luO1xuICAgICAgICBsb2cuaW5mbyhcbiAgICAgICAgICBcIkEgdGFpbnRlZCBjbHVzdGVyIG5vZGUgWEJYMVwiLFxuICAgICAgICAgIHYsXG4gICAgICAgICAgbm9kZS5pZCxcbiAgICAgICAgICBub2RlLndpZHRoLFxuICAgICAgICAgIG5vZGUuaGVpZ2h0LFxuICAgICAgICAgIG5vZGUueCxcbiAgICAgICAgICBub2RlLnksXG4gICAgICAgICAgZ3JhcGgucGFyZW50KHYpXG4gICAgICAgICk7XG4gICAgICAgIGNsdXN0ZXJEYi5nZXQobm9kZS5pZCkubm9kZSA9IG5vZGU7XG4gICAgICAgIHBvc2l0aW9uTm9kZShub2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChncmFwaC5jaGlsZHJlbih2KS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbG9nLmluZm8oXG4gICAgICAgICAgICBcIkEgcHVyZSBjbHVzdGVyIG5vZGUgWEJYMVwiLFxuICAgICAgICAgICAgdixcbiAgICAgICAgICAgIG5vZGUuaWQsXG4gICAgICAgICAgICBub2RlLngsXG4gICAgICAgICAgICBub2RlLnksXG4gICAgICAgICAgICBub2RlLndpZHRoLFxuICAgICAgICAgICAgbm9kZS5oZWlnaHQsXG4gICAgICAgICAgICBncmFwaC5wYXJlbnQodilcbiAgICAgICAgICApO1xuICAgICAgICAgIG5vZGUuaGVpZ2h0ICs9IHN1YkdyYXBoVGl0bGVUb3RhbE1hcmdpbjtcbiAgICAgICAgICBncmFwaC5ub2RlKG5vZGUucGFyZW50SWQpO1xuICAgICAgICAgIGNvbnN0IGhhbGZQYWRkaW5nID0gbm9kZT8ucGFkZGluZyAvIDIgfHwgMDtcbiAgICAgICAgICBjb25zdCBsYWJlbEhlaWdodCA9IG5vZGU/LmxhYmVsQkJveD8uaGVpZ2h0IHx8IDA7XG4gICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IGxhYmVsSGVpZ2h0IC0gaGFsZlBhZGRpbmcgfHwgMDtcbiAgICAgICAgICBsb2cuZGVidWcoXCJPZmZzZXRZXCIsIG9mZnNldFksIFwibGFiZWxIZWlnaHRcIiwgbGFiZWxIZWlnaHQsIFwiaGFsZlBhZGRpbmdcIiwgaGFsZlBhZGRpbmcpO1xuICAgICAgICAgIGF3YWl0IGluc2VydENsdXN0ZXIoY2x1c3RlcnMsIG5vZGUpO1xuICAgICAgICAgIGNsdXN0ZXJEYi5nZXQobm9kZS5pZCkubm9kZSA9IG5vZGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgcGFyZW50ID0gZ3JhcGgubm9kZShub2RlLnBhcmVudElkKTtcbiAgICAgICAgICBub2RlLnkgKz0gc3ViR3JhcGhUaXRsZVRvdGFsTWFyZ2luIC8gMjtcbiAgICAgICAgICBsb2cuaW5mbyhcbiAgICAgICAgICAgIFwiQSByZWd1bGFyIG5vZGUgWEJYMSAtIHVzaW5nIHRoZSBwYWRkaW5nXCIsXG4gICAgICAgICAgICBub2RlLmlkLFxuICAgICAgICAgICAgXCJwYXJlbnRcIixcbiAgICAgICAgICAgIG5vZGUucGFyZW50SWQsXG4gICAgICAgICAgICBub2RlLndpZHRoLFxuICAgICAgICAgICAgbm9kZS5oZWlnaHQsXG4gICAgICAgICAgICBub2RlLngsXG4gICAgICAgICAgICBub2RlLnksXG4gICAgICAgICAgICBcIm9mZnNldFlcIixcbiAgICAgICAgICAgIG5vZGUub2Zmc2V0WSxcbiAgICAgICAgICAgIFwicGFyZW50XCIsXG4gICAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgICBwYXJlbnQ/Lm9mZnNldFksXG4gICAgICAgICAgICBub2RlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwb3NpdGlvbk5vZGUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICApO1xuICBncmFwaC5lZGdlcygpLmZvckVhY2goZnVuY3Rpb24oZSkge1xuICAgIGNvbnN0IGVkZ2UgPSBncmFwaC5lZGdlKGUpO1xuICAgIGxvZy5pbmZvKFwiRWRnZSBcIiArIGUudiArIFwiIC0+IFwiICsgZS53ICsgXCI6IFwiICsgSlNPTi5zdHJpbmdpZnkoZWRnZSksIGVkZ2UpO1xuICAgIGVkZ2UucG9pbnRzLmZvckVhY2goKHBvaW50KSA9PiBwb2ludC55ICs9IHN1YkdyYXBoVGl0bGVUb3RhbE1hcmdpbiAvIDIpO1xuICAgIGNvbnN0IHN0YXJ0Tm9kZSA9IGdyYXBoLm5vZGUoZS52KTtcbiAgICB2YXIgZW5kTm9kZSA9IGdyYXBoLm5vZGUoZS53KTtcbiAgICBjb25zdCBwYXRocyA9IGluc2VydEVkZ2UoZWRnZVBhdGhzLCBlZGdlLCBjbHVzdGVyRGIsIGRpYWdyYW1UeXBlLCBzdGFydE5vZGUsIGVuZE5vZGUsIGlkKTtcbiAgICBwb3NpdGlvbkVkZ2VMYWJlbChlZGdlLCBwYXRocyk7XG4gIH0pO1xuICBncmFwaC5ub2RlcygpLmZvckVhY2goZnVuY3Rpb24odikge1xuICAgIGNvbnN0IG4gPSBncmFwaC5ub2RlKHYpO1xuICAgIGxvZy5pbmZvKHYsIG4udHlwZSwgbi5kaWZmKTtcbiAgICBpZiAobi5pc0dyb3VwKSB7XG4gICAgICBkaWZmID0gbi5kaWZmO1xuICAgIH1cbiAgfSk7XG4gIGxvZy53YXJuKFwiUmV0dXJuaW5nIGZyb20gcmVjdXJzaXZlIHJlbmRlciBYQVhcIiwgZWxlbSwgZGlmZik7XG4gIHJldHVybiB7IGVsZW0sIGRpZmYgfTtcbn0sIFwicmVjdXJzaXZlUmVuZGVyXCIpO1xudmFyIHJlbmRlciA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoYXN5bmMgKGRhdGE0TGF5b3V0LCBzdmcpID0+IHtcbiAgY29uc3QgZ3JhcGggPSBuZXcgZ3JhcGhsaWIyLkdyYXBoKHtcbiAgICBtdWx0aWdyYXBoOiB0cnVlLFxuICAgIGNvbXBvdW5kOiB0cnVlXG4gIH0pLnNldEdyYXBoKHtcbiAgICByYW5rZGlyOiBkYXRhNExheW91dC5kaXJlY3Rpb24sXG4gICAgbm9kZXNlcDogZGF0YTRMYXlvdXQuY29uZmlnPy5ub2RlU3BhY2luZyB8fCBkYXRhNExheW91dC5jb25maWc/LmZsb3djaGFydD8ubm9kZVNwYWNpbmcgfHwgZGF0YTRMYXlvdXQubm9kZVNwYWNpbmcsXG4gICAgcmFua3NlcDogZGF0YTRMYXlvdXQuY29uZmlnPy5yYW5rU3BhY2luZyB8fCBkYXRhNExheW91dC5jb25maWc/LmZsb3djaGFydD8ucmFua1NwYWNpbmcgfHwgZGF0YTRMYXlvdXQucmFua1NwYWNpbmcsXG4gICAgbWFyZ2lueDogOCxcbiAgICBtYXJnaW55OiA4XG4gIH0pLnNldERlZmF1bHRFZGdlTGFiZWwoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9KTtcbiAgY29uc3QgZWxlbWVudCA9IHN2Zy5zZWxlY3QoXCJnXCIpO1xuICBtYXJrZXJzX2RlZmF1bHQoZWxlbWVudCwgZGF0YTRMYXlvdXQubWFya2VycywgZGF0YTRMYXlvdXQudHlwZSwgZGF0YTRMYXlvdXQuZGlhZ3JhbUlkKTtcbiAgY2xlYXIzKCk7XG4gIGNsZWFyMigpO1xuICBjbGVhcigpO1xuICBjbGVhcjQoKTtcbiAgZGF0YTRMYXlvdXQubm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgIGdyYXBoLnNldE5vZGUobm9kZS5pZCwgeyAuLi5ub2RlIH0pO1xuICAgIGlmIChub2RlLnBhcmVudElkKSB7XG4gICAgICBncmFwaC5zZXRQYXJlbnQobm9kZS5pZCwgbm9kZS5wYXJlbnRJZCk7XG4gICAgfVxuICB9KTtcbiAgbG9nLmRlYnVnKFwiRWRnZXM6XCIsIGRhdGE0TGF5b3V0LmVkZ2VzKTtcbiAgZGF0YTRMYXlvdXQuZWRnZXMuZm9yRWFjaCgoZWRnZSkgPT4ge1xuICAgIGlmIChlZGdlLnN0YXJ0ID09PSBlZGdlLmVuZCkge1xuICAgICAgY29uc3Qgbm9kZUlkID0gZWRnZS5zdGFydDtcbiAgICAgIGNvbnN0IHNwZWNpYWxJZDEgPSBub2RlSWQgKyBcIi0tLVwiICsgbm9kZUlkICsgXCItLS0xXCI7XG4gICAgICBjb25zdCBzcGVjaWFsSWQyID0gbm9kZUlkICsgXCItLS1cIiArIG5vZGVJZCArIFwiLS0tMlwiO1xuICAgICAgY29uc3Qgbm9kZSA9IGdyYXBoLm5vZGUobm9kZUlkKTtcbiAgICAgIGdyYXBoLnNldE5vZGUoc3BlY2lhbElkMSwge1xuICAgICAgICBkb21JZDogc3BlY2lhbElkMSxcbiAgICAgICAgaWQ6IHNwZWNpYWxJZDEsXG4gICAgICAgIHBhcmVudElkOiBub2RlLnBhcmVudElkLFxuICAgICAgICBsYWJlbFN0eWxlOiBcIlwiLFxuICAgICAgICBsYWJlbDogXCJcIixcbiAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgc2hhcGU6IFwibGFiZWxSZWN0XCIsXG4gICAgICAgIC8vIHNoYXBlOiAncmVjdCcsXG4gICAgICAgIHN0eWxlOiBcIlwiLFxuICAgICAgICB3aWR0aDogMTAsXG4gICAgICAgIGhlaWdodDogMTBcbiAgICAgIH0pO1xuICAgICAgZ3JhcGguc2V0UGFyZW50KHNwZWNpYWxJZDEsIG5vZGUucGFyZW50SWQpO1xuICAgICAgZ3JhcGguc2V0Tm9kZShzcGVjaWFsSWQyLCB7XG4gICAgICAgIGRvbUlkOiBzcGVjaWFsSWQyLFxuICAgICAgICBpZDogc3BlY2lhbElkMixcbiAgICAgICAgcGFyZW50SWQ6IG5vZGUucGFyZW50SWQsXG4gICAgICAgIGxhYmVsU3R5bGU6IFwiXCIsXG4gICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgIC8vIHNoYXBlOiAncmVjdCcsXG4gICAgICAgIHNoYXBlOiBcImxhYmVsUmVjdFwiLFxuICAgICAgICBsYWJlbDogXCJcIixcbiAgICAgICAgc3R5bGU6IFwiXCIsXG4gICAgICAgIHdpZHRoOiAxMCxcbiAgICAgICAgaGVpZ2h0OiAxMFxuICAgICAgfSk7XG4gICAgICBncmFwaC5zZXRQYXJlbnQoc3BlY2lhbElkMiwgbm9kZS5wYXJlbnRJZCk7XG4gICAgICBjb25zdCBlZGdlMSA9IHN0cnVjdHVyZWRDbG9uZShlZGdlKTtcbiAgICAgIGNvbnN0IGVkZ2VNaWQgPSBzdHJ1Y3R1cmVkQ2xvbmUoZWRnZSk7XG4gICAgICBjb25zdCBlZGdlMiA9IHN0cnVjdHVyZWRDbG9uZShlZGdlKTtcbiAgICAgIGVkZ2UxLmxhYmVsID0gXCJcIjtcbiAgICAgIGVkZ2UxLmFycm93VHlwZUVuZCA9IFwibm9uZVwiO1xuICAgICAgZWRnZTEuaWQgPSBub2RlSWQgKyBcIi1jeWNsaWMtc3BlY2lhbC0xXCI7XG4gICAgICBlZGdlTWlkLmFycm93VHlwZVN0YXJ0ID0gXCJub25lXCI7XG4gICAgICBlZGdlTWlkLmFycm93VHlwZUVuZCA9IFwibm9uZVwiO1xuICAgICAgZWRnZU1pZC5pZCA9IG5vZGVJZCArIFwiLWN5Y2xpYy1zcGVjaWFsLW1pZFwiO1xuICAgICAgZWRnZTIubGFiZWwgPSBcIlwiO1xuICAgICAgaWYgKG5vZGUuaXNHcm91cCkge1xuICAgICAgICBlZGdlMS5mcm9tQ2x1c3RlciA9IG5vZGVJZDtcbiAgICAgICAgZWRnZTIudG9DbHVzdGVyID0gbm9kZUlkO1xuICAgICAgfVxuICAgICAgZWRnZTIuaWQgPSBub2RlSWQgKyBcIi1jeWNsaWMtc3BlY2lhbC0yXCI7XG4gICAgICBlZGdlMi5hcnJvd1R5cGVTdGFydCA9IFwibm9uZVwiO1xuICAgICAgZ3JhcGguc2V0RWRnZShub2RlSWQsIHNwZWNpYWxJZDEsIGVkZ2UxLCBub2RlSWQgKyBcIi1jeWNsaWMtc3BlY2lhbC0wXCIpO1xuICAgICAgZ3JhcGguc2V0RWRnZShzcGVjaWFsSWQxLCBzcGVjaWFsSWQyLCBlZGdlTWlkLCBub2RlSWQgKyBcIi1jeWNsaWMtc3BlY2lhbC0xXCIpO1xuICAgICAgZ3JhcGguc2V0RWRnZShzcGVjaWFsSWQyLCBub2RlSWQsIGVkZ2UyLCBub2RlSWQgKyBcIi1jeWM8bGljLXNwZWNpYWwtMlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ3JhcGguc2V0RWRnZShlZGdlLnN0YXJ0LCBlZGdlLmVuZCwgeyAuLi5lZGdlIH0sIGVkZ2UuaWQpO1xuICAgIH1cbiAgfSk7XG4gIGxvZy53YXJuKFwiR3JhcGggYXQgZmlyc3Q6XCIsIEpTT04uc3RyaW5naWZ5KGdyYXBobGliSnNvbjIud3JpdGUoZ3JhcGgpKSk7XG4gIGFkanVzdENsdXN0ZXJzQW5kRWRnZXMoZ3JhcGgpO1xuICBsb2cud2FybihcIkdyYXBoIGFmdGVyIFhBWDpcIiwgSlNPTi5zdHJpbmdpZnkoZ3JhcGhsaWJKc29uMi53cml0ZShncmFwaCkpKTtcbiAgY29uc3Qgc2l0ZUNvbmZpZyA9IGdldENvbmZpZygpO1xuICBhd2FpdCByZWN1cnNpdmVSZW5kZXIoXG4gICAgZWxlbWVudCxcbiAgICBncmFwaCxcbiAgICBkYXRhNExheW91dC50eXBlLFxuICAgIGRhdGE0TGF5b3V0LmRpYWdyYW1JZCxcbiAgICB2b2lkIDAsXG4gICAgc2l0ZUNvbmZpZ1xuICApO1xufSwgXCJyZW5kZXJcIik7XG5leHBvcnQge1xuICByZW5kZXJcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/mermaid/dist/chunks/mermaid.core/dagre-OKDRZEBW.mjs\n");

/***/ })

}]);