"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunkrabbitmq_website"] = globalThis["webpackChunkrabbitmq_website"] || []).push([["vendors-node_modules_mermaid_dist_chunks_mermaid_core_gitGraphDiagram-7IBYFJ6S_mjs"],{

/***/ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs":
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   populateCommonDb: () => (/* binding */ populateCommonDb)\n/* harmony export */ });\n/* harmony import */ var _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs\");\n\n\n// src/diagrams/common/populateCommonDb.ts\nfunction populateCommonDb(ast, db) {\n  if (ast.accDescr) {\n    db.setAccDescription?.(ast.accDescr);\n  }\n  if (ast.accTitle) {\n    db.setAccTitle?.(ast.accTitle);\n  }\n  if (ast.title) {\n    db.setDiagramTitle?.(ast.title);\n  }\n}\n(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_0__.__name)(populateCommonDb, \"populateCommonDb\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NodW5rcy9tZXJtYWlkLmNvcmUvY2h1bmstNEJNRVpHSEYubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmJpdG1xLXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NodW5rcy9tZXJtYWlkLmNvcmUvY2h1bmstNEJNRVpHSEYubWpzPzFmMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgX19uYW1lXG59IGZyb20gXCIuL2NodW5rLVlUSk5UN0RVLm1qc1wiO1xuXG4vLyBzcmMvZGlhZ3JhbXMvY29tbW9uL3BvcHVsYXRlQ29tbW9uRGIudHNcbmZ1bmN0aW9uIHBvcHVsYXRlQ29tbW9uRGIoYXN0LCBkYikge1xuICBpZiAoYXN0LmFjY0Rlc2NyKSB7XG4gICAgZGIuc2V0QWNjRGVzY3JpcHRpb24/Lihhc3QuYWNjRGVzY3IpO1xuICB9XG4gIGlmIChhc3QuYWNjVGl0bGUpIHtcbiAgICBkYi5zZXRBY2NUaXRsZT8uKGFzdC5hY2NUaXRsZSk7XG4gIH1cbiAgaWYgKGFzdC50aXRsZSkge1xuICAgIGRiLnNldERpYWdyYW1UaXRsZT8uKGFzdC50aXRsZSk7XG4gIH1cbn1cbl9fbmFtZShwb3B1bGF0ZUNvbW1vbkRiLCBcInBvcHVsYXRlQ29tbW9uRGJcIik7XG5cbmV4cG9ydCB7XG4gIHBvcHVsYXRlQ29tbW9uRGJcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs\n");

/***/ }),

/***/ "./node_modules/mermaid/dist/chunks/mermaid.core/chunk-XZIHB7SX.mjs":
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImperativeState: () => (/* binding */ ImperativeState)\n/* harmony export */ });\n/* harmony import */ var _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs\");\n\n\n// src/utils/imperativeState.ts\nvar ImperativeState = class {\n  /**\n   * @param init - Function that creates the default state.\n   */\n  constructor(init) {\n    this.init = init;\n    this.records = this.init();\n  }\n  static {\n    (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_0__.__name)(this, \"ImperativeState\");\n  }\n  reset() {\n    this.records = this.init();\n  }\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NodW5rcy9tZXJtYWlkLmNvcmUvY2h1bmstWFpJSEI3U1gubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL3JhYmJpdG1xLXdlYnNpdGUvLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NodW5rcy9tZXJtYWlkLmNvcmUvY2h1bmstWFpJSEI3U1gubWpzPzA3MDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgX19uYW1lXG59IGZyb20gXCIuL2NodW5rLVlUSk5UN0RVLm1qc1wiO1xuXG4vLyBzcmMvdXRpbHMvaW1wZXJhdGl2ZVN0YXRlLnRzXG52YXIgSW1wZXJhdGl2ZVN0YXRlID0gY2xhc3Mge1xuICAvKipcbiAgICogQHBhcmFtIGluaXQgLSBGdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGhlIGRlZmF1bHQgc3RhdGUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihpbml0KSB7XG4gICAgdGhpcy5pbml0ID0gaW5pdDtcbiAgICB0aGlzLnJlY29yZHMgPSB0aGlzLmluaXQoKTtcbiAgfVxuICBzdGF0aWMge1xuICAgIF9fbmFtZSh0aGlzLCBcIkltcGVyYXRpdmVTdGF0ZVwiKTtcbiAgfVxuICByZXNldCgpIHtcbiAgICB0aGlzLnJlY29yZHMgPSB0aGlzLmluaXQoKTtcbiAgfVxufTtcblxuZXhwb3J0IHtcbiAgSW1wZXJhdGl2ZVN0YXRlXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/mermaid/dist/chunks/mermaid.core/chunk-XZIHB7SX.mjs\n");

/***/ }),

/***/ "./node_modules/mermaid/dist/chunks/mermaid.core/gitGraphDiagram-7IBYFJ6S.mjs":
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   diagram: () => (/* binding */ diagram)\n/* harmony export */ });\n/* harmony import */ var _chunk_4BMEZGHF_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-4BMEZGHF.mjs\");\n/* harmony import */ var _chunk_XZIHB7SX_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-XZIHB7SX.mjs\");\n/* harmony import */ var _chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-O4NI6UNU.mjs\");\n/* harmony import */ var _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-YTJNT7DU.mjs\");\n/* harmony import */ var _mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/@mermaid-js/parser/dist/mermaid-parser.core.mjs\");\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./node_modules/d3/src/index.js\");\n\n\n\n\n\n// src/diagrams/git/gitGraphParser.ts\n\n\n// src/diagrams/git/gitGraphTypes.ts\nvar commitType = {\n  NORMAL: 0,\n  REVERSE: 1,\n  HIGHLIGHT: 2,\n  MERGE: 3,\n  CHERRY_PICK: 4\n};\n\n// src/diagrams/git/gitGraphAst.ts\nvar DEFAULT_GITGRAPH_CONFIG = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.defaultConfig_default.gitGraph;\nvar getConfig3 = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => {\n  const config = (0,_chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_2__.cleanAndMerge)({\n    ...DEFAULT_GITGRAPH_CONFIG,\n    ...(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getConfig)().gitGraph\n  });\n  return config;\n}, \"getConfig\");\nvar state = new _chunk_XZIHB7SX_mjs__WEBPACK_IMPORTED_MODULE_1__.ImperativeState(() => {\n  const config = getConfig3();\n  const mainBranchName = config.mainBranchName;\n  const mainBranchOrder = config.mainBranchOrder;\n  return {\n    mainBranchName,\n    commits: /* @__PURE__ */ new Map(),\n    head: null,\n    branchConfig: /* @__PURE__ */ new Map([[mainBranchName, { name: mainBranchName, order: mainBranchOrder }]]),\n    branches: /* @__PURE__ */ new Map([[mainBranchName, null]]),\n    currBranch: mainBranchName,\n    direction: \"LR\",\n    seq: 0,\n    options: {}\n  };\n});\nfunction getID() {\n  return (0,_chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_2__.random)({ length: 7 });\n}\n(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(getID, \"getID\");\nfunction uniqBy(list, fn) {\n  const recordMap = /* @__PURE__ */ Object.create(null);\n  return list.reduce((out, item) => {\n    const key = fn(item);\n    if (!recordMap[key]) {\n      recordMap[key] = true;\n      out.push(item);\n    }\n    return out;\n  }, []);\n}\n(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(uniqBy, \"uniqBy\");\nvar setDirection = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function(dir2) {\n  state.records.direction = dir2;\n}, \"setDirection\");\nvar setOptions = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function(rawOptString) {\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"options str\", rawOptString);\n  rawOptString = rawOptString?.trim();\n  rawOptString = rawOptString || \"{}\";\n  try {\n    state.records.options = JSON.parse(rawOptString);\n  } catch (e) {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.error(\"error while parsing gitGraph options\", e.message);\n  }\n}, \"setOptions\");\nvar getOptions = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  return state.records.options;\n}, \"getOptions\");\nvar commit = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function(commitDB) {\n  let msg = commitDB.msg;\n  let id = commitDB.id;\n  const type = commitDB.type;\n  let tags = commitDB.tags;\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.info(\"commit\", msg, id, type, tags);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"Entering commit:\", msg, id, type, tags);\n  const config = getConfig3();\n  id = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(id, config);\n  msg = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(msg, config);\n  tags = tags?.map((tag) => _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(tag, config));\n  const newCommit = {\n    id: id ? id : state.records.seq + \"-\" + getID(),\n    message: msg,\n    seq: state.records.seq++,\n    type: type ?? commitType.NORMAL,\n    tags: tags ?? [],\n    parents: state.records.head == null ? [] : [state.records.head.id],\n    branch: state.records.currBranch\n  };\n  state.records.head = newCommit;\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.info(\"main branch\", config.mainBranchName);\n  state.records.commits.set(newCommit.id, newCommit);\n  state.records.branches.set(state.records.currBranch, newCommit.id);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"in pushCommit \" + newCommit.id);\n}, \"commit\");\nvar branch = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function(branchDB) {\n  let name = branchDB.name;\n  const order = branchDB.order;\n  name = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(name, getConfig3());\n  if (state.records.branches.has(name)) {\n    throw new Error(\n      `Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using \"checkout ${name}\")`\n    );\n  }\n  state.records.branches.set(name, state.records.head != null ? state.records.head.id : null);\n  state.records.branchConfig.set(name, { name, order });\n  checkout(name);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"in createBranch\");\n}, \"branch\");\nvar merge = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((mergeDB) => {\n  let otherBranch = mergeDB.branch;\n  let customId = mergeDB.id;\n  const overrideType = mergeDB.type;\n  const customTags = mergeDB.tags;\n  const config = getConfig3();\n  otherBranch = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(otherBranch, config);\n  if (customId) {\n    customId = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(customId, config);\n  }\n  const currentBranchCheck = state.records.branches.get(state.records.currBranch);\n  const otherBranchCheck = state.records.branches.get(otherBranch);\n  const currentCommit = currentBranchCheck ? state.records.commits.get(currentBranchCheck) : void 0;\n  const otherCommit = otherBranchCheck ? state.records.commits.get(otherBranchCheck) : void 0;\n  if (currentCommit && otherCommit && currentCommit.branch === otherBranch) {\n    throw new Error(`Cannot merge branch '${otherBranch}' into itself.`);\n  }\n  if (state.records.currBranch === otherBranch) {\n    const error = new Error('Incorrect usage of \"merge\". Cannot merge a branch to itself');\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [\"branch abc\"]\n    };\n    throw error;\n  }\n  if (currentCommit === void 0 || !currentCommit) {\n    const error = new Error(\n      `Incorrect usage of \"merge\". Current branch (${state.records.currBranch})has no commits`\n    );\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [\"commit\"]\n    };\n    throw error;\n  }\n  if (!state.records.branches.has(otherBranch)) {\n    const error = new Error(\n      'Incorrect usage of \"merge\". Branch to be merged (' + otherBranch + \") does not exist\"\n    );\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [`branch ${otherBranch}`]\n    };\n    throw error;\n  }\n  if (otherCommit === void 0 || !otherCommit) {\n    const error = new Error(\n      'Incorrect usage of \"merge\". Branch to be merged (' + otherBranch + \") has no commits\"\n    );\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: ['\"commit\"']\n    };\n    throw error;\n  }\n  if (currentCommit === otherCommit) {\n    const error = new Error('Incorrect usage of \"merge\". Both branches have same head');\n    error.hash = {\n      text: `merge ${otherBranch}`,\n      token: `merge ${otherBranch}`,\n      expected: [\"branch abc\"]\n    };\n    throw error;\n  }\n  if (customId && state.records.commits.has(customId)) {\n    const error = new Error(\n      'Incorrect usage of \"merge\". Commit with id:' + customId + \" already exists, use different custom Id\"\n    );\n    error.hash = {\n      text: `merge ${otherBranch} ${customId} ${overrideType} ${customTags?.join(\" \")}`,\n      token: `merge ${otherBranch} ${customId} ${overrideType} ${customTags?.join(\" \")}`,\n      expected: [\n        `merge ${otherBranch} ${customId}_UNIQUE ${overrideType} ${customTags?.join(\" \")}`\n      ]\n    };\n    throw error;\n  }\n  const verifiedBranch = otherBranchCheck ? otherBranchCheck : \"\";\n  const commit2 = {\n    id: customId || `${state.records.seq}-${getID()}`,\n    message: `merged branch ${otherBranch} into ${state.records.currBranch}`,\n    seq: state.records.seq++,\n    parents: state.records.head == null ? [] : [state.records.head.id, verifiedBranch],\n    branch: state.records.currBranch,\n    type: commitType.MERGE,\n    customType: overrideType,\n    customId: customId ? true : false,\n    tags: customTags ?? []\n  };\n  state.records.head = commit2;\n  state.records.commits.set(commit2.id, commit2);\n  state.records.branches.set(state.records.currBranch, commit2.id);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(state.records.branches);\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"in mergeBranch\");\n}, \"merge\");\nvar cherryPick = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function(cherryPickDB) {\n  let sourceId = cherryPickDB.id;\n  let targetId = cherryPickDB.targetId;\n  let tags = cherryPickDB.tags;\n  let parentCommitId = cherryPickDB.parent;\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"Entering cherryPick:\", sourceId, targetId, tags);\n  const config = getConfig3();\n  sourceId = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(sourceId, config);\n  targetId = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(targetId, config);\n  tags = tags?.map((tag) => _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(tag, config));\n  parentCommitId = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(parentCommitId, config);\n  if (!sourceId || !state.records.commits.has(sourceId)) {\n    const error = new Error(\n      'Incorrect usage of \"cherryPick\". Source commit id should exist and provided'\n    );\n    error.hash = {\n      text: `cherryPick ${sourceId} ${targetId}`,\n      token: `cherryPick ${sourceId} ${targetId}`,\n      expected: [\"cherry-pick abc\"]\n    };\n    throw error;\n  }\n  const sourceCommit = state.records.commits.get(sourceId);\n  if (sourceCommit === void 0 || !sourceCommit) {\n    throw new Error('Incorrect usage of \"cherryPick\". Source commit id should exist and provided');\n  }\n  if (parentCommitId && !(Array.isArray(sourceCommit.parents) && sourceCommit.parents.includes(parentCommitId))) {\n    const error = new Error(\n      \"Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.\"\n    );\n    throw error;\n  }\n  const sourceCommitBranch = sourceCommit.branch;\n  if (sourceCommit.type === commitType.MERGE && !parentCommitId) {\n    const error = new Error(\n      \"Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.\"\n    );\n    throw error;\n  }\n  if (!targetId || !state.records.commits.has(targetId)) {\n    if (sourceCommitBranch === state.records.currBranch) {\n      const error = new Error(\n        'Incorrect usage of \"cherryPick\". Source commit is already on current branch'\n      );\n      error.hash = {\n        text: `cherryPick ${sourceId} ${targetId}`,\n        token: `cherryPick ${sourceId} ${targetId}`,\n        expected: [\"cherry-pick abc\"]\n      };\n      throw error;\n    }\n    const currentCommitId = state.records.branches.get(state.records.currBranch);\n    if (currentCommitId === void 0 || !currentCommitId) {\n      const error = new Error(\n        `Incorrect usage of \"cherry-pick\". Current branch (${state.records.currBranch})has no commits`\n      );\n      error.hash = {\n        text: `cherryPick ${sourceId} ${targetId}`,\n        token: `cherryPick ${sourceId} ${targetId}`,\n        expected: [\"cherry-pick abc\"]\n      };\n      throw error;\n    }\n    const currentCommit = state.records.commits.get(currentCommitId);\n    if (currentCommit === void 0 || !currentCommit) {\n      const error = new Error(\n        `Incorrect usage of \"cherry-pick\". Current branch (${state.records.currBranch})has no commits`\n      );\n      error.hash = {\n        text: `cherryPick ${sourceId} ${targetId}`,\n        token: `cherryPick ${sourceId} ${targetId}`,\n        expected: [\"cherry-pick abc\"]\n      };\n      throw error;\n    }\n    const commit2 = {\n      id: state.records.seq + \"-\" + getID(),\n      message: `cherry-picked ${sourceCommit?.message} into ${state.records.currBranch}`,\n      seq: state.records.seq++,\n      parents: state.records.head == null ? [] : [state.records.head.id, sourceCommit.id],\n      branch: state.records.currBranch,\n      type: commitType.CHERRY_PICK,\n      tags: tags ? tags.filter(Boolean) : [\n        `cherry-pick:${sourceCommit.id}${sourceCommit.type === commitType.MERGE ? `|parent:${parentCommitId}` : \"\"}`\n      ]\n    };\n    state.records.head = commit2;\n    state.records.commits.set(commit2.id, commit2);\n    state.records.branches.set(state.records.currBranch, commit2.id);\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(state.records.branches);\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"in cherryPick\");\n  }\n}, \"cherryPick\");\nvar checkout = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function(branch2) {\n  branch2 = _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.common_default.sanitizeText(branch2, getConfig3());\n  if (!state.records.branches.has(branch2)) {\n    const error = new Error(\n      `Trying to checkout branch which is not yet created. (Help try using \"branch ${branch2}\")`\n    );\n    error.hash = {\n      text: `checkout ${branch2}`,\n      token: `checkout ${branch2}`,\n      expected: [`branch ${branch2}`]\n    };\n    throw error;\n  } else {\n    state.records.currBranch = branch2;\n    const id = state.records.branches.get(state.records.currBranch);\n    if (id === void 0 || !id) {\n      state.records.head = null;\n    } else {\n      state.records.head = state.records.commits.get(id) ?? null;\n    }\n  }\n}, \"checkout\");\nfunction upsert(arr, key, newVal) {\n  const index = arr.indexOf(key);\n  if (index === -1) {\n    arr.push(newVal);\n  } else {\n    arr.splice(index, 1, newVal);\n  }\n}\n(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(upsert, \"upsert\");\nfunction prettyPrintCommitHistory(commitArr) {\n  const commit2 = commitArr.reduce((out, commit3) => {\n    if (out.seq > commit3.seq) {\n      return out;\n    }\n    return commit3;\n  }, commitArr[0]);\n  let line = \"\";\n  commitArr.forEach(function(c) {\n    if (c === commit2) {\n      line += \"\t*\";\n    } else {\n      line += \"\t|\";\n    }\n  });\n  const label = [line, commit2.id, commit2.seq];\n  for (const branch2 in state.records.branches) {\n    if (state.records.branches.get(branch2) === commit2.id) {\n      label.push(branch2);\n    }\n  }\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(label.join(\" \"));\n  if (commit2.parents && commit2.parents.length == 2 && commit2.parents[0] && commit2.parents[1]) {\n    const newCommit = state.records.commits.get(commit2.parents[0]);\n    upsert(commitArr, commit2, newCommit);\n    if (commit2.parents[1]) {\n      commitArr.push(state.records.commits.get(commit2.parents[1]));\n    }\n  } else if (commit2.parents.length == 0) {\n    return;\n  } else {\n    if (commit2.parents[0]) {\n      const newCommit = state.records.commits.get(commit2.parents[0]);\n      upsert(commitArr, commit2, newCommit);\n    }\n  }\n  commitArr = uniqBy(commitArr, (c) => c.id);\n  prettyPrintCommitHistory(commitArr);\n}\n(0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(prettyPrintCommitHistory, \"prettyPrintCommitHistory\");\nvar prettyPrint = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(state.records.commits);\n  const node = getCommitsArray()[0];\n  prettyPrintCommitHistory([node]);\n}, \"prettyPrint\");\nvar clear2 = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  state.reset();\n  (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.clear)();\n}, \"clear\");\nvar getBranchesAsObjArray = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  const branchesArray = [...state.records.branchConfig.values()].map((branchConfig, i) => {\n    if (branchConfig.order !== null && branchConfig.order !== void 0) {\n      return branchConfig;\n    }\n    return {\n      ...branchConfig,\n      order: parseFloat(`0.${i}`)\n    };\n  }).sort((a, b) => (a.order ?? 0) - (b.order ?? 0)).map(({ name }) => ({ name }));\n  return branchesArray;\n}, \"getBranchesAsObjArray\");\nvar getBranches = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  return state.records.branches;\n}, \"getBranches\");\nvar getCommits = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  return state.records.commits;\n}, \"getCommits\");\nvar getCommitsArray = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  const commitArr = [...state.records.commits.values()];\n  commitArr.forEach(function(o) {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(o.id);\n  });\n  commitArr.sort((a, b) => a.seq - b.seq);\n  return commitArr;\n}, \"getCommitsArray\");\nvar getCurrentBranch = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  return state.records.currBranch;\n}, \"getCurrentBranch\");\nvar getDirection = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  return state.records.direction;\n}, \"getDirection\");\nvar getHead = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function() {\n  return state.records.head;\n}, \"getHead\");\nvar db = {\n  commitType,\n  getConfig: getConfig3,\n  setDirection,\n  setOptions,\n  getOptions,\n  commit,\n  branch,\n  merge,\n  cherryPick,\n  checkout,\n  //reset,\n  prettyPrint,\n  clear: clear2,\n  getBranchesAsObjArray,\n  getBranches,\n  getCommits,\n  getCommitsArray,\n  getCurrentBranch,\n  getDirection,\n  getHead,\n  setAccTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setAccTitle,\n  getAccTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getAccTitle,\n  getAccDescription: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getAccDescription,\n  setAccDescription: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setAccDescription,\n  setDiagramTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setDiagramTitle,\n  getDiagramTitle: _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getDiagramTitle\n};\n\n// src/diagrams/git/gitGraphParser.ts\nvar populate = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((ast, db2) => {\n  (0,_chunk_4BMEZGHF_mjs__WEBPACK_IMPORTED_MODULE_0__.populateCommonDb)(ast, db2);\n  if (ast.dir) {\n    db2.setDirection(ast.dir);\n  }\n  for (const statement of ast.statements) {\n    parseStatement(statement, db2);\n  }\n}, \"populate\");\nvar parseStatement = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((statement, db2) => {\n  const parsers = {\n    Commit: /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((stmt) => db2.commit(parseCommit(stmt)), \"Commit\"),\n    Branch: /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((stmt) => db2.branch(parseBranch(stmt)), \"Branch\"),\n    Merge: /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((stmt) => db2.merge(parseMerge(stmt)), \"Merge\"),\n    Checkout: /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((stmt) => db2.checkout(parseCheckout(stmt)), \"Checkout\"),\n    CherryPicking: /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((stmt) => db2.cherryPick(parseCherryPicking(stmt)), \"CherryPicking\")\n  };\n  const parser2 = parsers[statement.$type];\n  if (parser2) {\n    parser2(statement);\n  } else {\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.error(`Unknown statement type: ${statement.$type}`);\n  }\n}, \"parseStatement\");\nvar parseCommit = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((commit2) => {\n  const commitDB = {\n    id: commit2.id,\n    msg: commit2.message ?? \"\",\n    type: commit2.type !== void 0 ? commitType[commit2.type] : commitType.NORMAL,\n    tags: commit2.tags ?? void 0\n  };\n  return commitDB;\n}, \"parseCommit\");\nvar parseBranch = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((branch2) => {\n  const branchDB = {\n    name: branch2.name,\n    order: branch2.order ?? 0\n  };\n  return branchDB;\n}, \"parseBranch\");\nvar parseMerge = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((merge2) => {\n  const mergeDB = {\n    branch: merge2.branch,\n    id: merge2.id ?? \"\",\n    type: merge2.type !== void 0 ? commitType[merge2.type] : void 0,\n    tags: merge2.tags ?? void 0\n  };\n  return mergeDB;\n}, \"parseMerge\");\nvar parseCheckout = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((checkout2) => {\n  const branch2 = checkout2.branch;\n  return branch2;\n}, \"parseCheckout\");\nvar parseCherryPicking = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((cherryPicking) => {\n  const cherryPickDB = {\n    id: cherryPicking.id,\n    targetId: \"\",\n    tags: cherryPicking.tags?.length === 0 ? void 0 : cherryPicking.tags,\n    parent: cherryPicking.parent\n  };\n  return cherryPickDB;\n}, \"parseCherryPicking\");\nvar parser = {\n  parse: /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(async (input) => {\n    const ast = await (0,_mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__.parse)(\"gitGraph\", input);\n    _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(ast);\n    populate(ast, db);\n  }, \"parse\")\n};\nif (void 0) {\n  const { it, expect, describe } = void 0;\n  const mockDB = {\n    commitType,\n    setDirection: vi.fn(),\n    commit: vi.fn(),\n    branch: vi.fn(),\n    merge: vi.fn(),\n    cherryPick: vi.fn(),\n    checkout: vi.fn()\n  };\n  describe(\"GitGraph Parser\", () => {\n    it(\"should parse a commit statement\", () => {\n      const commit2 = {\n        $type: \"Commit\",\n        id: \"1\",\n        message: \"test\",\n        tags: [\"tag1\", \"tag2\"],\n        type: \"NORMAL\"\n      };\n      parseStatement(commit2, mockDB);\n      expect(mockDB.commit).toHaveBeenCalledWith({\n        id: \"1\",\n        msg: \"test\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n    });\n    it(\"should parse a branch statement\", () => {\n      const branch2 = {\n        $type: \"Branch\",\n        name: \"newBranch\",\n        order: 1\n      };\n      parseStatement(branch2, mockDB);\n      expect(mockDB.branch).toHaveBeenCalledWith({ name: \"newBranch\", order: 1 });\n    });\n    it(\"should parse a checkout statement\", () => {\n      const checkout2 = {\n        $type: \"Checkout\",\n        branch: \"newBranch\"\n      };\n      parseStatement(checkout2, mockDB);\n      expect(mockDB.checkout).toHaveBeenCalledWith(\"newBranch\");\n    });\n    it(\"should parse a merge statement\", () => {\n      const merge2 = {\n        $type: \"Merge\",\n        branch: \"newBranch\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        type: \"NORMAL\"\n      };\n      parseStatement(merge2, mockDB);\n      expect(mockDB.merge).toHaveBeenCalledWith({\n        branch: \"newBranch\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n    });\n    it(\"should parse a cherry picking statement\", () => {\n      const cherryPick2 = {\n        $type: \"CherryPicking\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        parent: \"2\"\n      };\n      parseStatement(cherryPick2, mockDB);\n      expect(mockDB.cherryPick).toHaveBeenCalledWith({\n        id: \"1\",\n        targetId: \"\",\n        parent: \"2\",\n        tags: [\"tag1\", \"tag2\"]\n      });\n    });\n    it(\"should parse a langium generated gitGraph ast\", () => {\n      const dummy = {\n        $type: \"GitGraph\",\n        statements: []\n      };\n      const gitGraphAst = {\n        $type: \"GitGraph\",\n        statements: [\n          {\n            $container: dummy,\n            $type: \"Commit\",\n            id: \"1\",\n            message: \"test\",\n            tags: [\"tag1\", \"tag2\"],\n            type: \"NORMAL\"\n          },\n          {\n            $container: dummy,\n            $type: \"Branch\",\n            name: \"newBranch\",\n            order: 1\n          },\n          {\n            $container: dummy,\n            $type: \"Merge\",\n            branch: \"newBranch\",\n            id: \"1\",\n            tags: [\"tag1\", \"tag2\"],\n            type: \"NORMAL\"\n          },\n          {\n            $container: dummy,\n            $type: \"Checkout\",\n            branch: \"newBranch\"\n          },\n          {\n            $container: dummy,\n            $type: \"CherryPicking\",\n            id: \"1\",\n            tags: [\"tag1\", \"tag2\"],\n            parent: \"2\"\n          }\n        ]\n      };\n      populate(gitGraphAst, mockDB);\n      expect(mockDB.commit).toHaveBeenCalledWith({\n        id: \"1\",\n        msg: \"test\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n      expect(mockDB.branch).toHaveBeenCalledWith({ name: \"newBranch\", order: 1 });\n      expect(mockDB.merge).toHaveBeenCalledWith({\n        branch: \"newBranch\",\n        id: \"1\",\n        tags: [\"tag1\", \"tag2\"],\n        type: 0\n      });\n      expect(mockDB.checkout).toHaveBeenCalledWith(\"newBranch\");\n    });\n  });\n}\n\n// src/diagrams/git/gitGraphRenderer.ts\n\nvar DEFAULT_CONFIG = (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.getConfig2)();\nvar DEFAULT_GITGRAPH_CONFIG2 = DEFAULT_CONFIG?.gitGraph;\nvar LAYOUT_OFFSET = 10;\nvar COMMIT_STEP = 40;\nvar PX = 4;\nvar PY = 2;\nvar THEME_COLOR_LIMIT = 8;\nvar branchPos = /* @__PURE__ */ new Map();\nvar commitPos = /* @__PURE__ */ new Map();\nvar defaultPos = 30;\nvar allCommitsDict = /* @__PURE__ */ new Map();\nvar lanes = [];\nvar maxPos = 0;\nvar dir = \"LR\";\nvar clear3 = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => {\n  branchPos.clear();\n  commitPos.clear();\n  allCommitsDict.clear();\n  maxPos = 0;\n  lanes = [];\n  dir = \"LR\";\n}, \"clear\");\nvar drawText = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((txt) => {\n  const svgLabel = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n  const rows = typeof txt === \"string\" ? txt.split(/\\\\n|\\n|<br\\s*\\/?>/gi) : txt;\n  rows.forEach((row) => {\n    const tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n    tspan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n    tspan.setAttribute(\"dy\", \"1em\");\n    tspan.setAttribute(\"x\", \"0\");\n    tspan.setAttribute(\"class\", \"row\");\n    tspan.textContent = row.trim();\n    svgLabel.appendChild(tspan);\n  });\n  return svgLabel;\n}, \"drawText\");\nvar findClosestParent = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((parents) => {\n  let closestParent;\n  let comparisonFunc;\n  let targetPosition;\n  if (dir === \"BT\") {\n    comparisonFunc = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((a, b) => a <= b, \"comparisonFunc\");\n    targetPosition = Infinity;\n  } else {\n    comparisonFunc = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((a, b) => a >= b, \"comparisonFunc\");\n    targetPosition = 0;\n  }\n  parents.forEach((parent) => {\n    const parentPosition = dir === \"TB\" || dir == \"BT\" ? commitPos.get(parent)?.y : commitPos.get(parent)?.x;\n    if (parentPosition !== void 0 && comparisonFunc(parentPosition, targetPosition)) {\n      closestParent = parent;\n      targetPosition = parentPosition;\n    }\n  });\n  return closestParent;\n}, \"findClosestParent\");\nvar findClosestParentBT = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((parents) => {\n  let closestParent = \"\";\n  let maxPosition = Infinity;\n  parents.forEach((parent) => {\n    const parentPosition = commitPos.get(parent).y;\n    if (parentPosition <= maxPosition) {\n      closestParent = parent;\n      maxPosition = parentPosition;\n    }\n  });\n  return closestParent || void 0;\n}, \"findClosestParentBT\");\nvar setParallelBTPos = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((sortedKeys, commits, defaultPos2) => {\n  let curPos = defaultPos2;\n  let maxPosition = defaultPos2;\n  const roots = [];\n  sortedKeys.forEach((key) => {\n    const commit2 = commits.get(key);\n    if (!commit2) {\n      throw new Error(`Commit not found for key ${key}`);\n    }\n    if (commit2.parents.length) {\n      curPos = calculateCommitPosition(commit2);\n      maxPosition = Math.max(curPos, maxPosition);\n    } else {\n      roots.push(commit2);\n    }\n    setCommitPosition(commit2, curPos);\n  });\n  curPos = maxPosition;\n  roots.forEach((commit2) => {\n    setRootPosition(commit2, curPos, defaultPos2);\n  });\n  sortedKeys.forEach((key) => {\n    const commit2 = commits.get(key);\n    if (commit2?.parents.length) {\n      const closestParent = findClosestParentBT(commit2.parents);\n      curPos = commitPos.get(closestParent).y - COMMIT_STEP;\n      if (curPos <= maxPosition) {\n        maxPosition = curPos;\n      }\n      const x = branchPos.get(commit2.branch).pos;\n      const y = curPos - LAYOUT_OFFSET;\n      commitPos.set(commit2.id, { x, y });\n    }\n  });\n}, \"setParallelBTPos\");\nvar findClosestParentPos = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((commit2) => {\n  const closestParent = findClosestParent(commit2.parents.filter((p) => p !== null));\n  if (!closestParent) {\n    throw new Error(`Closest parent not found for commit ${commit2.id}`);\n  }\n  const closestParentPos = commitPos.get(closestParent)?.y;\n  if (closestParentPos === void 0) {\n    throw new Error(`Closest parent position not found for commit ${commit2.id}`);\n  }\n  return closestParentPos;\n}, \"findClosestParentPos\");\nvar calculateCommitPosition = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((commit2) => {\n  const closestParentPos = findClosestParentPos(commit2);\n  return closestParentPos + COMMIT_STEP;\n}, \"calculateCommitPosition\");\nvar setCommitPosition = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((commit2, curPos) => {\n  const branch2 = branchPos.get(commit2.branch);\n  if (!branch2) {\n    throw new Error(`Branch not found for commit ${commit2.id}`);\n  }\n  const x = branch2.pos;\n  const y = curPos + LAYOUT_OFFSET;\n  commitPos.set(commit2.id, { x, y });\n  return { x, y };\n}, \"setCommitPosition\");\nvar setRootPosition = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((commit2, curPos, defaultPos2) => {\n  const branch2 = branchPos.get(commit2.branch);\n  if (!branch2) {\n    throw new Error(`Branch not found for commit ${commit2.id}`);\n  }\n  const y = curPos + defaultPos2;\n  const x = branch2.pos;\n  commitPos.set(commit2.id, { x, y });\n}, \"setRootPosition\");\nvar drawCommitBullet = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((gBullets, commit2, commitPosition, typeClass, branchIndex, commitSymbolType) => {\n  if (commitSymbolType === commitType.HIGHLIGHT) {\n    gBullets.append(\"rect\").attr(\"x\", commitPosition.x - 10).attr(\"y\", commitPosition.y - 10).attr(\"width\", 20).attr(\"height\", 20).attr(\n      \"class\",\n      `commit ${commit2.id} commit-highlight${branchIndex % THEME_COLOR_LIMIT} ${typeClass}-outer`\n    );\n    gBullets.append(\"rect\").attr(\"x\", commitPosition.x - 6).attr(\"y\", commitPosition.y - 6).attr(\"width\", 12).attr(\"height\", 12).attr(\n      \"class\",\n      `commit ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT} ${typeClass}-inner`\n    );\n  } else if (commitSymbolType === commitType.CHERRY_PICK) {\n    gBullets.append(\"circle\").attr(\"cx\", commitPosition.x).attr(\"cy\", commitPosition.y).attr(\"r\", 10).attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append(\"circle\").attr(\"cx\", commitPosition.x - 3).attr(\"cy\", commitPosition.y + 2).attr(\"r\", 2.75).attr(\"fill\", \"#fff\").attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append(\"circle\").attr(\"cx\", commitPosition.x + 3).attr(\"cy\", commitPosition.y + 2).attr(\"r\", 2.75).attr(\"fill\", \"#fff\").attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append(\"line\").attr(\"x1\", commitPosition.x + 3).attr(\"y1\", commitPosition.y + 1).attr(\"x2\", commitPosition.x).attr(\"y2\", commitPosition.y - 5).attr(\"stroke\", \"#fff\").attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n    gBullets.append(\"line\").attr(\"x1\", commitPosition.x - 3).attr(\"y1\", commitPosition.y + 1).attr(\"x2\", commitPosition.x).attr(\"y2\", commitPosition.y - 5).attr(\"stroke\", \"#fff\").attr(\"class\", `commit ${commit2.id} ${typeClass}`);\n  } else {\n    const circle = gBullets.append(\"circle\");\n    circle.attr(\"cx\", commitPosition.x);\n    circle.attr(\"cy\", commitPosition.y);\n    circle.attr(\"r\", commit2.type === commitType.MERGE ? 9 : 10);\n    circle.attr(\"class\", `commit ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT}`);\n    if (commitSymbolType === commitType.MERGE) {\n      const circle2 = gBullets.append(\"circle\");\n      circle2.attr(\"cx\", commitPosition.x);\n      circle2.attr(\"cy\", commitPosition.y);\n      circle2.attr(\"r\", 6);\n      circle2.attr(\n        \"class\",\n        `commit ${typeClass} ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT}`\n      );\n    }\n    if (commitSymbolType === commitType.REVERSE) {\n      const cross = gBullets.append(\"path\");\n      cross.attr(\n        \"d\",\n        `M ${commitPosition.x - 5},${commitPosition.y - 5}L${commitPosition.x + 5},${commitPosition.y + 5}M${commitPosition.x - 5},${commitPosition.y + 5}L${commitPosition.x + 5},${commitPosition.y - 5}`\n      ).attr(\"class\", `commit ${typeClass} ${commit2.id} commit${branchIndex % THEME_COLOR_LIMIT}`);\n    }\n  }\n}, \"drawCommitBullet\");\nvar drawCommitLabel = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((gLabels, commit2, commitPosition, pos) => {\n  if (commit2.type !== commitType.CHERRY_PICK && (commit2.customId && commit2.type === commitType.MERGE || commit2.type !== commitType.MERGE) && DEFAULT_GITGRAPH_CONFIG2?.showCommitLabel) {\n    const wrapper = gLabels.append(\"g\");\n    const labelBkg = wrapper.insert(\"rect\").attr(\"class\", \"commit-label-bkg\");\n    const text = wrapper.append(\"text\").attr(\"x\", pos).attr(\"y\", commitPosition.y + 25).attr(\"class\", \"commit-label\").text(commit2.id);\n    const bbox = text.node()?.getBBox();\n    if (bbox) {\n      labelBkg.attr(\"x\", commitPosition.posWithOffset - bbox.width / 2 - PY).attr(\"y\", commitPosition.y + 13.5).attr(\"width\", bbox.width + 2 * PY).attr(\"height\", bbox.height + 2 * PY);\n      if (dir === \"TB\" || dir === \"BT\") {\n        labelBkg.attr(\"x\", commitPosition.x - (bbox.width + 4 * PX + 5)).attr(\"y\", commitPosition.y - 12);\n        text.attr(\"x\", commitPosition.x - (bbox.width + 4 * PX)).attr(\"y\", commitPosition.y + bbox.height - 12);\n      } else {\n        text.attr(\"x\", commitPosition.posWithOffset - bbox.width / 2);\n      }\n      if (DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel) {\n        if (dir === \"TB\" || dir === \"BT\") {\n          text.attr(\n            \"transform\",\n            \"rotate(-45, \" + commitPosition.x + \", \" + commitPosition.y + \")\"\n          );\n          labelBkg.attr(\n            \"transform\",\n            \"rotate(-45, \" + commitPosition.x + \", \" + commitPosition.y + \")\"\n          );\n        } else {\n          const r_x = -7.5 - (bbox.width + 10) / 25 * 9.5;\n          const r_y = 10 + bbox.width / 25 * 8.5;\n          wrapper.attr(\n            \"transform\",\n            \"translate(\" + r_x + \", \" + r_y + \") rotate(-45, \" + pos + \", \" + commitPosition.y + \")\"\n          );\n        }\n      }\n    }\n  }\n}, \"drawCommitLabel\");\nvar drawCommitTags = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((gLabels, commit2, commitPosition, pos) => {\n  if (commit2.tags.length > 0) {\n    let yOffset = 0;\n    let maxTagBboxWidth = 0;\n    let maxTagBboxHeight = 0;\n    const tagElements = [];\n    for (const tagValue of commit2.tags.reverse()) {\n      const rect = gLabels.insert(\"polygon\");\n      const hole = gLabels.append(\"circle\");\n      const tag = gLabels.append(\"text\").attr(\"y\", commitPosition.y - 16 - yOffset).attr(\"class\", \"tag-label\").text(tagValue);\n      const tagBbox = tag.node()?.getBBox();\n      if (!tagBbox) {\n        throw new Error(\"Tag bbox not found\");\n      }\n      maxTagBboxWidth = Math.max(maxTagBboxWidth, tagBbox.width);\n      maxTagBboxHeight = Math.max(maxTagBboxHeight, tagBbox.height);\n      tag.attr(\"x\", commitPosition.posWithOffset - tagBbox.width / 2);\n      tagElements.push({\n        tag,\n        hole,\n        rect,\n        yOffset\n      });\n      yOffset += 20;\n    }\n    for (const { tag, hole, rect, yOffset: yOffset2 } of tagElements) {\n      const h2 = maxTagBboxHeight / 2;\n      const ly = commitPosition.y - 19.2 - yOffset2;\n      rect.attr(\"class\", \"tag-label-bkg\").attr(\n        \"points\",\n        `\n      ${pos - maxTagBboxWidth / 2 - PX / 2},${ly + PY}  \n      ${pos - maxTagBboxWidth / 2 - PX / 2},${ly - PY}\n      ${commitPosition.posWithOffset - maxTagBboxWidth / 2 - PX},${ly - h2 - PY}\n      ${commitPosition.posWithOffset + maxTagBboxWidth / 2 + PX},${ly - h2 - PY}\n      ${commitPosition.posWithOffset + maxTagBboxWidth / 2 + PX},${ly + h2 + PY}\n      ${commitPosition.posWithOffset - maxTagBboxWidth / 2 - PX},${ly + h2 + PY}`\n      );\n      hole.attr(\"cy\", ly).attr(\"cx\", pos - maxTagBboxWidth / 2 + PX / 2).attr(\"r\", 1.5).attr(\"class\", \"tag-hole\");\n      if (dir === \"TB\" || dir === \"BT\") {\n        const yOrigin = pos + yOffset2;\n        rect.attr(\"class\", \"tag-label-bkg\").attr(\n          \"points\",\n          `\n        ${commitPosition.x},${yOrigin + 2}\n        ${commitPosition.x},${yOrigin - 2}\n        ${commitPosition.x + LAYOUT_OFFSET},${yOrigin - h2 - 2}\n        ${commitPosition.x + LAYOUT_OFFSET + maxTagBboxWidth + 4},${yOrigin - h2 - 2}\n        ${commitPosition.x + LAYOUT_OFFSET + maxTagBboxWidth + 4},${yOrigin + h2 + 2}\n        ${commitPosition.x + LAYOUT_OFFSET},${yOrigin + h2 + 2}`\n        ).attr(\"transform\", \"translate(12,12) rotate(45, \" + commitPosition.x + \",\" + pos + \")\");\n        hole.attr(\"cx\", commitPosition.x + PX / 2).attr(\"cy\", yOrigin).attr(\"transform\", \"translate(12,12) rotate(45, \" + commitPosition.x + \",\" + pos + \")\");\n        tag.attr(\"x\", commitPosition.x + 5).attr(\"y\", yOrigin + 3).attr(\"transform\", \"translate(14,14) rotate(45, \" + commitPosition.x + \",\" + pos + \")\");\n      }\n    }\n  }\n}, \"drawCommitTags\");\nvar getCommitClassType = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((commit2) => {\n  const commitSymbolType = commit2.customType ?? commit2.type;\n  switch (commitSymbolType) {\n    case commitType.NORMAL:\n      return \"commit-normal\";\n    case commitType.REVERSE:\n      return \"commit-reverse\";\n    case commitType.HIGHLIGHT:\n      return \"commit-highlight\";\n    case commitType.MERGE:\n      return \"commit-merge\";\n    case commitType.CHERRY_PICK:\n      return \"commit-cherry-pick\";\n    default:\n      return \"commit-normal\";\n  }\n}, \"getCommitClassType\");\nvar calculatePosition = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((commit2, dir2, pos, commitPos2) => {\n  const defaultCommitPosition = { x: 0, y: 0 };\n  if (commit2.parents.length > 0) {\n    const closestParent = findClosestParent(commit2.parents);\n    if (closestParent) {\n      const parentPosition = commitPos2.get(closestParent) ?? defaultCommitPosition;\n      if (dir2 === \"TB\") {\n        return parentPosition.y + COMMIT_STEP;\n      } else if (dir2 === \"BT\") {\n        const currentPosition = commitPos2.get(commit2.id) ?? defaultCommitPosition;\n        return currentPosition.y - COMMIT_STEP;\n      } else {\n        return parentPosition.x + COMMIT_STEP;\n      }\n    }\n  } else {\n    if (dir2 === \"TB\") {\n      return defaultPos;\n    } else if (dir2 === \"BT\") {\n      const currentPosition = commitPos2.get(commit2.id) ?? defaultCommitPosition;\n      return currentPosition.y - COMMIT_STEP;\n    } else {\n      return 0;\n    }\n  }\n  return 0;\n}, \"calculatePosition\");\nvar getCommitPosition = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((commit2, pos, isParallelCommits) => {\n  const posWithOffset = dir === \"BT\" && isParallelCommits ? pos : pos + LAYOUT_OFFSET;\n  const y = dir === \"TB\" || dir === \"BT\" ? posWithOffset : branchPos.get(commit2.branch)?.pos;\n  const x = dir === \"TB\" || dir === \"BT\" ? branchPos.get(commit2.branch)?.pos : posWithOffset;\n  if (x === void 0 || y === void 0) {\n    throw new Error(`Position were undefined for commit ${commit2.id}`);\n  }\n  return { x, y, posWithOffset };\n}, \"getCommitPosition\");\nvar drawCommits = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((svg, commits, modifyGraph) => {\n  if (!DEFAULT_GITGRAPH_CONFIG2) {\n    throw new Error(\"GitGraph config not found\");\n  }\n  const gBullets = svg.append(\"g\").attr(\"class\", \"commit-bullets\");\n  const gLabels = svg.append(\"g\").attr(\"class\", \"commit-labels\");\n  let pos = dir === \"TB\" || dir === \"BT\" ? defaultPos : 0;\n  const keys = [...commits.keys()];\n  const isParallelCommits = DEFAULT_GITGRAPH_CONFIG2?.parallelCommits ?? false;\n  const sortKeys = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((a, b) => {\n    const seqA = commits.get(a)?.seq;\n    const seqB = commits.get(b)?.seq;\n    return seqA !== void 0 && seqB !== void 0 ? seqA - seqB : 0;\n  }, \"sortKeys\");\n  let sortedKeys = keys.sort(sortKeys);\n  if (dir === \"BT\") {\n    if (isParallelCommits) {\n      setParallelBTPos(sortedKeys, commits, pos);\n    }\n    sortedKeys = sortedKeys.reverse();\n  }\n  sortedKeys.forEach((key) => {\n    const commit2 = commits.get(key);\n    if (!commit2) {\n      throw new Error(`Commit not found for key ${key}`);\n    }\n    if (isParallelCommits) {\n      pos = calculatePosition(commit2, dir, pos, commitPos);\n    }\n    const commitPosition = getCommitPosition(commit2, pos, isParallelCommits);\n    if (modifyGraph) {\n      const typeClass = getCommitClassType(commit2);\n      const commitSymbolType = commit2.customType ?? commit2.type;\n      const branchIndex = branchPos.get(commit2.branch)?.index ?? 0;\n      drawCommitBullet(gBullets, commit2, commitPosition, typeClass, branchIndex, commitSymbolType);\n      drawCommitLabel(gLabels, commit2, commitPosition, pos);\n      drawCommitTags(gLabels, commit2, commitPosition, pos);\n    }\n    if (dir === \"TB\" || dir === \"BT\") {\n      commitPos.set(commit2.id, { x: commitPosition.x, y: commitPosition.posWithOffset });\n    } else {\n      commitPos.set(commit2.id, { x: commitPosition.posWithOffset, y: commitPosition.y });\n    }\n    pos = dir === \"BT\" && isParallelCommits ? pos + COMMIT_STEP : pos + COMMIT_STEP + LAYOUT_OFFSET;\n    if (pos > maxPos) {\n      maxPos = pos;\n    }\n  });\n}, \"drawCommits\");\nvar shouldRerouteArrow = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((commitA, commitB, p1, p2, allCommits) => {\n  const commitBIsFurthest = dir === \"TB\" || dir === \"BT\" ? p1.x < p2.x : p1.y < p2.y;\n  const branchToGetCurve = commitBIsFurthest ? commitB.branch : commitA.branch;\n  const isOnBranchToGetCurve = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((x) => x.branch === branchToGetCurve, \"isOnBranchToGetCurve\");\n  const isBetweenCommits = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((x) => x.seq > commitA.seq && x.seq < commitB.seq, \"isBetweenCommits\");\n  return [...allCommits.values()].some((commitX) => {\n    return isBetweenCommits(commitX) && isOnBranchToGetCurve(commitX);\n  });\n}, \"shouldRerouteArrow\");\nvar findLane = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((y1, y2, depth = 0) => {\n  const candidate = y1 + Math.abs(y1 - y2) / 2;\n  if (depth > 5) {\n    return candidate;\n  }\n  const ok = lanes.every((lane) => Math.abs(lane - candidate) >= 10);\n  if (ok) {\n    lanes.push(candidate);\n    return candidate;\n  }\n  const diff = Math.abs(y1 - y2);\n  return findLane(y1, y2 - diff / 5, depth + 1);\n}, \"findLane\");\nvar drawArrow = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((svg, commitA, commitB, allCommits) => {\n  const p1 = commitPos.get(commitA.id);\n  const p2 = commitPos.get(commitB.id);\n  if (p1 === void 0 || p2 === void 0) {\n    throw new Error(`Commit positions not found for commits ${commitA.id} and ${commitB.id}`);\n  }\n  const arrowNeedsRerouting = shouldRerouteArrow(commitA, commitB, p1, p2, allCommits);\n  let arc = \"\";\n  let arc2 = \"\";\n  let radius = 0;\n  let offset = 0;\n  let colorClassNum = branchPos.get(commitB.branch)?.index;\n  if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n    colorClassNum = branchPos.get(commitA.branch)?.index;\n  }\n  let lineDef;\n  if (arrowNeedsRerouting) {\n    arc = \"A 10 10, 0, 0, 0,\";\n    arc2 = \"A 10 10, 0, 0, 1,\";\n    radius = 10;\n    offset = 10;\n    const lineY = p1.y < p2.y ? findLane(p1.y, p2.y) : findLane(p2.y, p1.y);\n    const lineX = p1.x < p2.x ? findLane(p1.x, p2.x) : findLane(p2.x, p1.x);\n    if (dir === \"TB\") {\n      if (p1.x < p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX - radius} ${p1.y} ${arc2} ${lineX} ${p1.y + offset} L ${lineX} ${p2.y - radius} ${arc} ${lineX + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      } else {\n        colorClassNum = branchPos.get(commitA.branch)?.index;\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX + radius} ${p1.y} ${arc} ${lineX} ${p1.y + offset} L ${lineX} ${p2.y - radius} ${arc2} ${lineX - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      }\n    } else if (dir === \"BT\") {\n      if (p1.x < p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX - radius} ${p1.y} ${arc} ${lineX} ${p1.y - offset} L ${lineX} ${p2.y + radius} ${arc2} ${lineX + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      } else {\n        colorClassNum = branchPos.get(commitA.branch)?.index;\n        lineDef = `M ${p1.x} ${p1.y} L ${lineX + radius} ${p1.y} ${arc2} ${lineX} ${p1.y - offset} L ${lineX} ${p2.y + radius} ${arc} ${lineX - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n      }\n    } else {\n      if (p1.y < p2.y) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${lineY - radius} ${arc} ${p1.x + offset} ${lineY} L ${p2.x - radius} ${lineY} ${arc2} ${p2.x} ${lineY + offset} L ${p2.x} ${p2.y}`;\n      } else {\n        colorClassNum = branchPos.get(commitA.branch)?.index;\n        lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${lineY + radius} ${arc2} ${p1.x + offset} ${lineY} L ${p2.x - radius} ${lineY} ${arc} ${p2.x} ${lineY - offset} L ${p2.x} ${p2.y}`;\n      }\n    }\n  } else {\n    arc = \"A 20 20, 0, 0, 0,\";\n    arc2 = \"A 20 20, 0, 0, 1,\";\n    radius = 20;\n    offset = 20;\n    if (dir === \"TB\") {\n      if (p1.x < p2.x) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc2} ${p2.x} ${p1.y + offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x > p2.x) {\n        arc = \"A 20 20, 0, 0, 0,\";\n        arc2 = \"A 20 20, 0, 0, 1,\";\n        radius = 20;\n        offset = 20;\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc2} ${p1.x - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x + radius} ${p1.y} ${arc} ${p2.x} ${p1.y + offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x === p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      }\n    } else if (dir === \"BT\") {\n      if (p1.x < p2.x) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y + radius} ${arc2} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x > p2.x) {\n        arc = \"A 20 20, 0, 0, 0,\";\n        arc2 = \"A 20 20, 0, 0, 1,\";\n        radius = 20;\n        offset = 20;\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y + radius} ${arc} ${p1.x - offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.x === p2.x) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      }\n    } else {\n      if (p1.y < p2.y) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc2} ${p2.x} ${p1.y + offset} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y - radius} ${arc} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.y > p2.y) {\n        if (commitB.type === commitType.MERGE && commitA.id !== commitB.parents[0]) {\n          lineDef = `M ${p1.x} ${p1.y} L ${p2.x - radius} ${p1.y} ${arc} ${p2.x} ${p1.y - offset} L ${p2.x} ${p2.y}`;\n        } else {\n          lineDef = `M ${p1.x} ${p1.y} L ${p1.x} ${p2.y + radius} ${arc2} ${p1.x + offset} ${p2.y} L ${p2.x} ${p2.y}`;\n        }\n      }\n      if (p1.y === p2.y) {\n        lineDef = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      }\n    }\n  }\n  if (lineDef === void 0) {\n    throw new Error(\"Line definition not found\");\n  }\n  svg.append(\"path\").attr(\"d\", lineDef).attr(\"class\", \"arrow arrow\" + colorClassNum % THEME_COLOR_LIMIT);\n}, \"drawArrow\");\nvar drawArrows = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((svg, commits) => {\n  const gArrows = svg.append(\"g\").attr(\"class\", \"commit-arrows\");\n  [...commits.keys()].forEach((key) => {\n    const commit2 = commits.get(key);\n    if (commit2.parents && commit2.parents.length > 0) {\n      commit2.parents.forEach((parent) => {\n        drawArrow(gArrows, commits.get(parent), commit2, commits);\n      });\n    }\n  });\n}, \"drawArrows\");\nvar drawBranches = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((svg, branches) => {\n  const g = svg.append(\"g\");\n  branches.forEach((branch2, index) => {\n    const adjustIndexForTheme = index % THEME_COLOR_LIMIT;\n    const pos = branchPos.get(branch2.name)?.pos;\n    if (pos === void 0) {\n      throw new Error(`Position not found for branch ${branch2.name}`);\n    }\n    const line = g.append(\"line\");\n    line.attr(\"x1\", 0);\n    line.attr(\"y1\", pos);\n    line.attr(\"x2\", maxPos);\n    line.attr(\"y2\", pos);\n    line.attr(\"class\", \"branch branch\" + adjustIndexForTheme);\n    if (dir === \"TB\") {\n      line.attr(\"y1\", defaultPos);\n      line.attr(\"x1\", pos);\n      line.attr(\"y2\", maxPos);\n      line.attr(\"x2\", pos);\n    } else if (dir === \"BT\") {\n      line.attr(\"y1\", maxPos);\n      line.attr(\"x1\", pos);\n      line.attr(\"y2\", defaultPos);\n      line.attr(\"x2\", pos);\n    }\n    lanes.push(pos);\n    const name = branch2.name;\n    const labelElement = drawText(name);\n    const bkg = g.insert(\"rect\");\n    const branchLabel = g.insert(\"g\").attr(\"class\", \"branchLabel\");\n    const label = branchLabel.insert(\"g\").attr(\"class\", \"label branch-label\" + adjustIndexForTheme);\n    label.node().appendChild(labelElement);\n    const bbox = labelElement.getBBox();\n    bkg.attr(\"class\", \"branchLabelBkg label\" + adjustIndexForTheme).attr(\"rx\", 4).attr(\"ry\", 4).attr(\"x\", -bbox.width - 4 - (DEFAULT_GITGRAPH_CONFIG2?.rotateCommitLabel === true ? 30 : 0)).attr(\"y\", -bbox.height / 2 + 8).attr(\"width\", bbox.width + 18).attr(\"height\", bbox.height + 4);\n    label.attr(\n      \"transform\",\n      \"translate(\" + (-bbox.width - 14 - (DEFAULT_GITGRAPH_CONFIG2?.rotateCommitLabel === true ? 30 : 0)) + \", \" + (pos - bbox.height / 2 - 1) + \")\"\n    );\n    if (dir === \"TB\") {\n      bkg.attr(\"x\", pos - bbox.width / 2 - 10).attr(\"y\", 0);\n      label.attr(\"transform\", \"translate(\" + (pos - bbox.width / 2 - 5) + \", 0)\");\n    } else if (dir === \"BT\") {\n      bkg.attr(\"x\", pos - bbox.width / 2 - 10).attr(\"y\", maxPos);\n      label.attr(\"transform\", \"translate(\" + (pos - bbox.width / 2 - 5) + \", \" + maxPos + \")\");\n    } else {\n      bkg.attr(\"transform\", \"translate(-19, \" + (pos - bbox.height / 2) + \")\");\n    }\n  });\n}, \"drawBranches\");\nvar setBranchPosition = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function(name, pos, index, bbox, rotateCommitLabel) {\n  branchPos.set(name, { pos, index });\n  pos += 50 + (rotateCommitLabel ? 40 : 0) + (dir === \"TB\" || dir === \"BT\" ? bbox.width / 2 : 0);\n  return pos;\n}, \"setBranchPosition\");\nvar draw = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(function(txt, id, ver, diagObj) {\n  clear3();\n  _chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.log.debug(\"in gitgraph renderer\", txt + \"\\n\", \"id:\", id, ver);\n  if (!DEFAULT_GITGRAPH_CONFIG2) {\n    throw new Error(\"GitGraph config not found\");\n  }\n  const rotateCommitLabel = DEFAULT_GITGRAPH_CONFIG2.rotateCommitLabel ?? false;\n  const db2 = diagObj.db;\n  allCommitsDict = db2.getCommits();\n  const branches = db2.getBranchesAsObjArray();\n  dir = db2.getDirection();\n  const diagram2 = (0,d3__WEBPACK_IMPORTED_MODULE_5__.select)(`[id=\"${id}\"]`);\n  let pos = 0;\n  branches.forEach((branch2, index) => {\n    const labelElement = drawText(branch2.name);\n    const g = diagram2.append(\"g\");\n    const branchLabel = g.insert(\"g\").attr(\"class\", \"branchLabel\");\n    const label = branchLabel.insert(\"g\").attr(\"class\", \"label branch-label\");\n    label.node()?.appendChild(labelElement);\n    const bbox = labelElement.getBBox();\n    pos = setBranchPosition(branch2.name, pos, index, bbox, rotateCommitLabel);\n    label.remove();\n    branchLabel.remove();\n    g.remove();\n  });\n  drawCommits(diagram2, allCommitsDict, false);\n  if (DEFAULT_GITGRAPH_CONFIG2.showBranches) {\n    drawBranches(diagram2, branches);\n  }\n  drawArrows(diagram2, allCommitsDict);\n  drawCommits(diagram2, allCommitsDict, true);\n  _chunk_O4NI6UNU_mjs__WEBPACK_IMPORTED_MODULE_2__.utils_default.insertTitle(\n    diagram2,\n    \"gitTitleText\",\n    DEFAULT_GITGRAPH_CONFIG2.titleTopMargin ?? 0,\n    db2.getDiagramTitle()\n  );\n  (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.setupGraphViewbox2)(\n    void 0,\n    diagram2,\n    DEFAULT_GITGRAPH_CONFIG2.diagramPadding,\n    DEFAULT_GITGRAPH_CONFIG2.useMaxWidth\n  );\n}, \"draw\");\nvar gitGraphRenderer_default = {\n  draw\n};\nif (void 0) {\n  const { it, expect, describe } = void 0;\n  describe(\"drawText\", () => {\n    it(\"should drawText\", () => {\n      const svgLabel = drawText(\"main\");\n      expect(svgLabel).toBeDefined();\n      expect(svgLabel.children[0].innerHTML).toBe(\"main\");\n    });\n  });\n  describe(\"branchPosition\", () => {\n    const bbox = {\n      x: 0,\n      y: 0,\n      width: 10,\n      height: 10,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      toJSON: /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)(() => \"\", \"toJSON\")\n    };\n    it(\"should setBranchPositions LR with two branches\", () => {\n      dir = \"LR\";\n      const pos = setBranchPosition(\"main\", 0, 0, bbox, true);\n      expect(pos).toBe(90);\n      expect(branchPos.get(\"main\")).toEqual({ pos: 0, index: 0 });\n      const posNext = setBranchPosition(\"develop\", pos, 1, bbox, true);\n      expect(posNext).toBe(180);\n      expect(branchPos.get(\"develop\")).toEqual({ pos, index: 1 });\n    });\n    it(\"should setBranchPositions TB with two branches\", () => {\n      dir = \"TB\";\n      bbox.width = 34.9921875;\n      const pos = setBranchPosition(\"main\", 0, 0, bbox, true);\n      expect(pos).toBe(107.49609375);\n      expect(branchPos.get(\"main\")).toEqual({ pos: 0, index: 0 });\n      bbox.width = 56.421875;\n      const posNext = setBranchPosition(\"develop\", pos, 1, bbox, true);\n      expect(posNext).toBe(225.70703125);\n      expect(branchPos.get(\"develop\")).toEqual({ pos, index: 1 });\n    });\n  });\n  describe(\"commitPosition\", () => {\n    const commits = /* @__PURE__ */ new Map([\n      [\n        \"commitZero\",\n        {\n          id: \"ZERO\",\n          message: \"\",\n          seq: 0,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [],\n          branch: \"main\"\n        }\n      ],\n      [\n        \"commitA\",\n        {\n          id: \"A\",\n          message: \"\",\n          seq: 1,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [\"ZERO\"],\n          branch: \"feature\"\n        }\n      ],\n      [\n        \"commitB\",\n        {\n          id: \"B\",\n          message: \"\",\n          seq: 2,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [\"A\"],\n          branch: \"feature\"\n        }\n      ],\n      [\n        \"commitM\",\n        {\n          id: \"M\",\n          message: \"merged branch feature into main\",\n          seq: 3,\n          type: commitType.MERGE,\n          tags: [],\n          parents: [\"ZERO\", \"B\"],\n          branch: \"main\",\n          customId: true\n        }\n      ],\n      [\n        \"commitC\",\n        {\n          id: \"C\",\n          message: \"\",\n          seq: 4,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [\"ZERO\"],\n          branch: \"release\"\n        }\n      ],\n      [\n        \"commit5_8928ea0\",\n        {\n          id: \"5-8928ea0\",\n          message: \"cherry-picked [object Object] into release\",\n          seq: 5,\n          type: commitType.CHERRY_PICK,\n          tags: [],\n          parents: [\"C\", \"M\"],\n          branch: \"release\"\n        }\n      ],\n      [\n        \"commitD\",\n        {\n          id: \"D\",\n          message: \"\",\n          seq: 6,\n          type: commitType.NORMAL,\n          tags: [],\n          parents: [\"5-8928ea0\"],\n          branch: \"release\"\n        }\n      ],\n      [\n        \"commit7_ed848ba\",\n        {\n          id: \"7-ed848ba\",\n          message: \"cherry-picked [object Object] into release\",\n          seq: 7,\n          type: commitType.CHERRY_PICK,\n          tags: [],\n          parents: [\"D\", \"M\"],\n          branch: \"release\"\n        }\n      ]\n    ]);\n    let pos = 0;\n    branchPos.set(\"main\", { pos: 0, index: 0 });\n    branchPos.set(\"feature\", { pos: 107.49609375, index: 1 });\n    branchPos.set(\"release\", { pos: 224.03515625, index: 2 });\n    describe(\"TB\", () => {\n      pos = 30;\n      dir = \"TB\";\n      const expectedCommitPositionTB = /* @__PURE__ */ new Map([\n        [\"commitZero\", { x: 0, y: 40, posWithOffset: 40 }],\n        [\"commitA\", { x: 107.49609375, y: 90, posWithOffset: 90 }],\n        [\"commitB\", { x: 107.49609375, y: 140, posWithOffset: 140 }],\n        [\"commitM\", { x: 0, y: 190, posWithOffset: 190 }],\n        [\"commitC\", { x: 224.03515625, y: 240, posWithOffset: 240 }],\n        [\"commit5_8928ea0\", { x: 224.03515625, y: 290, posWithOffset: 290 }],\n        [\"commitD\", { x: 224.03515625, y: 340, posWithOffset: 340 }],\n        [\"commit7_ed848ba\", { x: 224.03515625, y: 390, posWithOffset: 390 }]\n      ]);\n      commits.forEach((commit2, key) => {\n        it(`should give the correct position for commit ${key}`, () => {\n          const position = getCommitPosition(commit2, pos, false);\n          expect(position).toEqual(expectedCommitPositionTB.get(key));\n          pos += 50;\n        });\n      });\n    });\n    describe(\"LR\", () => {\n      let pos2 = 30;\n      dir = \"LR\";\n      const expectedCommitPositionLR = /* @__PURE__ */ new Map([\n        [\"commitZero\", { x: 0, y: 40, posWithOffset: 40 }],\n        [\"commitA\", { x: 107.49609375, y: 90, posWithOffset: 90 }],\n        [\"commitB\", { x: 107.49609375, y: 140, posWithOffset: 140 }],\n        [\"commitM\", { x: 0, y: 190, posWithOffset: 190 }],\n        [\"commitC\", { x: 224.03515625, y: 240, posWithOffset: 240 }],\n        [\"commit5_8928ea0\", { x: 224.03515625, y: 290, posWithOffset: 290 }],\n        [\"commitD\", { x: 224.03515625, y: 340, posWithOffset: 340 }],\n        [\"commit7_ed848ba\", { x: 224.03515625, y: 390, posWithOffset: 390 }]\n      ]);\n      commits.forEach((commit2, key) => {\n        it(`should give the correct position for commit ${key}`, () => {\n          const position = getCommitPosition(commit2, pos2, false);\n          expect(position).toEqual(expectedCommitPositionLR.get(key));\n          pos2 += 50;\n        });\n      });\n    });\n    describe(\"getCommitClassType\", () => {\n      const expectedCommitClassType = /* @__PURE__ */ new Map([\n        [\"commitZero\", \"commit-normal\"],\n        [\"commitA\", \"commit-normal\"],\n        [\"commitB\", \"commit-normal\"],\n        [\"commitM\", \"commit-merge\"],\n        [\"commitC\", \"commit-normal\"],\n        [\"commit5_8928ea0\", \"commit-cherry-pick\"],\n        [\"commitD\", \"commit-normal\"],\n        [\"commit7_ed848ba\", \"commit-cherry-pick\"]\n      ]);\n      commits.forEach((commit2, key) => {\n        it(`should give the correct class type for commit ${key}`, () => {\n          const classType = getCommitClassType(commit2);\n          expect(classType).toBe(expectedCommitClassType.get(key));\n        });\n      });\n    });\n  });\n  describe(\"building BT parallel commit diagram\", () => {\n    const commits = /* @__PURE__ */ new Map([\n      [\n        \"1-abcdefg\",\n        {\n          id: \"1-abcdefg\",\n          message: \"\",\n          seq: 0,\n          type: 0,\n          tags: [],\n          parents: [],\n          branch: \"main\"\n        }\n      ],\n      [\n        \"2-abcdefg\",\n        {\n          id: \"2-abcdefg\",\n          message: \"\",\n          seq: 1,\n          type: 0,\n          tags: [],\n          parents: [\"1-abcdefg\"],\n          branch: \"main\"\n        }\n      ],\n      [\n        \"3-abcdefg\",\n        {\n          id: \"3-abcdefg\",\n          message: \"\",\n          seq: 2,\n          type: 0,\n          tags: [],\n          parents: [\"2-abcdefg\"],\n          branch: \"develop\"\n        }\n      ],\n      [\n        \"4-abcdefg\",\n        {\n          id: \"4-abcdefg\",\n          message: \"\",\n          seq: 3,\n          type: 0,\n          tags: [],\n          parents: [\"3-abcdefg\"],\n          branch: \"develop\"\n        }\n      ],\n      [\n        \"5-abcdefg\",\n        {\n          id: \"5-abcdefg\",\n          message: \"\",\n          seq: 4,\n          type: 0,\n          tags: [],\n          parents: [\"2-abcdefg\"],\n          branch: \"feature\"\n        }\n      ],\n      [\n        \"6-abcdefg\",\n        {\n          id: \"6-abcdefg\",\n          message: \"\",\n          seq: 5,\n          type: 0,\n          tags: [],\n          parents: [\"5-abcdefg\"],\n          branch: \"feature\"\n        }\n      ],\n      [\n        \"7-abcdefg\",\n        {\n          id: \"7-abcdefg\",\n          message: \"\",\n          seq: 6,\n          type: 0,\n          tags: [],\n          parents: [\"2-abcdefg\"],\n          branch: \"main\"\n        }\n      ],\n      [\n        \"8-abcdefg\",\n        {\n          id: \"8-abcdefg\",\n          message: \"\",\n          seq: 7,\n          type: 0,\n          tags: [],\n          parents: [\"7-abcdefg\"],\n          branch: \"main\"\n        }\n      ]\n    ]);\n    const expectedCommitPosition = /* @__PURE__ */ new Map([\n      [\"1-abcdefg\", { x: 0, y: 40 }],\n      [\"2-abcdefg\", { x: 0, y: 90 }],\n      [\"3-abcdefg\", { x: 107.49609375, y: 140 }],\n      [\"4-abcdefg\", { x: 107.49609375, y: 190 }],\n      [\"5-abcdefg\", { x: 225.70703125, y: 140 }],\n      [\"6-abcdefg\", { x: 225.70703125, y: 190 }],\n      [\"7-abcdefg\", { x: 0, y: 140 }],\n      [\"8-abcdefg\", { x: 0, y: 190 }]\n    ]);\n    const expectedCommitPositionAfterParallel = /* @__PURE__ */ new Map([\n      [\"1-abcdefg\", { x: 0, y: 210 }],\n      [\"2-abcdefg\", { x: 0, y: 160 }],\n      [\"3-abcdefg\", { x: 107.49609375, y: 110 }],\n      [\"4-abcdefg\", { x: 107.49609375, y: 60 }],\n      [\"5-abcdefg\", { x: 225.70703125, y: 110 }],\n      [\"6-abcdefg\", { x: 225.70703125, y: 60 }],\n      [\"7-abcdefg\", { x: 0, y: 110 }],\n      [\"8-abcdefg\", { x: 0, y: 60 }]\n    ]);\n    const expectedCommitCurrentPosition = /* @__PURE__ */ new Map([\n      [\"1-abcdefg\", 30],\n      [\"2-abcdefg\", 80],\n      [\"3-abcdefg\", 130],\n      [\"4-abcdefg\", 180],\n      [\"5-abcdefg\", 130],\n      [\"6-abcdefg\", 180],\n      [\"7-abcdefg\", 130],\n      [\"8-abcdefg\", 180]\n    ]);\n    const sortedKeys = [...expectedCommitPosition.keys()];\n    it(\"should get the correct commit position and current position\", () => {\n      dir = \"BT\";\n      let curPos = 30;\n      commitPos.clear();\n      branchPos.clear();\n      branchPos.set(\"main\", { pos: 0, index: 0 });\n      branchPos.set(\"develop\", { pos: 107.49609375, index: 1 });\n      branchPos.set(\"feature\", { pos: 225.70703125, index: 2 });\n      DEFAULT_GITGRAPH_CONFIG2.parallelCommits = true;\n      commits.forEach((commit2, key) => {\n        if (commit2.parents.length > 0) {\n          curPos = calculateCommitPosition(commit2);\n        }\n        const position = setCommitPosition(commit2, curPos);\n        expect(position).toEqual(expectedCommitPosition.get(key));\n        expect(curPos).toEqual(expectedCommitCurrentPosition.get(key));\n      });\n    });\n    it(\"should get the correct commit position after parallel commits\", () => {\n      commitPos.clear();\n      branchPos.clear();\n      dir = \"BT\";\n      const curPos = 30;\n      commitPos.clear();\n      branchPos.clear();\n      branchPos.set(\"main\", { pos: 0, index: 0 });\n      branchPos.set(\"develop\", { pos: 107.49609375, index: 1 });\n      branchPos.set(\"feature\", { pos: 225.70703125, index: 2 });\n      setParallelBTPos(sortedKeys, commits, curPos);\n      sortedKeys.forEach((commit2) => {\n        const position = commitPos.get(commit2);\n        expect(position).toEqual(expectedCommitPositionAfterParallel.get(commit2));\n      });\n    });\n  });\n  DEFAULT_GITGRAPH_CONFIG2.parallelCommits = false;\n  it(\"add\", () => {\n    commitPos.set(\"parent1\", { x: 1, y: 1 });\n    commitPos.set(\"parent2\", { x: 2, y: 2 });\n    commitPos.set(\"parent3\", { x: 3, y: 3 });\n    dir = \"LR\";\n    const parents = [\"parent1\", \"parent2\", \"parent3\"];\n    const closestParent = findClosestParent(parents);\n    expect(closestParent).toBe(\"parent3\");\n    commitPos.clear();\n  });\n}\n\n// src/diagrams/git/styles.js\nvar getStyles = /* @__PURE__ */ (0,_chunk_YTJNT7DU_mjs__WEBPACK_IMPORTED_MODULE_3__.__name)((options) => `\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0, 1, 2, 3, 4, 5, 6, 7].map(\n  (i) => `\n        .branch-label${i} { fill: ${options[\"gitBranchLabel\" + i]}; }\n        .commit${i} { stroke: ${options[\"git\" + i]}; fill: ${options[\"git\" + i]}; }\n        .commit-highlight${i} { stroke: ${options[\"gitInv\" + i]}; fill: ${options[\"gitInv\" + i]}; }\n        .label${i}  { fill: ${options[\"git\" + i]}; }\n        .arrow${i} { stroke: ${options[\"git\" + i]}; }\n        `\n).join(\"\\n\")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${options.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${options.commitLabelFontSize}; fill: ${options.commitLabelColor};}\n  .commit-label-bkg { font-size: ${options.commitLabelFontSize}; fill: ${options.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${options.tagLabelFontSize}; fill: ${options.tagLabelColor};}\n  .tag-label-bkg { fill: ${options.tagLabelBackground}; stroke: ${options.tagLabelBorder}; }\n  .tag-hole { fill: ${options.textColor}; }\n\n  .commit-merge {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${options.primaryColor};\n    fill: ${options.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options.textColor};\n  }\n`, \"getStyles\");\nvar styles_default = getStyles;\n\n// src/diagrams/git/gitGraphDiagram.ts\nvar diagram = {\n  parser,\n  db,\n  renderer: gitGraphRenderer_default,\n  styles: styles_default\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NodW5rcy9tZXJtYWlkLmNvcmUvZ2l0R3JhcGhEaWFncmFtLTdJQllGSjZTLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBRUE7QUFHQTtBQUtBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yYWJiaXRtcS13ZWJzaXRlLy4vbm9kZV9tb2R1bGVzL21lcm1haWQvZGlzdC9jaHVua3MvbWVybWFpZC5jb3JlL2dpdEdyYXBoRGlhZ3JhbS03SUJZRko2Uy5tanM/MWRkZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBwb3B1bGF0ZUNvbW1vbkRiXG59IGZyb20gXCIuL2NodW5rLTRCTUVaR0hGLm1qc1wiO1xuaW1wb3J0IHtcbiAgSW1wZXJhdGl2ZVN0YXRlXG59IGZyb20gXCIuL2NodW5rLVhaSUhCN1NYLm1qc1wiO1xuaW1wb3J0IHtcbiAgY2xlYW5BbmRNZXJnZSxcbiAgcmFuZG9tLFxuICB1dGlsc19kZWZhdWx0XG59IGZyb20gXCIuL2NodW5rLU80Tkk2VU5VLm1qc1wiO1xuaW1wb3J0IHtcbiAgX19uYW1lLFxuICBjbGVhcixcbiAgY29tbW9uX2RlZmF1bHQsXG4gIGRlZmF1bHRDb25maWdfZGVmYXVsdCxcbiAgZ2V0QWNjRGVzY3JpcHRpb24sXG4gIGdldEFjY1RpdGxlLFxuICBnZXRDb25maWcsXG4gIGdldENvbmZpZzIsXG4gIGdldERpYWdyYW1UaXRsZSxcbiAgbG9nLFxuICBzZXRBY2NEZXNjcmlwdGlvbixcbiAgc2V0QWNjVGl0bGUsXG4gIHNldERpYWdyYW1UaXRsZSxcbiAgc2V0dXBHcmFwaFZpZXdib3gyIGFzIHNldHVwR3JhcGhWaWV3Ym94XG59IGZyb20gXCIuL2NodW5rLVlUSk5UN0RVLm1qc1wiO1xuXG4vLyBzcmMvZGlhZ3JhbXMvZ2l0L2dpdEdyYXBoUGFyc2VyLnRzXG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gXCJAbWVybWFpZC1qcy9wYXJzZXJcIjtcblxuLy8gc3JjL2RpYWdyYW1zL2dpdC9naXRHcmFwaFR5cGVzLnRzXG52YXIgY29tbWl0VHlwZSA9IHtcbiAgTk9STUFMOiAwLFxuICBSRVZFUlNFOiAxLFxuICBISUdITElHSFQ6IDIsXG4gIE1FUkdFOiAzLFxuICBDSEVSUllfUElDSzogNFxufTtcblxuLy8gc3JjL2RpYWdyYW1zL2dpdC9naXRHcmFwaEFzdC50c1xudmFyIERFRkFVTFRfR0lUR1JBUEhfQ09ORklHID0gZGVmYXVsdENvbmZpZ19kZWZhdWx0LmdpdEdyYXBoO1xudmFyIGdldENvbmZpZzMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgY29uc3QgY29uZmlnID0gY2xlYW5BbmRNZXJnZSh7XG4gICAgLi4uREVGQVVMVF9HSVRHUkFQSF9DT05GSUcsXG4gICAgLi4uZ2V0Q29uZmlnKCkuZ2l0R3JhcGhcbiAgfSk7XG4gIHJldHVybiBjb25maWc7XG59LCBcImdldENvbmZpZ1wiKTtcbnZhciBzdGF0ZSA9IG5ldyBJbXBlcmF0aXZlU3RhdGUoKCkgPT4ge1xuICBjb25zdCBjb25maWcgPSBnZXRDb25maWczKCk7XG4gIGNvbnN0IG1haW5CcmFuY2hOYW1lID0gY29uZmlnLm1haW5CcmFuY2hOYW1lO1xuICBjb25zdCBtYWluQnJhbmNoT3JkZXIgPSBjb25maWcubWFpbkJyYW5jaE9yZGVyO1xuICByZXR1cm4ge1xuICAgIG1haW5CcmFuY2hOYW1lLFxuICAgIGNvbW1pdHM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgaGVhZDogbnVsbCxcbiAgICBicmFuY2hDb25maWc6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKFtbbWFpbkJyYW5jaE5hbWUsIHsgbmFtZTogbWFpbkJyYW5jaE5hbWUsIG9yZGVyOiBtYWluQnJhbmNoT3JkZXIgfV1dKSxcbiAgICBicmFuY2hlczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1ttYWluQnJhbmNoTmFtZSwgbnVsbF1dKSxcbiAgICBjdXJyQnJhbmNoOiBtYWluQnJhbmNoTmFtZSxcbiAgICBkaXJlY3Rpb246IFwiTFJcIixcbiAgICBzZXE6IDAsXG4gICAgb3B0aW9uczoge31cbiAgfTtcbn0pO1xuZnVuY3Rpb24gZ2V0SUQoKSB7XG4gIHJldHVybiByYW5kb20oeyBsZW5ndGg6IDcgfSk7XG59XG5fX25hbWUoZ2V0SUQsIFwiZ2V0SURcIik7XG5mdW5jdGlvbiB1bmlxQnkobGlzdCwgZm4pIHtcbiAgY29uc3QgcmVjb3JkTWFwID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHJldHVybiBsaXN0LnJlZHVjZSgob3V0LCBpdGVtKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gZm4oaXRlbSk7XG4gICAgaWYgKCFyZWNvcmRNYXBba2V5XSkge1xuICAgICAgcmVjb3JkTWFwW2tleV0gPSB0cnVlO1xuICAgICAgb3V0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH0sIFtdKTtcbn1cbl9fbmFtZSh1bmlxQnksIFwidW5pcUJ5XCIpO1xudmFyIHNldERpcmVjdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oZGlyMikge1xuICBzdGF0ZS5yZWNvcmRzLmRpcmVjdGlvbiA9IGRpcjI7XG59LCBcInNldERpcmVjdGlvblwiKTtcbnZhciBzZXRPcHRpb25zID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbihyYXdPcHRTdHJpbmcpIHtcbiAgbG9nLmRlYnVnKFwib3B0aW9ucyBzdHJcIiwgcmF3T3B0U3RyaW5nKTtcbiAgcmF3T3B0U3RyaW5nID0gcmF3T3B0U3RyaW5nPy50cmltKCk7XG4gIHJhd09wdFN0cmluZyA9IHJhd09wdFN0cmluZyB8fCBcInt9XCI7XG4gIHRyeSB7XG4gICAgc3RhdGUucmVjb3Jkcy5vcHRpb25zID0gSlNPTi5wYXJzZShyYXdPcHRTdHJpbmcpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nLmVycm9yKFwiZXJyb3Igd2hpbGUgcGFyc2luZyBnaXRHcmFwaCBvcHRpb25zXCIsIGUubWVzc2FnZSk7XG4gIH1cbn0sIFwic2V0T3B0aW9uc1wiKTtcbnZhciBnZXRPcHRpb25zID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHN0YXRlLnJlY29yZHMub3B0aW9ucztcbn0sIFwiZ2V0T3B0aW9uc1wiKTtcbnZhciBjb21taXQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKGNvbW1pdERCKSB7XG4gIGxldCBtc2cgPSBjb21taXREQi5tc2c7XG4gIGxldCBpZCA9IGNvbW1pdERCLmlkO1xuICBjb25zdCB0eXBlID0gY29tbWl0REIudHlwZTtcbiAgbGV0IHRhZ3MgPSBjb21taXREQi50YWdzO1xuICBsb2cuaW5mbyhcImNvbW1pdFwiLCBtc2csIGlkLCB0eXBlLCB0YWdzKTtcbiAgbG9nLmRlYnVnKFwiRW50ZXJpbmcgY29tbWl0OlwiLCBtc2csIGlkLCB0eXBlLCB0YWdzKTtcbiAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnMygpO1xuICBpZCA9IGNvbW1vbl9kZWZhdWx0LnNhbml0aXplVGV4dChpZCwgY29uZmlnKTtcbiAgbXNnID0gY29tbW9uX2RlZmF1bHQuc2FuaXRpemVUZXh0KG1zZywgY29uZmlnKTtcbiAgdGFncyA9IHRhZ3M/Lm1hcCgodGFnKSA9PiBjb21tb25fZGVmYXVsdC5zYW5pdGl6ZVRleHQodGFnLCBjb25maWcpKTtcbiAgY29uc3QgbmV3Q29tbWl0ID0ge1xuICAgIGlkOiBpZCA/IGlkIDogc3RhdGUucmVjb3Jkcy5zZXEgKyBcIi1cIiArIGdldElEKCksXG4gICAgbWVzc2FnZTogbXNnLFxuICAgIHNlcTogc3RhdGUucmVjb3Jkcy5zZXErKyxcbiAgICB0eXBlOiB0eXBlID8/IGNvbW1pdFR5cGUuTk9STUFMLFxuICAgIHRhZ3M6IHRhZ3MgPz8gW10sXG4gICAgcGFyZW50czogc3RhdGUucmVjb3Jkcy5oZWFkID09IG51bGwgPyBbXSA6IFtzdGF0ZS5yZWNvcmRzLmhlYWQuaWRdLFxuICAgIGJyYW5jaDogc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoXG4gIH07XG4gIHN0YXRlLnJlY29yZHMuaGVhZCA9IG5ld0NvbW1pdDtcbiAgbG9nLmluZm8oXCJtYWluIGJyYW5jaFwiLCBjb25maWcubWFpbkJyYW5jaE5hbWUpO1xuICBzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuc2V0KG5ld0NvbW1pdC5pZCwgbmV3Q29tbWl0KTtcbiAgc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5zZXQoc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoLCBuZXdDb21taXQuaWQpO1xuICBsb2cuZGVidWcoXCJpbiBwdXNoQ29tbWl0IFwiICsgbmV3Q29tbWl0LmlkKTtcbn0sIFwiY29tbWl0XCIpO1xudmFyIGJyYW5jaCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oYnJhbmNoREIpIHtcbiAgbGV0IG5hbWUgPSBicmFuY2hEQi5uYW1lO1xuICBjb25zdCBvcmRlciA9IGJyYW5jaERCLm9yZGVyO1xuICBuYW1lID0gY29tbW9uX2RlZmF1bHQuc2FuaXRpemVUZXh0KG5hbWUsIGdldENvbmZpZzMoKSk7XG4gIGlmIChzdGF0ZS5yZWNvcmRzLmJyYW5jaGVzLmhhcyhuYW1lKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUcnlpbmcgdG8gY3JlYXRlIGFuIGV4aXN0aW5nIGJyYW5jaC4gKEhlbHA6IEVpdGhlciB1c2UgYSBuZXcgbmFtZSBpZiB5b3Ugd2FudCBjcmVhdGUgYSBuZXcgYnJhbmNoIG9yIHRyeSB1c2luZyBcImNoZWNrb3V0ICR7bmFtZX1cIilgXG4gICAgKTtcbiAgfVxuICBzdGF0ZS5yZWNvcmRzLmJyYW5jaGVzLnNldChuYW1lLCBzdGF0ZS5yZWNvcmRzLmhlYWQgIT0gbnVsbCA/IHN0YXRlLnJlY29yZHMuaGVhZC5pZCA6IG51bGwpO1xuICBzdGF0ZS5yZWNvcmRzLmJyYW5jaENvbmZpZy5zZXQobmFtZSwgeyBuYW1lLCBvcmRlciB9KTtcbiAgY2hlY2tvdXQobmFtZSk7XG4gIGxvZy5kZWJ1ZyhcImluIGNyZWF0ZUJyYW5jaFwiKTtcbn0sIFwiYnJhbmNoXCIpO1xudmFyIG1lcmdlID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgobWVyZ2VEQikgPT4ge1xuICBsZXQgb3RoZXJCcmFuY2ggPSBtZXJnZURCLmJyYW5jaDtcbiAgbGV0IGN1c3RvbUlkID0gbWVyZ2VEQi5pZDtcbiAgY29uc3Qgb3ZlcnJpZGVUeXBlID0gbWVyZ2VEQi50eXBlO1xuICBjb25zdCBjdXN0b21UYWdzID0gbWVyZ2VEQi50YWdzO1xuICBjb25zdCBjb25maWcgPSBnZXRDb25maWczKCk7XG4gIG90aGVyQnJhbmNoID0gY29tbW9uX2RlZmF1bHQuc2FuaXRpemVUZXh0KG90aGVyQnJhbmNoLCBjb25maWcpO1xuICBpZiAoY3VzdG9tSWQpIHtcbiAgICBjdXN0b21JZCA9IGNvbW1vbl9kZWZhdWx0LnNhbml0aXplVGV4dChjdXN0b21JZCwgY29uZmlnKTtcbiAgfVxuICBjb25zdCBjdXJyZW50QnJhbmNoQ2hlY2sgPSBzdGF0ZS5yZWNvcmRzLmJyYW5jaGVzLmdldChzdGF0ZS5yZWNvcmRzLmN1cnJCcmFuY2gpO1xuICBjb25zdCBvdGhlckJyYW5jaENoZWNrID0gc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5nZXQob3RoZXJCcmFuY2gpO1xuICBjb25zdCBjdXJyZW50Q29tbWl0ID0gY3VycmVudEJyYW5jaENoZWNrID8gc3RhdGUucmVjb3Jkcy5jb21taXRzLmdldChjdXJyZW50QnJhbmNoQ2hlY2spIDogdm9pZCAwO1xuICBjb25zdCBvdGhlckNvbW1pdCA9IG90aGVyQnJhbmNoQ2hlY2sgPyBzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuZ2V0KG90aGVyQnJhbmNoQ2hlY2spIDogdm9pZCAwO1xuICBpZiAoY3VycmVudENvbW1pdCAmJiBvdGhlckNvbW1pdCAmJiBjdXJyZW50Q29tbWl0LmJyYW5jaCA9PT0gb3RoZXJCcmFuY2gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBtZXJnZSBicmFuY2ggJyR7b3RoZXJCcmFuY2h9JyBpbnRvIGl0c2VsZi5gKTtcbiAgfVxuICBpZiAoc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoID09PSBvdGhlckJyYW5jaCkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdJbmNvcnJlY3QgdXNhZ2Ugb2YgXCJtZXJnZVwiLiBDYW5ub3QgbWVyZ2UgYSBicmFuY2ggdG8gaXRzZWxmJyk7XG4gICAgZXJyb3IuaGFzaCA9IHtcbiAgICAgIHRleHQ6IGBtZXJnZSAke290aGVyQnJhbmNofWAsXG4gICAgICB0b2tlbjogYG1lcmdlICR7b3RoZXJCcmFuY2h9YCxcbiAgICAgIGV4cGVjdGVkOiBbXCJicmFuY2ggYWJjXCJdXG4gICAgfTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBpZiAoY3VycmVudENvbW1pdCA9PT0gdm9pZCAwIHx8ICFjdXJyZW50Q29tbWl0KSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICBgSW5jb3JyZWN0IHVzYWdlIG9mIFwibWVyZ2VcIi4gQ3VycmVudCBicmFuY2ggKCR7c3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNofSloYXMgbm8gY29tbWl0c2BcbiAgICApO1xuICAgIGVycm9yLmhhc2ggPSB7XG4gICAgICB0ZXh0OiBgbWVyZ2UgJHtvdGhlckJyYW5jaH1gLFxuICAgICAgdG9rZW46IGBtZXJnZSAke290aGVyQnJhbmNofWAsXG4gICAgICBleHBlY3RlZDogW1wiY29tbWl0XCJdXG4gICAgfTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBpZiAoIXN0YXRlLnJlY29yZHMuYnJhbmNoZXMuaGFzKG90aGVyQnJhbmNoKSkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgJ0luY29ycmVjdCB1c2FnZSBvZiBcIm1lcmdlXCIuIEJyYW5jaCB0byBiZSBtZXJnZWQgKCcgKyBvdGhlckJyYW5jaCArIFwiKSBkb2VzIG5vdCBleGlzdFwiXG4gICAgKTtcbiAgICBlcnJvci5oYXNoID0ge1xuICAgICAgdGV4dDogYG1lcmdlICR7b3RoZXJCcmFuY2h9YCxcbiAgICAgIHRva2VuOiBgbWVyZ2UgJHtvdGhlckJyYW5jaH1gLFxuICAgICAgZXhwZWN0ZWQ6IFtgYnJhbmNoICR7b3RoZXJCcmFuY2h9YF1cbiAgICB9O1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGlmIChvdGhlckNvbW1pdCA9PT0gdm9pZCAwIHx8ICFvdGhlckNvbW1pdCkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgJ0luY29ycmVjdCB1c2FnZSBvZiBcIm1lcmdlXCIuIEJyYW5jaCB0byBiZSBtZXJnZWQgKCcgKyBvdGhlckJyYW5jaCArIFwiKSBoYXMgbm8gY29tbWl0c1wiXG4gICAgKTtcbiAgICBlcnJvci5oYXNoID0ge1xuICAgICAgdGV4dDogYG1lcmdlICR7b3RoZXJCcmFuY2h9YCxcbiAgICAgIHRva2VuOiBgbWVyZ2UgJHtvdGhlckJyYW5jaH1gLFxuICAgICAgZXhwZWN0ZWQ6IFsnXCJjb21taXRcIiddXG4gICAgfTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBpZiAoY3VycmVudENvbW1pdCA9PT0gb3RoZXJDb21taXQpIHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignSW5jb3JyZWN0IHVzYWdlIG9mIFwibWVyZ2VcIi4gQm90aCBicmFuY2hlcyBoYXZlIHNhbWUgaGVhZCcpO1xuICAgIGVycm9yLmhhc2ggPSB7XG4gICAgICB0ZXh0OiBgbWVyZ2UgJHtvdGhlckJyYW5jaH1gLFxuICAgICAgdG9rZW46IGBtZXJnZSAke290aGVyQnJhbmNofWAsXG4gICAgICBleHBlY3RlZDogW1wiYnJhbmNoIGFiY1wiXVxuICAgIH07XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgaWYgKGN1c3RvbUlkICYmIHN0YXRlLnJlY29yZHMuY29tbWl0cy5oYXMoY3VzdG9tSWQpKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAnSW5jb3JyZWN0IHVzYWdlIG9mIFwibWVyZ2VcIi4gQ29tbWl0IHdpdGggaWQ6JyArIGN1c3RvbUlkICsgXCIgYWxyZWFkeSBleGlzdHMsIHVzZSBkaWZmZXJlbnQgY3VzdG9tIElkXCJcbiAgICApO1xuICAgIGVycm9yLmhhc2ggPSB7XG4gICAgICB0ZXh0OiBgbWVyZ2UgJHtvdGhlckJyYW5jaH0gJHtjdXN0b21JZH0gJHtvdmVycmlkZVR5cGV9ICR7Y3VzdG9tVGFncz8uam9pbihcIiBcIil9YCxcbiAgICAgIHRva2VuOiBgbWVyZ2UgJHtvdGhlckJyYW5jaH0gJHtjdXN0b21JZH0gJHtvdmVycmlkZVR5cGV9ICR7Y3VzdG9tVGFncz8uam9pbihcIiBcIil9YCxcbiAgICAgIGV4cGVjdGVkOiBbXG4gICAgICAgIGBtZXJnZSAke290aGVyQnJhbmNofSAke2N1c3RvbUlkfV9VTklRVUUgJHtvdmVycmlkZVR5cGV9ICR7Y3VzdG9tVGFncz8uam9pbihcIiBcIil9YFxuICAgICAgXVxuICAgIH07XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgY29uc3QgdmVyaWZpZWRCcmFuY2ggPSBvdGhlckJyYW5jaENoZWNrID8gb3RoZXJCcmFuY2hDaGVjayA6IFwiXCI7XG4gIGNvbnN0IGNvbW1pdDIgPSB7XG4gICAgaWQ6IGN1c3RvbUlkIHx8IGAke3N0YXRlLnJlY29yZHMuc2VxfS0ke2dldElEKCl9YCxcbiAgICBtZXNzYWdlOiBgbWVyZ2VkIGJyYW5jaCAke290aGVyQnJhbmNofSBpbnRvICR7c3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNofWAsXG4gICAgc2VxOiBzdGF0ZS5yZWNvcmRzLnNlcSsrLFxuICAgIHBhcmVudHM6IHN0YXRlLnJlY29yZHMuaGVhZCA9PSBudWxsID8gW10gOiBbc3RhdGUucmVjb3Jkcy5oZWFkLmlkLCB2ZXJpZmllZEJyYW5jaF0sXG4gICAgYnJhbmNoOiBzdGF0ZS5yZWNvcmRzLmN1cnJCcmFuY2gsXG4gICAgdHlwZTogY29tbWl0VHlwZS5NRVJHRSxcbiAgICBjdXN0b21UeXBlOiBvdmVycmlkZVR5cGUsXG4gICAgY3VzdG9tSWQ6IGN1c3RvbUlkID8gdHJ1ZSA6IGZhbHNlLFxuICAgIHRhZ3M6IGN1c3RvbVRhZ3MgPz8gW11cbiAgfTtcbiAgc3RhdGUucmVjb3Jkcy5oZWFkID0gY29tbWl0MjtcbiAgc3RhdGUucmVjb3Jkcy5jb21taXRzLnNldChjb21taXQyLmlkLCBjb21taXQyKTtcbiAgc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5zZXQoc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoLCBjb21taXQyLmlkKTtcbiAgbG9nLmRlYnVnKHN0YXRlLnJlY29yZHMuYnJhbmNoZXMpO1xuICBsb2cuZGVidWcoXCJpbiBtZXJnZUJyYW5jaFwiKTtcbn0sIFwibWVyZ2VcIik7XG52YXIgY2hlcnJ5UGljayA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oY2hlcnJ5UGlja0RCKSB7XG4gIGxldCBzb3VyY2VJZCA9IGNoZXJyeVBpY2tEQi5pZDtcbiAgbGV0IHRhcmdldElkID0gY2hlcnJ5UGlja0RCLnRhcmdldElkO1xuICBsZXQgdGFncyA9IGNoZXJyeVBpY2tEQi50YWdzO1xuICBsZXQgcGFyZW50Q29tbWl0SWQgPSBjaGVycnlQaWNrREIucGFyZW50O1xuICBsb2cuZGVidWcoXCJFbnRlcmluZyBjaGVycnlQaWNrOlwiLCBzb3VyY2VJZCwgdGFyZ2V0SWQsIHRhZ3MpO1xuICBjb25zdCBjb25maWcgPSBnZXRDb25maWczKCk7XG4gIHNvdXJjZUlkID0gY29tbW9uX2RlZmF1bHQuc2FuaXRpemVUZXh0KHNvdXJjZUlkLCBjb25maWcpO1xuICB0YXJnZXRJZCA9IGNvbW1vbl9kZWZhdWx0LnNhbml0aXplVGV4dCh0YXJnZXRJZCwgY29uZmlnKTtcbiAgdGFncyA9IHRhZ3M/Lm1hcCgodGFnKSA9PiBjb21tb25fZGVmYXVsdC5zYW5pdGl6ZVRleHQodGFnLCBjb25maWcpKTtcbiAgcGFyZW50Q29tbWl0SWQgPSBjb21tb25fZGVmYXVsdC5zYW5pdGl6ZVRleHQocGFyZW50Q29tbWl0SWQsIGNvbmZpZyk7XG4gIGlmICghc291cmNlSWQgfHwgIXN0YXRlLnJlY29yZHMuY29tbWl0cy5oYXMoc291cmNlSWQpKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAnSW5jb3JyZWN0IHVzYWdlIG9mIFwiY2hlcnJ5UGlja1wiLiBTb3VyY2UgY29tbWl0IGlkIHNob3VsZCBleGlzdCBhbmQgcHJvdmlkZWQnXG4gICAgKTtcbiAgICBlcnJvci5oYXNoID0ge1xuICAgICAgdGV4dDogYGNoZXJyeVBpY2sgJHtzb3VyY2VJZH0gJHt0YXJnZXRJZH1gLFxuICAgICAgdG9rZW46IGBjaGVycnlQaWNrICR7c291cmNlSWR9ICR7dGFyZ2V0SWR9YCxcbiAgICAgIGV4cGVjdGVkOiBbXCJjaGVycnktcGljayBhYmNcIl1cbiAgICB9O1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGNvbnN0IHNvdXJjZUNvbW1pdCA9IHN0YXRlLnJlY29yZHMuY29tbWl0cy5nZXQoc291cmNlSWQpO1xuICBpZiAoc291cmNlQ29tbWl0ID09PSB2b2lkIDAgfHwgIXNvdXJjZUNvbW1pdCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IHVzYWdlIG9mIFwiY2hlcnJ5UGlja1wiLiBTb3VyY2UgY29tbWl0IGlkIHNob3VsZCBleGlzdCBhbmQgcHJvdmlkZWQnKTtcbiAgfVxuICBpZiAocGFyZW50Q29tbWl0SWQgJiYgIShBcnJheS5pc0FycmF5KHNvdXJjZUNvbW1pdC5wYXJlbnRzKSAmJiBzb3VyY2VDb21taXQucGFyZW50cy5pbmNsdWRlcyhwYXJlbnRDb21taXRJZCkpKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICBcIkludmFsaWQgb3BlcmF0aW9uOiBUaGUgc3BlY2lmaWVkIHBhcmVudCBjb21taXQgaXMgbm90IGFuIGltbWVkaWF0ZSBwYXJlbnQgb2YgdGhlIGNoZXJyeS1waWNrZWQgY29tbWl0LlwiXG4gICAgKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBjb25zdCBzb3VyY2VDb21taXRCcmFuY2ggPSBzb3VyY2VDb21taXQuYnJhbmNoO1xuICBpZiAoc291cmNlQ29tbWl0LnR5cGUgPT09IGNvbW1pdFR5cGUuTUVSR0UgJiYgIXBhcmVudENvbW1pdElkKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICBcIkluY29ycmVjdCB1c2FnZSBvZiBjaGVycnktcGljazogSWYgdGhlIHNvdXJjZSBjb21taXQgaXMgYSBtZXJnZSBjb21taXQsIGFuIGltbWVkaWF0ZSBwYXJlbnQgY29tbWl0IG11c3QgYmUgc3BlY2lmaWVkLlwiXG4gICAgKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBpZiAoIXRhcmdldElkIHx8ICFzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuaGFzKHRhcmdldElkKSkge1xuICAgIGlmIChzb3VyY2VDb21taXRCcmFuY2ggPT09IHN0YXRlLnJlY29yZHMuY3VyckJyYW5jaCkge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdJbmNvcnJlY3QgdXNhZ2Ugb2YgXCJjaGVycnlQaWNrXCIuIFNvdXJjZSBjb21taXQgaXMgYWxyZWFkeSBvbiBjdXJyZW50IGJyYW5jaCdcbiAgICAgICk7XG4gICAgICBlcnJvci5oYXNoID0ge1xuICAgICAgICB0ZXh0OiBgY2hlcnJ5UGljayAke3NvdXJjZUlkfSAke3RhcmdldElkfWAsXG4gICAgICAgIHRva2VuOiBgY2hlcnJ5UGljayAke3NvdXJjZUlkfSAke3RhcmdldElkfWAsXG4gICAgICAgIGV4cGVjdGVkOiBbXCJjaGVycnktcGljayBhYmNcIl1cbiAgICAgIH07XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudENvbW1pdElkID0gc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5nZXQoc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoKTtcbiAgICBpZiAoY3VycmVudENvbW1pdElkID09PSB2b2lkIDAgfHwgIWN1cnJlbnRDb21taXRJZCkge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgIGBJbmNvcnJlY3QgdXNhZ2Ugb2YgXCJjaGVycnktcGlja1wiLiBDdXJyZW50IGJyYW5jaCAoJHtzdGF0ZS5yZWNvcmRzLmN1cnJCcmFuY2h9KWhhcyBubyBjb21taXRzYFxuICAgICAgKTtcbiAgICAgIGVycm9yLmhhc2ggPSB7XG4gICAgICAgIHRleHQ6IGBjaGVycnlQaWNrICR7c291cmNlSWR9ICR7dGFyZ2V0SWR9YCxcbiAgICAgICAgdG9rZW46IGBjaGVycnlQaWNrICR7c291cmNlSWR9ICR7dGFyZ2V0SWR9YCxcbiAgICAgICAgZXhwZWN0ZWQ6IFtcImNoZXJyeS1waWNrIGFiY1wiXVxuICAgICAgfTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBjb25zdCBjdXJyZW50Q29tbWl0ID0gc3RhdGUucmVjb3Jkcy5jb21taXRzLmdldChjdXJyZW50Q29tbWl0SWQpO1xuICAgIGlmIChjdXJyZW50Q29tbWl0ID09PSB2b2lkIDAgfHwgIWN1cnJlbnRDb21taXQpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICBgSW5jb3JyZWN0IHVzYWdlIG9mIFwiY2hlcnJ5LXBpY2tcIi4gQ3VycmVudCBicmFuY2ggKCR7c3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNofSloYXMgbm8gY29tbWl0c2BcbiAgICAgICk7XG4gICAgICBlcnJvci5oYXNoID0ge1xuICAgICAgICB0ZXh0OiBgY2hlcnJ5UGljayAke3NvdXJjZUlkfSAke3RhcmdldElkfWAsXG4gICAgICAgIHRva2VuOiBgY2hlcnJ5UGljayAke3NvdXJjZUlkfSAke3RhcmdldElkfWAsXG4gICAgICAgIGV4cGVjdGVkOiBbXCJjaGVycnktcGljayBhYmNcIl1cbiAgICAgIH07XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc3QgY29tbWl0MiA9IHtcbiAgICAgIGlkOiBzdGF0ZS5yZWNvcmRzLnNlcSArIFwiLVwiICsgZ2V0SUQoKSxcbiAgICAgIG1lc3NhZ2U6IGBjaGVycnktcGlja2VkICR7c291cmNlQ29tbWl0Py5tZXNzYWdlfSBpbnRvICR7c3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNofWAsXG4gICAgICBzZXE6IHN0YXRlLnJlY29yZHMuc2VxKyssXG4gICAgICBwYXJlbnRzOiBzdGF0ZS5yZWNvcmRzLmhlYWQgPT0gbnVsbCA/IFtdIDogW3N0YXRlLnJlY29yZHMuaGVhZC5pZCwgc291cmNlQ29tbWl0LmlkXSxcbiAgICAgIGJyYW5jaDogc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoLFxuICAgICAgdHlwZTogY29tbWl0VHlwZS5DSEVSUllfUElDSyxcbiAgICAgIHRhZ3M6IHRhZ3MgPyB0YWdzLmZpbHRlcihCb29sZWFuKSA6IFtcbiAgICAgICAgYGNoZXJyeS1waWNrOiR7c291cmNlQ29tbWl0LmlkfSR7c291cmNlQ29tbWl0LnR5cGUgPT09IGNvbW1pdFR5cGUuTUVSR0UgPyBgfHBhcmVudDoke3BhcmVudENvbW1pdElkfWAgOiBcIlwifWBcbiAgICAgIF1cbiAgICB9O1xuICAgIHN0YXRlLnJlY29yZHMuaGVhZCA9IGNvbW1pdDI7XG4gICAgc3RhdGUucmVjb3Jkcy5jb21taXRzLnNldChjb21taXQyLmlkLCBjb21taXQyKTtcbiAgICBzdGF0ZS5yZWNvcmRzLmJyYW5jaGVzLnNldChzdGF0ZS5yZWNvcmRzLmN1cnJCcmFuY2gsIGNvbW1pdDIuaWQpO1xuICAgIGxvZy5kZWJ1ZyhzdGF0ZS5yZWNvcmRzLmJyYW5jaGVzKTtcbiAgICBsb2cuZGVidWcoXCJpbiBjaGVycnlQaWNrXCIpO1xuICB9XG59LCBcImNoZXJyeVBpY2tcIik7XG52YXIgY2hlY2tvdXQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKGJyYW5jaDIpIHtcbiAgYnJhbmNoMiA9IGNvbW1vbl9kZWZhdWx0LnNhbml0aXplVGV4dChicmFuY2gyLCBnZXRDb25maWczKCkpO1xuICBpZiAoIXN0YXRlLnJlY29yZHMuYnJhbmNoZXMuaGFzKGJyYW5jaDIpKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICBgVHJ5aW5nIHRvIGNoZWNrb3V0IGJyYW5jaCB3aGljaCBpcyBub3QgeWV0IGNyZWF0ZWQuIChIZWxwIHRyeSB1c2luZyBcImJyYW5jaCAke2JyYW5jaDJ9XCIpYFxuICAgICk7XG4gICAgZXJyb3IuaGFzaCA9IHtcbiAgICAgIHRleHQ6IGBjaGVja291dCAke2JyYW5jaDJ9YCxcbiAgICAgIHRva2VuOiBgY2hlY2tvdXQgJHticmFuY2gyfWAsXG4gICAgICBleHBlY3RlZDogW2BicmFuY2ggJHticmFuY2gyfWBdXG4gICAgfTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSBlbHNlIHtcbiAgICBzdGF0ZS5yZWNvcmRzLmN1cnJCcmFuY2ggPSBicmFuY2gyO1xuICAgIGNvbnN0IGlkID0gc3RhdGUucmVjb3Jkcy5icmFuY2hlcy5nZXQoc3RhdGUucmVjb3Jkcy5jdXJyQnJhbmNoKTtcbiAgICBpZiAoaWQgPT09IHZvaWQgMCB8fCAhaWQpIHtcbiAgICAgIHN0YXRlLnJlY29yZHMuaGVhZCA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnJlY29yZHMuaGVhZCA9IHN0YXRlLnJlY29yZHMuY29tbWl0cy5nZXQoaWQpID8/IG51bGw7XG4gICAgfVxuICB9XG59LCBcImNoZWNrb3V0XCIpO1xuZnVuY3Rpb24gdXBzZXJ0KGFyciwga2V5LCBuZXdWYWwpIHtcbiAgY29uc3QgaW5kZXggPSBhcnIuaW5kZXhPZihrZXkpO1xuICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgYXJyLnB1c2gobmV3VmFsKTtcbiAgfSBlbHNlIHtcbiAgICBhcnIuc3BsaWNlKGluZGV4LCAxLCBuZXdWYWwpO1xuICB9XG59XG5fX25hbWUodXBzZXJ0LCBcInVwc2VydFwiKTtcbmZ1bmN0aW9uIHByZXR0eVByaW50Q29tbWl0SGlzdG9yeShjb21taXRBcnIpIHtcbiAgY29uc3QgY29tbWl0MiA9IGNvbW1pdEFyci5yZWR1Y2UoKG91dCwgY29tbWl0MykgPT4ge1xuICAgIGlmIChvdXQuc2VxID4gY29tbWl0My5zZXEpIHtcbiAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuICAgIHJldHVybiBjb21taXQzO1xuICB9LCBjb21taXRBcnJbMF0pO1xuICBsZXQgbGluZSA9IFwiXCI7XG4gIGNvbW1pdEFyci5mb3JFYWNoKGZ1bmN0aW9uKGMpIHtcbiAgICBpZiAoYyA9PT0gY29tbWl0Mikge1xuICAgICAgbGluZSArPSBcIlx0KlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaW5lICs9IFwiXHR8XCI7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgbGFiZWwgPSBbbGluZSwgY29tbWl0Mi5pZCwgY29tbWl0Mi5zZXFdO1xuICBmb3IgKGNvbnN0IGJyYW5jaDIgaW4gc3RhdGUucmVjb3Jkcy5icmFuY2hlcykge1xuICAgIGlmIChzdGF0ZS5yZWNvcmRzLmJyYW5jaGVzLmdldChicmFuY2gyKSA9PT0gY29tbWl0Mi5pZCkge1xuICAgICAgbGFiZWwucHVzaChicmFuY2gyKTtcbiAgICB9XG4gIH1cbiAgbG9nLmRlYnVnKGxhYmVsLmpvaW4oXCIgXCIpKTtcbiAgaWYgKGNvbW1pdDIucGFyZW50cyAmJiBjb21taXQyLnBhcmVudHMubGVuZ3RoID09IDIgJiYgY29tbWl0Mi5wYXJlbnRzWzBdICYmIGNvbW1pdDIucGFyZW50c1sxXSkge1xuICAgIGNvbnN0IG5ld0NvbW1pdCA9IHN0YXRlLnJlY29yZHMuY29tbWl0cy5nZXQoY29tbWl0Mi5wYXJlbnRzWzBdKTtcbiAgICB1cHNlcnQoY29tbWl0QXJyLCBjb21taXQyLCBuZXdDb21taXQpO1xuICAgIGlmIChjb21taXQyLnBhcmVudHNbMV0pIHtcbiAgICAgIGNvbW1pdEFyci5wdXNoKHN0YXRlLnJlY29yZHMuY29tbWl0cy5nZXQoY29tbWl0Mi5wYXJlbnRzWzFdKSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNvbW1pdDIucGFyZW50cy5sZW5ndGggPT0gMCkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBpZiAoY29tbWl0Mi5wYXJlbnRzWzBdKSB7XG4gICAgICBjb25zdCBuZXdDb21taXQgPSBzdGF0ZS5yZWNvcmRzLmNvbW1pdHMuZ2V0KGNvbW1pdDIucGFyZW50c1swXSk7XG4gICAgICB1cHNlcnQoY29tbWl0QXJyLCBjb21taXQyLCBuZXdDb21taXQpO1xuICAgIH1cbiAgfVxuICBjb21taXRBcnIgPSB1bmlxQnkoY29tbWl0QXJyLCAoYykgPT4gYy5pZCk7XG4gIHByZXR0eVByaW50Q29tbWl0SGlzdG9yeShjb21taXRBcnIpO1xufVxuX19uYW1lKHByZXR0eVByaW50Q29tbWl0SGlzdG9yeSwgXCJwcmV0dHlQcmludENvbW1pdEhpc3RvcnlcIik7XG52YXIgcHJldHR5UHJpbnQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKCkge1xuICBsb2cuZGVidWcoc3RhdGUucmVjb3Jkcy5jb21taXRzKTtcbiAgY29uc3Qgbm9kZSA9IGdldENvbW1pdHNBcnJheSgpWzBdO1xuICBwcmV0dHlQcmludENvbW1pdEhpc3RvcnkoW25vZGVdKTtcbn0sIFwicHJldHR5UHJpbnRcIik7XG52YXIgY2xlYXIyID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgc3RhdGUucmVzZXQoKTtcbiAgY2xlYXIoKTtcbn0sIFwiY2xlYXJcIik7XG52YXIgZ2V0QnJhbmNoZXNBc09iakFycmF5ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgY29uc3QgYnJhbmNoZXNBcnJheSA9IFsuLi5zdGF0ZS5yZWNvcmRzLmJyYW5jaENvbmZpZy52YWx1ZXMoKV0ubWFwKChicmFuY2hDb25maWcsIGkpID0+IHtcbiAgICBpZiAoYnJhbmNoQ29uZmlnLm9yZGVyICE9PSBudWxsICYmIGJyYW5jaENvbmZpZy5vcmRlciAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gYnJhbmNoQ29uZmlnO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4uYnJhbmNoQ29uZmlnLFxuICAgICAgb3JkZXI6IHBhcnNlRmxvYXQoYDAuJHtpfWApXG4gICAgfTtcbiAgfSkuc29ydCgoYSwgYikgPT4gKGEub3JkZXIgPz8gMCkgLSAoYi5vcmRlciA/PyAwKSkubWFwKCh7IG5hbWUgfSkgPT4gKHsgbmFtZSB9KSk7XG4gIHJldHVybiBicmFuY2hlc0FycmF5O1xufSwgXCJnZXRCcmFuY2hlc0FzT2JqQXJyYXlcIik7XG52YXIgZ2V0QnJhbmNoZXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKCkge1xuICByZXR1cm4gc3RhdGUucmVjb3Jkcy5icmFuY2hlcztcbn0sIFwiZ2V0QnJhbmNoZXNcIik7XG52YXIgZ2V0Q29tbWl0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24oKSB7XG4gIHJldHVybiBzdGF0ZS5yZWNvcmRzLmNvbW1pdHM7XG59LCBcImdldENvbW1pdHNcIik7XG52YXIgZ2V0Q29tbWl0c0FycmF5ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgY29uc3QgY29tbWl0QXJyID0gWy4uLnN0YXRlLnJlY29yZHMuY29tbWl0cy52YWx1ZXMoKV07XG4gIGNvbW1pdEFyci5mb3JFYWNoKGZ1bmN0aW9uKG8pIHtcbiAgICBsb2cuZGVidWcoby5pZCk7XG4gIH0pO1xuICBjb21taXRBcnIuc29ydCgoYSwgYikgPT4gYS5zZXEgLSBiLnNlcSk7XG4gIHJldHVybiBjb21taXRBcnI7XG59LCBcImdldENvbW1pdHNBcnJheVwiKTtcbnZhciBnZXRDdXJyZW50QnJhbmNoID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHN0YXRlLnJlY29yZHMuY3VyckJyYW5jaDtcbn0sIFwiZ2V0Q3VycmVudEJyYW5jaFwiKTtcbnZhciBnZXREaXJlY3Rpb24gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKCkge1xuICByZXR1cm4gc3RhdGUucmVjb3Jkcy5kaXJlY3Rpb247XG59LCBcImdldERpcmVjdGlvblwiKTtcbnZhciBnZXRIZWFkID0gLyogQF9fUFVSRV9fICovIF9fbmFtZShmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHN0YXRlLnJlY29yZHMuaGVhZDtcbn0sIFwiZ2V0SGVhZFwiKTtcbnZhciBkYiA9IHtcbiAgY29tbWl0VHlwZSxcbiAgZ2V0Q29uZmlnOiBnZXRDb25maWczLFxuICBzZXREaXJlY3Rpb24sXG4gIHNldE9wdGlvbnMsXG4gIGdldE9wdGlvbnMsXG4gIGNvbW1pdCxcbiAgYnJhbmNoLFxuICBtZXJnZSxcbiAgY2hlcnJ5UGljayxcbiAgY2hlY2tvdXQsXG4gIC8vcmVzZXQsXG4gIHByZXR0eVByaW50LFxuICBjbGVhcjogY2xlYXIyLFxuICBnZXRCcmFuY2hlc0FzT2JqQXJyYXksXG4gIGdldEJyYW5jaGVzLFxuICBnZXRDb21taXRzLFxuICBnZXRDb21taXRzQXJyYXksXG4gIGdldEN1cnJlbnRCcmFuY2gsXG4gIGdldERpcmVjdGlvbixcbiAgZ2V0SGVhZCxcbiAgc2V0QWNjVGl0bGUsXG4gIGdldEFjY1RpdGxlLFxuICBnZXRBY2NEZXNjcmlwdGlvbixcbiAgc2V0QWNjRGVzY3JpcHRpb24sXG4gIHNldERpYWdyYW1UaXRsZSxcbiAgZ2V0RGlhZ3JhbVRpdGxlXG59O1xuXG4vLyBzcmMvZGlhZ3JhbXMvZ2l0L2dpdEdyYXBoUGFyc2VyLnRzXG52YXIgcG9wdWxhdGUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChhc3QsIGRiMikgPT4ge1xuICBwb3B1bGF0ZUNvbW1vbkRiKGFzdCwgZGIyKTtcbiAgaWYgKGFzdC5kaXIpIHtcbiAgICBkYjIuc2V0RGlyZWN0aW9uKGFzdC5kaXIpO1xuICB9XG4gIGZvciAoY29uc3Qgc3RhdGVtZW50IG9mIGFzdC5zdGF0ZW1lbnRzKSB7XG4gICAgcGFyc2VTdGF0ZW1lbnQoc3RhdGVtZW50LCBkYjIpO1xuICB9XG59LCBcInBvcHVsYXRlXCIpO1xudmFyIHBhcnNlU3RhdGVtZW50ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3RhdGVtZW50LCBkYjIpID0+IHtcbiAgY29uc3QgcGFyc2VycyA9IHtcbiAgICBDb21taXQ6IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHN0bXQpID0+IGRiMi5jb21taXQocGFyc2VDb21taXQoc3RtdCkpLCBcIkNvbW1pdFwiKSxcbiAgICBCcmFuY2g6IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHN0bXQpID0+IGRiMi5icmFuY2gocGFyc2VCcmFuY2goc3RtdCkpLCBcIkJyYW5jaFwiKSxcbiAgICBNZXJnZTogLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3RtdCkgPT4gZGIyLm1lcmdlKHBhcnNlTWVyZ2Uoc3RtdCkpLCBcIk1lcmdlXCIpLFxuICAgIENoZWNrb3V0OiAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzdG10KSA9PiBkYjIuY2hlY2tvdXQocGFyc2VDaGVja291dChzdG10KSksIFwiQ2hlY2tvdXRcIiksXG4gICAgQ2hlcnJ5UGlja2luZzogLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3RtdCkgPT4gZGIyLmNoZXJyeVBpY2socGFyc2VDaGVycnlQaWNraW5nKHN0bXQpKSwgXCJDaGVycnlQaWNraW5nXCIpXG4gIH07XG4gIGNvbnN0IHBhcnNlcjIgPSBwYXJzZXJzW3N0YXRlbWVudC4kdHlwZV07XG4gIGlmIChwYXJzZXIyKSB7XG4gICAgcGFyc2VyMihzdGF0ZW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGxvZy5lcnJvcihgVW5rbm93biBzdGF0ZW1lbnQgdHlwZTogJHtzdGF0ZW1lbnQuJHR5cGV9YCk7XG4gIH1cbn0sIFwicGFyc2VTdGF0ZW1lbnRcIik7XG52YXIgcGFyc2VDb21taXQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChjb21taXQyKSA9PiB7XG4gIGNvbnN0IGNvbW1pdERCID0ge1xuICAgIGlkOiBjb21taXQyLmlkLFxuICAgIG1zZzogY29tbWl0Mi5tZXNzYWdlID8/IFwiXCIsXG4gICAgdHlwZTogY29tbWl0Mi50eXBlICE9PSB2b2lkIDAgPyBjb21taXRUeXBlW2NvbW1pdDIudHlwZV0gOiBjb21taXRUeXBlLk5PUk1BTCxcbiAgICB0YWdzOiBjb21taXQyLnRhZ3MgPz8gdm9pZCAwXG4gIH07XG4gIHJldHVybiBjb21taXREQjtcbn0sIFwicGFyc2VDb21taXRcIik7XG52YXIgcGFyc2VCcmFuY2ggPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChicmFuY2gyKSA9PiB7XG4gIGNvbnN0IGJyYW5jaERCID0ge1xuICAgIG5hbWU6IGJyYW5jaDIubmFtZSxcbiAgICBvcmRlcjogYnJhbmNoMi5vcmRlciA/PyAwXG4gIH07XG4gIHJldHVybiBicmFuY2hEQjtcbn0sIFwicGFyc2VCcmFuY2hcIik7XG52YXIgcGFyc2VNZXJnZSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKG1lcmdlMikgPT4ge1xuICBjb25zdCBtZXJnZURCID0ge1xuICAgIGJyYW5jaDogbWVyZ2UyLmJyYW5jaCxcbiAgICBpZDogbWVyZ2UyLmlkID8/IFwiXCIsXG4gICAgdHlwZTogbWVyZ2UyLnR5cGUgIT09IHZvaWQgMCA/IGNvbW1pdFR5cGVbbWVyZ2UyLnR5cGVdIDogdm9pZCAwLFxuICAgIHRhZ3M6IG1lcmdlMi50YWdzID8/IHZvaWQgMFxuICB9O1xuICByZXR1cm4gbWVyZ2VEQjtcbn0sIFwicGFyc2VNZXJnZVwiKTtcbnZhciBwYXJzZUNoZWNrb3V0ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoY2hlY2tvdXQyKSA9PiB7XG4gIGNvbnN0IGJyYW5jaDIgPSBjaGVja291dDIuYnJhbmNoO1xuICByZXR1cm4gYnJhbmNoMjtcbn0sIFwicGFyc2VDaGVja291dFwiKTtcbnZhciBwYXJzZUNoZXJyeVBpY2tpbmcgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChjaGVycnlQaWNraW5nKSA9PiB7XG4gIGNvbnN0IGNoZXJyeVBpY2tEQiA9IHtcbiAgICBpZDogY2hlcnJ5UGlja2luZy5pZCxcbiAgICB0YXJnZXRJZDogXCJcIixcbiAgICB0YWdzOiBjaGVycnlQaWNraW5nLnRhZ3M/Lmxlbmd0aCA9PT0gMCA/IHZvaWQgMCA6IGNoZXJyeVBpY2tpbmcudGFncyxcbiAgICBwYXJlbnQ6IGNoZXJyeVBpY2tpbmcucGFyZW50XG4gIH07XG4gIHJldHVybiBjaGVycnlQaWNrREI7XG59LCBcInBhcnNlQ2hlcnJ5UGlja2luZ1wiKTtcbnZhciBwYXJzZXIgPSB7XG4gIHBhcnNlOiAvKiBAX19QVVJFX18gKi8gX19uYW1lKGFzeW5jIChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IGFzdCA9IGF3YWl0IHBhcnNlKFwiZ2l0R3JhcGhcIiwgaW5wdXQpO1xuICAgIGxvZy5kZWJ1Zyhhc3QpO1xuICAgIHBvcHVsYXRlKGFzdCwgZGIpO1xuICB9LCBcInBhcnNlXCIpXG59O1xuaWYgKHZvaWQgMCkge1xuICBjb25zdCB7IGl0LCBleHBlY3QsIGRlc2NyaWJlIH0gPSB2b2lkIDA7XG4gIGNvbnN0IG1vY2tEQiA9IHtcbiAgICBjb21taXRUeXBlLFxuICAgIHNldERpcmVjdGlvbjogdmkuZm4oKSxcbiAgICBjb21taXQ6IHZpLmZuKCksXG4gICAgYnJhbmNoOiB2aS5mbigpLFxuICAgIG1lcmdlOiB2aS5mbigpLFxuICAgIGNoZXJyeVBpY2s6IHZpLmZuKCksXG4gICAgY2hlY2tvdXQ6IHZpLmZuKClcbiAgfTtcbiAgZGVzY3JpYmUoXCJHaXRHcmFwaCBQYXJzZXJcIiwgKCkgPT4ge1xuICAgIGl0KFwic2hvdWxkIHBhcnNlIGEgY29tbWl0IHN0YXRlbWVudFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb21taXQyID0ge1xuICAgICAgICAkdHlwZTogXCJDb21taXRcIixcbiAgICAgICAgaWQ6IFwiMVwiLFxuICAgICAgICBtZXNzYWdlOiBcInRlc3RcIixcbiAgICAgICAgdGFnczogW1widGFnMVwiLCBcInRhZzJcIl0sXG4gICAgICAgIHR5cGU6IFwiTk9STUFMXCJcbiAgICAgIH07XG4gICAgICBwYXJzZVN0YXRlbWVudChjb21taXQyLCBtb2NrREIpO1xuICAgICAgZXhwZWN0KG1vY2tEQi5jb21taXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgaWQ6IFwiMVwiLFxuICAgICAgICBtc2c6IFwidGVzdFwiLFxuICAgICAgICB0YWdzOiBbXCJ0YWcxXCIsIFwidGFnMlwiXSxcbiAgICAgICAgdHlwZTogMFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgaXQoXCJzaG91bGQgcGFyc2UgYSBicmFuY2ggc3RhdGVtZW50XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGJyYW5jaDIgPSB7XG4gICAgICAgICR0eXBlOiBcIkJyYW5jaFwiLFxuICAgICAgICBuYW1lOiBcIm5ld0JyYW5jaFwiLFxuICAgICAgICBvcmRlcjogMVxuICAgICAgfTtcbiAgICAgIHBhcnNlU3RhdGVtZW50KGJyYW5jaDIsIG1vY2tEQik7XG4gICAgICBleHBlY3QobW9ja0RCLmJyYW5jaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyBuYW1lOiBcIm5ld0JyYW5jaFwiLCBvcmRlcjogMSB9KTtcbiAgICB9KTtcbiAgICBpdChcInNob3VsZCBwYXJzZSBhIGNoZWNrb3V0IHN0YXRlbWVudFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBjaGVja291dDIgPSB7XG4gICAgICAgICR0eXBlOiBcIkNoZWNrb3V0XCIsXG4gICAgICAgIGJyYW5jaDogXCJuZXdCcmFuY2hcIlxuICAgICAgfTtcbiAgICAgIHBhcnNlU3RhdGVtZW50KGNoZWNrb3V0MiwgbW9ja0RCKTtcbiAgICAgIGV4cGVjdChtb2NrREIuY2hlY2tvdXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwibmV3QnJhbmNoXCIpO1xuICAgIH0pO1xuICAgIGl0KFwic2hvdWxkIHBhcnNlIGEgbWVyZ2Ugc3RhdGVtZW50XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG1lcmdlMiA9IHtcbiAgICAgICAgJHR5cGU6IFwiTWVyZ2VcIixcbiAgICAgICAgYnJhbmNoOiBcIm5ld0JyYW5jaFwiLFxuICAgICAgICBpZDogXCIxXCIsXG4gICAgICAgIHRhZ3M6IFtcInRhZzFcIiwgXCJ0YWcyXCJdLFxuICAgICAgICB0eXBlOiBcIk5PUk1BTFwiXG4gICAgICB9O1xuICAgICAgcGFyc2VTdGF0ZW1lbnQobWVyZ2UyLCBtb2NrREIpO1xuICAgICAgZXhwZWN0KG1vY2tEQi5tZXJnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBicmFuY2g6IFwibmV3QnJhbmNoXCIsXG4gICAgICAgIGlkOiBcIjFcIixcbiAgICAgICAgdGFnczogW1widGFnMVwiLCBcInRhZzJcIl0sXG4gICAgICAgIHR5cGU6IDBcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KFwic2hvdWxkIHBhcnNlIGEgY2hlcnJ5IHBpY2tpbmcgc3RhdGVtZW50XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGNoZXJyeVBpY2syID0ge1xuICAgICAgICAkdHlwZTogXCJDaGVycnlQaWNraW5nXCIsXG4gICAgICAgIGlkOiBcIjFcIixcbiAgICAgICAgdGFnczogW1widGFnMVwiLCBcInRhZzJcIl0sXG4gICAgICAgIHBhcmVudDogXCIyXCJcbiAgICAgIH07XG4gICAgICBwYXJzZVN0YXRlbWVudChjaGVycnlQaWNrMiwgbW9ja0RCKTtcbiAgICAgIGV4cGVjdChtb2NrREIuY2hlcnJ5UGljaykudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBpZDogXCIxXCIsXG4gICAgICAgIHRhcmdldElkOiBcIlwiLFxuICAgICAgICBwYXJlbnQ6IFwiMlwiLFxuICAgICAgICB0YWdzOiBbXCJ0YWcxXCIsIFwidGFnMlwiXVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgaXQoXCJzaG91bGQgcGFyc2UgYSBsYW5naXVtIGdlbmVyYXRlZCBnaXRHcmFwaCBhc3RcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgZHVtbXkgPSB7XG4gICAgICAgICR0eXBlOiBcIkdpdEdyYXBoXCIsXG4gICAgICAgIHN0YXRlbWVudHM6IFtdXG4gICAgICB9O1xuICAgICAgY29uc3QgZ2l0R3JhcGhBc3QgPSB7XG4gICAgICAgICR0eXBlOiBcIkdpdEdyYXBoXCIsXG4gICAgICAgIHN0YXRlbWVudHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkY29udGFpbmVyOiBkdW1teSxcbiAgICAgICAgICAgICR0eXBlOiBcIkNvbW1pdFwiLFxuICAgICAgICAgICAgaWQ6IFwiMVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJ0ZXN0XCIsXG4gICAgICAgICAgICB0YWdzOiBbXCJ0YWcxXCIsIFwidGFnMlwiXSxcbiAgICAgICAgICAgIHR5cGU6IFwiTk9STUFMXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICRjb250YWluZXI6IGR1bW15LFxuICAgICAgICAgICAgJHR5cGU6IFwiQnJhbmNoXCIsXG4gICAgICAgICAgICBuYW1lOiBcIm5ld0JyYW5jaFwiLFxuICAgICAgICAgICAgb3JkZXI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICRjb250YWluZXI6IGR1bW15LFxuICAgICAgICAgICAgJHR5cGU6IFwiTWVyZ2VcIixcbiAgICAgICAgICAgIGJyYW5jaDogXCJuZXdCcmFuY2hcIixcbiAgICAgICAgICAgIGlkOiBcIjFcIixcbiAgICAgICAgICAgIHRhZ3M6IFtcInRhZzFcIiwgXCJ0YWcyXCJdLFxuICAgICAgICAgICAgdHlwZTogXCJOT1JNQUxcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgJGNvbnRhaW5lcjogZHVtbXksXG4gICAgICAgICAgICAkdHlwZTogXCJDaGVja291dFwiLFxuICAgICAgICAgICAgYnJhbmNoOiBcIm5ld0JyYW5jaFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAkY29udGFpbmVyOiBkdW1teSxcbiAgICAgICAgICAgICR0eXBlOiBcIkNoZXJyeVBpY2tpbmdcIixcbiAgICAgICAgICAgIGlkOiBcIjFcIixcbiAgICAgICAgICAgIHRhZ3M6IFtcInRhZzFcIiwgXCJ0YWcyXCJdLFxuICAgICAgICAgICAgcGFyZW50OiBcIjJcIlxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfTtcbiAgICAgIHBvcHVsYXRlKGdpdEdyYXBoQXN0LCBtb2NrREIpO1xuICAgICAgZXhwZWN0KG1vY2tEQi5jb21taXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgaWQ6IFwiMVwiLFxuICAgICAgICBtc2c6IFwidGVzdFwiLFxuICAgICAgICB0YWdzOiBbXCJ0YWcxXCIsIFwidGFnMlwiXSxcbiAgICAgICAgdHlwZTogMFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja0RCLmJyYW5jaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyBuYW1lOiBcIm5ld0JyYW5jaFwiLCBvcmRlcjogMSB9KTtcbiAgICAgIGV4cGVjdChtb2NrREIubWVyZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgYnJhbmNoOiBcIm5ld0JyYW5jaFwiLFxuICAgICAgICBpZDogXCIxXCIsXG4gICAgICAgIHRhZ3M6IFtcInRhZzFcIiwgXCJ0YWcyXCJdLFxuICAgICAgICB0eXBlOiAwXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChtb2NrREIuY2hlY2tvdXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwibmV3QnJhbmNoXCIpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuLy8gc3JjL2RpYWdyYW1zL2dpdC9naXRHcmFwaFJlbmRlcmVyLnRzXG5pbXBvcnQgeyBzZWxlY3QgfSBmcm9tIFwiZDNcIjtcbnZhciBERUZBVUxUX0NPTkZJRyA9IGdldENvbmZpZzIoKTtcbnZhciBERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzIgPSBERUZBVUxUX0NPTkZJRz8uZ2l0R3JhcGg7XG52YXIgTEFZT1VUX09GRlNFVCA9IDEwO1xudmFyIENPTU1JVF9TVEVQID0gNDA7XG52YXIgUFggPSA0O1xudmFyIFBZID0gMjtcbnZhciBUSEVNRV9DT0xPUl9MSU1JVCA9IDg7XG52YXIgYnJhbmNoUG9zID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbnZhciBjb21taXRQb3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xudmFyIGRlZmF1bHRQb3MgPSAzMDtcbnZhciBhbGxDb21taXRzRGljdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG52YXIgbGFuZXMgPSBbXTtcbnZhciBtYXhQb3MgPSAwO1xudmFyIGRpciA9IFwiTFJcIjtcbnZhciBjbGVhcjMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCgpID0+IHtcbiAgYnJhbmNoUG9zLmNsZWFyKCk7XG4gIGNvbW1pdFBvcy5jbGVhcigpO1xuICBhbGxDb21taXRzRGljdC5jbGVhcigpO1xuICBtYXhQb3MgPSAwO1xuICBsYW5lcyA9IFtdO1xuICBkaXIgPSBcIkxSXCI7XG59LCBcImNsZWFyXCIpO1xudmFyIGRyYXdUZXh0ID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgodHh0KSA9PiB7XG4gIGNvbnN0IHN2Z0xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJ0ZXh0XCIpO1xuICBjb25zdCByb3dzID0gdHlwZW9mIHR4dCA9PT0gXCJzdHJpbmdcIiA/IHR4dC5zcGxpdCgvXFxcXG58XFxufDxiclxccypcXC8/Pi9naSkgOiB0eHQ7XG4gIHJvd3MuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgY29uc3QgdHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInRzcGFuXCIpO1xuICAgIHRzcGFuLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCIsIFwieG1sOnNwYWNlXCIsIFwicHJlc2VydmVcIik7XG4gICAgdHNwYW4uc2V0QXR0cmlidXRlKFwiZHlcIiwgXCIxZW1cIik7XG4gICAgdHNwYW4uc2V0QXR0cmlidXRlKFwieFwiLCBcIjBcIik7XG4gICAgdHNwYW4uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJyb3dcIik7XG4gICAgdHNwYW4udGV4dENvbnRlbnQgPSByb3cudHJpbSgpO1xuICAgIHN2Z0xhYmVsLmFwcGVuZENoaWxkKHRzcGFuKTtcbiAgfSk7XG4gIHJldHVybiBzdmdMYWJlbDtcbn0sIFwiZHJhd1RleHRcIik7XG52YXIgZmluZENsb3Nlc3RQYXJlbnQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChwYXJlbnRzKSA9PiB7XG4gIGxldCBjbG9zZXN0UGFyZW50O1xuICBsZXQgY29tcGFyaXNvbkZ1bmM7XG4gIGxldCB0YXJnZXRQb3NpdGlvbjtcbiAgaWYgKGRpciA9PT0gXCJCVFwiKSB7XG4gICAgY29tcGFyaXNvbkZ1bmMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChhLCBiKSA9PiBhIDw9IGIsIFwiY29tcGFyaXNvbkZ1bmNcIik7XG4gICAgdGFyZ2V0UG9zaXRpb24gPSBJbmZpbml0eTtcbiAgfSBlbHNlIHtcbiAgICBjb21wYXJpc29uRnVuYyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGEsIGIpID0+IGEgPj0gYiwgXCJjb21wYXJpc29uRnVuY1wiKTtcbiAgICB0YXJnZXRQb3NpdGlvbiA9IDA7XG4gIH1cbiAgcGFyZW50cy5mb3JFYWNoKChwYXJlbnQpID0+IHtcbiAgICBjb25zdCBwYXJlbnRQb3NpdGlvbiA9IGRpciA9PT0gXCJUQlwiIHx8IGRpciA9PSBcIkJUXCIgPyBjb21taXRQb3MuZ2V0KHBhcmVudCk/LnkgOiBjb21taXRQb3MuZ2V0KHBhcmVudCk/Lng7XG4gICAgaWYgKHBhcmVudFBvc2l0aW9uICE9PSB2b2lkIDAgJiYgY29tcGFyaXNvbkZ1bmMocGFyZW50UG9zaXRpb24sIHRhcmdldFBvc2l0aW9uKSkge1xuICAgICAgY2xvc2VzdFBhcmVudCA9IHBhcmVudDtcbiAgICAgIHRhcmdldFBvc2l0aW9uID0gcGFyZW50UG9zaXRpb247XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGNsb3Nlc3RQYXJlbnQ7XG59LCBcImZpbmRDbG9zZXN0UGFyZW50XCIpO1xudmFyIGZpbmRDbG9zZXN0UGFyZW50QlQgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChwYXJlbnRzKSA9PiB7XG4gIGxldCBjbG9zZXN0UGFyZW50ID0gXCJcIjtcbiAgbGV0IG1heFBvc2l0aW9uID0gSW5maW5pdHk7XG4gIHBhcmVudHMuZm9yRWFjaCgocGFyZW50KSA9PiB7XG4gICAgY29uc3QgcGFyZW50UG9zaXRpb24gPSBjb21taXRQb3MuZ2V0KHBhcmVudCkueTtcbiAgICBpZiAocGFyZW50UG9zaXRpb24gPD0gbWF4UG9zaXRpb24pIHtcbiAgICAgIGNsb3Nlc3RQYXJlbnQgPSBwYXJlbnQ7XG4gICAgICBtYXhQb3NpdGlvbiA9IHBhcmVudFBvc2l0aW9uO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBjbG9zZXN0UGFyZW50IHx8IHZvaWQgMDtcbn0sIFwiZmluZENsb3Nlc3RQYXJlbnRCVFwiKTtcbnZhciBzZXRQYXJhbGxlbEJUUG9zID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc29ydGVkS2V5cywgY29tbWl0cywgZGVmYXVsdFBvczIpID0+IHtcbiAgbGV0IGN1clBvcyA9IGRlZmF1bHRQb3MyO1xuICBsZXQgbWF4UG9zaXRpb24gPSBkZWZhdWx0UG9zMjtcbiAgY29uc3Qgcm9vdHMgPSBbXTtcbiAgc29ydGVkS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBjb25zdCBjb21taXQyID0gY29tbWl0cy5nZXQoa2V5KTtcbiAgICBpZiAoIWNvbW1pdDIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tbWl0IG5vdCBmb3VuZCBmb3Iga2V5ICR7a2V5fWApO1xuICAgIH1cbiAgICBpZiAoY29tbWl0Mi5wYXJlbnRzLmxlbmd0aCkge1xuICAgICAgY3VyUG9zID0gY2FsY3VsYXRlQ29tbWl0UG9zaXRpb24oY29tbWl0Mik7XG4gICAgICBtYXhQb3NpdGlvbiA9IE1hdGgubWF4KGN1clBvcywgbWF4UG9zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICByb290cy5wdXNoKGNvbW1pdDIpO1xuICAgIH1cbiAgICBzZXRDb21taXRQb3NpdGlvbihjb21taXQyLCBjdXJQb3MpO1xuICB9KTtcbiAgY3VyUG9zID0gbWF4UG9zaXRpb247XG4gIHJvb3RzLmZvckVhY2goKGNvbW1pdDIpID0+IHtcbiAgICBzZXRSb290UG9zaXRpb24oY29tbWl0MiwgY3VyUG9zLCBkZWZhdWx0UG9zMik7XG4gIH0pO1xuICBzb3J0ZWRLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGNvbnN0IGNvbW1pdDIgPSBjb21taXRzLmdldChrZXkpO1xuICAgIGlmIChjb21taXQyPy5wYXJlbnRzLmxlbmd0aCkge1xuICAgICAgY29uc3QgY2xvc2VzdFBhcmVudCA9IGZpbmRDbG9zZXN0UGFyZW50QlQoY29tbWl0Mi5wYXJlbnRzKTtcbiAgICAgIGN1clBvcyA9IGNvbW1pdFBvcy5nZXQoY2xvc2VzdFBhcmVudCkueSAtIENPTU1JVF9TVEVQO1xuICAgICAgaWYgKGN1clBvcyA8PSBtYXhQb3NpdGlvbikge1xuICAgICAgICBtYXhQb3NpdGlvbiA9IGN1clBvcztcbiAgICAgIH1cbiAgICAgIGNvbnN0IHggPSBicmFuY2hQb3MuZ2V0KGNvbW1pdDIuYnJhbmNoKS5wb3M7XG4gICAgICBjb25zdCB5ID0gY3VyUG9zIC0gTEFZT1VUX09GRlNFVDtcbiAgICAgIGNvbW1pdFBvcy5zZXQoY29tbWl0Mi5pZCwgeyB4LCB5IH0pO1xuICAgIH1cbiAgfSk7XG59LCBcInNldFBhcmFsbGVsQlRQb3NcIik7XG52YXIgZmluZENsb3Nlc3RQYXJlbnRQb3MgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChjb21taXQyKSA9PiB7XG4gIGNvbnN0IGNsb3Nlc3RQYXJlbnQgPSBmaW5kQ2xvc2VzdFBhcmVudChjb21taXQyLnBhcmVudHMuZmlsdGVyKChwKSA9PiBwICE9PSBudWxsKSk7XG4gIGlmICghY2xvc2VzdFBhcmVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2xvc2VzdCBwYXJlbnQgbm90IGZvdW5kIGZvciBjb21taXQgJHtjb21taXQyLmlkfWApO1xuICB9XG4gIGNvbnN0IGNsb3Nlc3RQYXJlbnRQb3MgPSBjb21taXRQb3MuZ2V0KGNsb3Nlc3RQYXJlbnQpPy55O1xuICBpZiAoY2xvc2VzdFBhcmVudFBvcyA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDbG9zZXN0IHBhcmVudCBwb3NpdGlvbiBub3QgZm91bmQgZm9yIGNvbW1pdCAke2NvbW1pdDIuaWR9YCk7XG4gIH1cbiAgcmV0dXJuIGNsb3Nlc3RQYXJlbnRQb3M7XG59LCBcImZpbmRDbG9zZXN0UGFyZW50UG9zXCIpO1xudmFyIGNhbGN1bGF0ZUNvbW1pdFBvc2l0aW9uID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoY29tbWl0MikgPT4ge1xuICBjb25zdCBjbG9zZXN0UGFyZW50UG9zID0gZmluZENsb3Nlc3RQYXJlbnRQb3MoY29tbWl0Mik7XG4gIHJldHVybiBjbG9zZXN0UGFyZW50UG9zICsgQ09NTUlUX1NURVA7XG59LCBcImNhbGN1bGF0ZUNvbW1pdFBvc2l0aW9uXCIpO1xudmFyIHNldENvbW1pdFBvc2l0aW9uID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoY29tbWl0MiwgY3VyUG9zKSA9PiB7XG4gIGNvbnN0IGJyYW5jaDIgPSBicmFuY2hQb3MuZ2V0KGNvbW1pdDIuYnJhbmNoKTtcbiAgaWYgKCFicmFuY2gyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBCcmFuY2ggbm90IGZvdW5kIGZvciBjb21taXQgJHtjb21taXQyLmlkfWApO1xuICB9XG4gIGNvbnN0IHggPSBicmFuY2gyLnBvcztcbiAgY29uc3QgeSA9IGN1clBvcyArIExBWU9VVF9PRkZTRVQ7XG4gIGNvbW1pdFBvcy5zZXQoY29tbWl0Mi5pZCwgeyB4LCB5IH0pO1xuICByZXR1cm4geyB4LCB5IH07XG59LCBcInNldENvbW1pdFBvc2l0aW9uXCIpO1xudmFyIHNldFJvb3RQb3NpdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGNvbW1pdDIsIGN1clBvcywgZGVmYXVsdFBvczIpID0+IHtcbiAgY29uc3QgYnJhbmNoMiA9IGJyYW5jaFBvcy5nZXQoY29tbWl0Mi5icmFuY2gpO1xuICBpZiAoIWJyYW5jaDIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEJyYW5jaCBub3QgZm91bmQgZm9yIGNvbW1pdCAke2NvbW1pdDIuaWR9YCk7XG4gIH1cbiAgY29uc3QgeSA9IGN1clBvcyArIGRlZmF1bHRQb3MyO1xuICBjb25zdCB4ID0gYnJhbmNoMi5wb3M7XG4gIGNvbW1pdFBvcy5zZXQoY29tbWl0Mi5pZCwgeyB4LCB5IH0pO1xufSwgXCJzZXRSb290UG9zaXRpb25cIik7XG52YXIgZHJhd0NvbW1pdEJ1bGxldCA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGdCdWxsZXRzLCBjb21taXQyLCBjb21taXRQb3NpdGlvbiwgdHlwZUNsYXNzLCBicmFuY2hJbmRleCwgY29tbWl0U3ltYm9sVHlwZSkgPT4ge1xuICBpZiAoY29tbWl0U3ltYm9sVHlwZSA9PT0gY29tbWl0VHlwZS5ISUdITElHSFQpIHtcbiAgICBnQnVsbGV0cy5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJ4XCIsIGNvbW1pdFBvc2l0aW9uLnggLSAxMCkuYXR0cihcInlcIiwgY29tbWl0UG9zaXRpb24ueSAtIDEwKS5hdHRyKFwid2lkdGhcIiwgMjApLmF0dHIoXCJoZWlnaHRcIiwgMjApLmF0dHIoXG4gICAgICBcImNsYXNzXCIsXG4gICAgICBgY29tbWl0ICR7Y29tbWl0Mi5pZH0gY29tbWl0LWhpZ2hsaWdodCR7YnJhbmNoSW5kZXggJSBUSEVNRV9DT0xPUl9MSU1JVH0gJHt0eXBlQ2xhc3N9LW91dGVyYFxuICAgICk7XG4gICAgZ0J1bGxldHMuYXBwZW5kKFwicmVjdFwiKS5hdHRyKFwieFwiLCBjb21taXRQb3NpdGlvbi54IC0gNikuYXR0cihcInlcIiwgY29tbWl0UG9zaXRpb24ueSAtIDYpLmF0dHIoXCJ3aWR0aFwiLCAxMikuYXR0cihcImhlaWdodFwiLCAxMikuYXR0cihcbiAgICAgIFwiY2xhc3NcIixcbiAgICAgIGBjb21taXQgJHtjb21taXQyLmlkfSBjb21taXQke2JyYW5jaEluZGV4ICUgVEhFTUVfQ09MT1JfTElNSVR9ICR7dHlwZUNsYXNzfS1pbm5lcmBcbiAgICApO1xuICB9IGVsc2UgaWYgKGNvbW1pdFN5bWJvbFR5cGUgPT09IGNvbW1pdFR5cGUuQ0hFUlJZX1BJQ0spIHtcbiAgICBnQnVsbGV0cy5hcHBlbmQoXCJjaXJjbGVcIikuYXR0cihcImN4XCIsIGNvbW1pdFBvc2l0aW9uLngpLmF0dHIoXCJjeVwiLCBjb21taXRQb3NpdGlvbi55KS5hdHRyKFwiclwiLCAxMCkuYXR0cihcImNsYXNzXCIsIGBjb21taXQgJHtjb21taXQyLmlkfSAke3R5cGVDbGFzc31gKTtcbiAgICBnQnVsbGV0cy5hcHBlbmQoXCJjaXJjbGVcIikuYXR0cihcImN4XCIsIGNvbW1pdFBvc2l0aW9uLnggLSAzKS5hdHRyKFwiY3lcIiwgY29tbWl0UG9zaXRpb24ueSArIDIpLmF0dHIoXCJyXCIsIDIuNzUpLmF0dHIoXCJmaWxsXCIsIFwiI2ZmZlwiKS5hdHRyKFwiY2xhc3NcIiwgYGNvbW1pdCAke2NvbW1pdDIuaWR9ICR7dHlwZUNsYXNzfWApO1xuICAgIGdCdWxsZXRzLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY3hcIiwgY29tbWl0UG9zaXRpb24ueCArIDMpLmF0dHIoXCJjeVwiLCBjb21taXRQb3NpdGlvbi55ICsgMikuYXR0cihcInJcIiwgMi43NSkuYXR0cihcImZpbGxcIiwgXCIjZmZmXCIpLmF0dHIoXCJjbGFzc1wiLCBgY29tbWl0ICR7Y29tbWl0Mi5pZH0gJHt0eXBlQ2xhc3N9YCk7XG4gICAgZ0J1bGxldHMuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwieDFcIiwgY29tbWl0UG9zaXRpb24ueCArIDMpLmF0dHIoXCJ5MVwiLCBjb21taXRQb3NpdGlvbi55ICsgMSkuYXR0cihcIngyXCIsIGNvbW1pdFBvc2l0aW9uLngpLmF0dHIoXCJ5MlwiLCBjb21taXRQb3NpdGlvbi55IC0gNSkuYXR0cihcInN0cm9rZVwiLCBcIiNmZmZcIikuYXR0cihcImNsYXNzXCIsIGBjb21taXQgJHtjb21taXQyLmlkfSAke3R5cGVDbGFzc31gKTtcbiAgICBnQnVsbGV0cy5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJ4MVwiLCBjb21taXRQb3NpdGlvbi54IC0gMykuYXR0cihcInkxXCIsIGNvbW1pdFBvc2l0aW9uLnkgKyAxKS5hdHRyKFwieDJcIiwgY29tbWl0UG9zaXRpb24ueCkuYXR0cihcInkyXCIsIGNvbW1pdFBvc2l0aW9uLnkgLSA1KS5hdHRyKFwic3Ryb2tlXCIsIFwiI2ZmZlwiKS5hdHRyKFwiY2xhc3NcIiwgYGNvbW1pdCAke2NvbW1pdDIuaWR9ICR7dHlwZUNsYXNzfWApO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGNpcmNsZSA9IGdCdWxsZXRzLmFwcGVuZChcImNpcmNsZVwiKTtcbiAgICBjaXJjbGUuYXR0cihcImN4XCIsIGNvbW1pdFBvc2l0aW9uLngpO1xuICAgIGNpcmNsZS5hdHRyKFwiY3lcIiwgY29tbWl0UG9zaXRpb24ueSk7XG4gICAgY2lyY2xlLmF0dHIoXCJyXCIsIGNvbW1pdDIudHlwZSA9PT0gY29tbWl0VHlwZS5NRVJHRSA/IDkgOiAxMCk7XG4gICAgY2lyY2xlLmF0dHIoXCJjbGFzc1wiLCBgY29tbWl0ICR7Y29tbWl0Mi5pZH0gY29tbWl0JHticmFuY2hJbmRleCAlIFRIRU1FX0NPTE9SX0xJTUlUfWApO1xuICAgIGlmIChjb21taXRTeW1ib2xUeXBlID09PSBjb21taXRUeXBlLk1FUkdFKSB7XG4gICAgICBjb25zdCBjaXJjbGUyID0gZ0J1bGxldHMuYXBwZW5kKFwiY2lyY2xlXCIpO1xuICAgICAgY2lyY2xlMi5hdHRyKFwiY3hcIiwgY29tbWl0UG9zaXRpb24ueCk7XG4gICAgICBjaXJjbGUyLmF0dHIoXCJjeVwiLCBjb21taXRQb3NpdGlvbi55KTtcbiAgICAgIGNpcmNsZTIuYXR0cihcInJcIiwgNik7XG4gICAgICBjaXJjbGUyLmF0dHIoXG4gICAgICAgIFwiY2xhc3NcIixcbiAgICAgICAgYGNvbW1pdCAke3R5cGVDbGFzc30gJHtjb21taXQyLmlkfSBjb21taXQke2JyYW5jaEluZGV4ICUgVEhFTUVfQ09MT1JfTElNSVR9YFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGNvbW1pdFN5bWJvbFR5cGUgPT09IGNvbW1pdFR5cGUuUkVWRVJTRSkge1xuICAgICAgY29uc3QgY3Jvc3MgPSBnQnVsbGV0cy5hcHBlbmQoXCJwYXRoXCIpO1xuICAgICAgY3Jvc3MuYXR0cihcbiAgICAgICAgXCJkXCIsXG4gICAgICAgIGBNICR7Y29tbWl0UG9zaXRpb24ueCAtIDV9LCR7Y29tbWl0UG9zaXRpb24ueSAtIDV9TCR7Y29tbWl0UG9zaXRpb24ueCArIDV9LCR7Y29tbWl0UG9zaXRpb24ueSArIDV9TSR7Y29tbWl0UG9zaXRpb24ueCAtIDV9LCR7Y29tbWl0UG9zaXRpb24ueSArIDV9TCR7Y29tbWl0UG9zaXRpb24ueCArIDV9LCR7Y29tbWl0UG9zaXRpb24ueSAtIDV9YFxuICAgICAgKS5hdHRyKFwiY2xhc3NcIiwgYGNvbW1pdCAke3R5cGVDbGFzc30gJHtjb21taXQyLmlkfSBjb21taXQke2JyYW5jaEluZGV4ICUgVEhFTUVfQ09MT1JfTElNSVR9YCk7XG4gICAgfVxuICB9XG59LCBcImRyYXdDb21taXRCdWxsZXRcIik7XG52YXIgZHJhd0NvbW1pdExhYmVsID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoZ0xhYmVscywgY29tbWl0MiwgY29tbWl0UG9zaXRpb24sIHBvcykgPT4ge1xuICBpZiAoY29tbWl0Mi50eXBlICE9PSBjb21taXRUeXBlLkNIRVJSWV9QSUNLICYmIChjb21taXQyLmN1c3RvbUlkICYmIGNvbW1pdDIudHlwZSA9PT0gY29tbWl0VHlwZS5NRVJHRSB8fCBjb21taXQyLnR5cGUgIT09IGNvbW1pdFR5cGUuTUVSR0UpICYmIERFRkFVTFRfR0lUR1JBUEhfQ09ORklHMj8uc2hvd0NvbW1pdExhYmVsKSB7XG4gICAgY29uc3Qgd3JhcHBlciA9IGdMYWJlbHMuYXBwZW5kKFwiZ1wiKTtcbiAgICBjb25zdCBsYWJlbEJrZyA9IHdyYXBwZXIuaW5zZXJ0KFwicmVjdFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJjb21taXQtbGFiZWwtYmtnXCIpO1xuICAgIGNvbnN0IHRleHQgPSB3cmFwcGVyLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgcG9zKS5hdHRyKFwieVwiLCBjb21taXRQb3NpdGlvbi55ICsgMjUpLmF0dHIoXCJjbGFzc1wiLCBcImNvbW1pdC1sYWJlbFwiKS50ZXh0KGNvbW1pdDIuaWQpO1xuICAgIGNvbnN0IGJib3ggPSB0ZXh0Lm5vZGUoKT8uZ2V0QkJveCgpO1xuICAgIGlmIChiYm94KSB7XG4gICAgICBsYWJlbEJrZy5hdHRyKFwieFwiLCBjb21taXRQb3NpdGlvbi5wb3NXaXRoT2Zmc2V0IC0gYmJveC53aWR0aCAvIDIgLSBQWSkuYXR0cihcInlcIiwgY29tbWl0UG9zaXRpb24ueSArIDEzLjUpLmF0dHIoXCJ3aWR0aFwiLCBiYm94LndpZHRoICsgMiAqIFBZKS5hdHRyKFwiaGVpZ2h0XCIsIGJib3guaGVpZ2h0ICsgMiAqIFBZKTtcbiAgICAgIGlmIChkaXIgPT09IFwiVEJcIiB8fCBkaXIgPT09IFwiQlRcIikge1xuICAgICAgICBsYWJlbEJrZy5hdHRyKFwieFwiLCBjb21taXRQb3NpdGlvbi54IC0gKGJib3gud2lkdGggKyA0ICogUFggKyA1KSkuYXR0cihcInlcIiwgY29tbWl0UG9zaXRpb24ueSAtIDEyKTtcbiAgICAgICAgdGV4dC5hdHRyKFwieFwiLCBjb21taXRQb3NpdGlvbi54IC0gKGJib3gud2lkdGggKyA0ICogUFgpKS5hdHRyKFwieVwiLCBjb21taXRQb3NpdGlvbi55ICsgYmJveC5oZWlnaHQgLSAxMik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0LmF0dHIoXCJ4XCIsIGNvbW1pdFBvc2l0aW9uLnBvc1dpdGhPZmZzZXQgLSBiYm94LndpZHRoIC8gMik7XG4gICAgICB9XG4gICAgICBpZiAoREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyLnJvdGF0ZUNvbW1pdExhYmVsKSB7XG4gICAgICAgIGlmIChkaXIgPT09IFwiVEJcIiB8fCBkaXIgPT09IFwiQlRcIikge1xuICAgICAgICAgIHRleHQuYXR0cihcbiAgICAgICAgICAgIFwidHJhbnNmb3JtXCIsXG4gICAgICAgICAgICBcInJvdGF0ZSgtNDUsIFwiICsgY29tbWl0UG9zaXRpb24ueCArIFwiLCBcIiArIGNvbW1pdFBvc2l0aW9uLnkgKyBcIilcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgbGFiZWxCa2cuYXR0cihcbiAgICAgICAgICAgIFwidHJhbnNmb3JtXCIsXG4gICAgICAgICAgICBcInJvdGF0ZSgtNDUsIFwiICsgY29tbWl0UG9zaXRpb24ueCArIFwiLCBcIiArIGNvbW1pdFBvc2l0aW9uLnkgKyBcIilcIlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgcl94ID0gLTcuNSAtIChiYm94LndpZHRoICsgMTApIC8gMjUgKiA5LjU7XG4gICAgICAgICAgY29uc3Qgcl95ID0gMTAgKyBiYm94LndpZHRoIC8gMjUgKiA4LjU7XG4gICAgICAgICAgd3JhcHBlci5hdHRyKFxuICAgICAgICAgICAgXCJ0cmFuc2Zvcm1cIixcbiAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgcl94ICsgXCIsIFwiICsgcl95ICsgXCIpIHJvdGF0ZSgtNDUsIFwiICsgcG9zICsgXCIsIFwiICsgY29tbWl0UG9zaXRpb24ueSArIFwiKVwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufSwgXCJkcmF3Q29tbWl0TGFiZWxcIik7XG52YXIgZHJhd0NvbW1pdFRhZ3MgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChnTGFiZWxzLCBjb21taXQyLCBjb21taXRQb3NpdGlvbiwgcG9zKSA9PiB7XG4gIGlmIChjb21taXQyLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgIGxldCB5T2Zmc2V0ID0gMDtcbiAgICBsZXQgbWF4VGFnQmJveFdpZHRoID0gMDtcbiAgICBsZXQgbWF4VGFnQmJveEhlaWdodCA9IDA7XG4gICAgY29uc3QgdGFnRWxlbWVudHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHRhZ1ZhbHVlIG9mIGNvbW1pdDIudGFncy5yZXZlcnNlKCkpIHtcbiAgICAgIGNvbnN0IHJlY3QgPSBnTGFiZWxzLmluc2VydChcInBvbHlnb25cIik7XG4gICAgICBjb25zdCBob2xlID0gZ0xhYmVscy5hcHBlbmQoXCJjaXJjbGVcIik7XG4gICAgICBjb25zdCB0YWcgPSBnTGFiZWxzLmFwcGVuZChcInRleHRcIikuYXR0cihcInlcIiwgY29tbWl0UG9zaXRpb24ueSAtIDE2IC0geU9mZnNldCkuYXR0cihcImNsYXNzXCIsIFwidGFnLWxhYmVsXCIpLnRleHQodGFnVmFsdWUpO1xuICAgICAgY29uc3QgdGFnQmJveCA9IHRhZy5ub2RlKCk/LmdldEJCb3goKTtcbiAgICAgIGlmICghdGFnQmJveCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUYWcgYmJveCBub3QgZm91bmRcIik7XG4gICAgICB9XG4gICAgICBtYXhUYWdCYm94V2lkdGggPSBNYXRoLm1heChtYXhUYWdCYm94V2lkdGgsIHRhZ0Jib3gud2lkdGgpO1xuICAgICAgbWF4VGFnQmJveEhlaWdodCA9IE1hdGgubWF4KG1heFRhZ0Jib3hIZWlnaHQsIHRhZ0Jib3guaGVpZ2h0KTtcbiAgICAgIHRhZy5hdHRyKFwieFwiLCBjb21taXRQb3NpdGlvbi5wb3NXaXRoT2Zmc2V0IC0gdGFnQmJveC53aWR0aCAvIDIpO1xuICAgICAgdGFnRWxlbWVudHMucHVzaCh7XG4gICAgICAgIHRhZyxcbiAgICAgICAgaG9sZSxcbiAgICAgICAgcmVjdCxcbiAgICAgICAgeU9mZnNldFxuICAgICAgfSk7XG4gICAgICB5T2Zmc2V0ICs9IDIwO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHsgdGFnLCBob2xlLCByZWN0LCB5T2Zmc2V0OiB5T2Zmc2V0MiB9IG9mIHRhZ0VsZW1lbnRzKSB7XG4gICAgICBjb25zdCBoMiA9IG1heFRhZ0Jib3hIZWlnaHQgLyAyO1xuICAgICAgY29uc3QgbHkgPSBjb21taXRQb3NpdGlvbi55IC0gMTkuMiAtIHlPZmZzZXQyO1xuICAgICAgcmVjdC5hdHRyKFwiY2xhc3NcIiwgXCJ0YWctbGFiZWwtYmtnXCIpLmF0dHIoXG4gICAgICAgIFwicG9pbnRzXCIsXG4gICAgICAgIGBcbiAgICAgICR7cG9zIC0gbWF4VGFnQmJveFdpZHRoIC8gMiAtIFBYIC8gMn0sJHtseSArIFBZfSAgXG4gICAgICAke3BvcyAtIG1heFRhZ0Jib3hXaWR0aCAvIDIgLSBQWCAvIDJ9LCR7bHkgLSBQWX1cbiAgICAgICR7Y29tbWl0UG9zaXRpb24ucG9zV2l0aE9mZnNldCAtIG1heFRhZ0Jib3hXaWR0aCAvIDIgLSBQWH0sJHtseSAtIGgyIC0gUFl9XG4gICAgICAke2NvbW1pdFBvc2l0aW9uLnBvc1dpdGhPZmZzZXQgKyBtYXhUYWdCYm94V2lkdGggLyAyICsgUFh9LCR7bHkgLSBoMiAtIFBZfVxuICAgICAgJHtjb21taXRQb3NpdGlvbi5wb3NXaXRoT2Zmc2V0ICsgbWF4VGFnQmJveFdpZHRoIC8gMiArIFBYfSwke2x5ICsgaDIgKyBQWX1cbiAgICAgICR7Y29tbWl0UG9zaXRpb24ucG9zV2l0aE9mZnNldCAtIG1heFRhZ0Jib3hXaWR0aCAvIDIgLSBQWH0sJHtseSArIGgyICsgUFl9YFxuICAgICAgKTtcbiAgICAgIGhvbGUuYXR0cihcImN5XCIsIGx5KS5hdHRyKFwiY3hcIiwgcG9zIC0gbWF4VGFnQmJveFdpZHRoIC8gMiArIFBYIC8gMikuYXR0cihcInJcIiwgMS41KS5hdHRyKFwiY2xhc3NcIiwgXCJ0YWctaG9sZVwiKTtcbiAgICAgIGlmIChkaXIgPT09IFwiVEJcIiB8fCBkaXIgPT09IFwiQlRcIikge1xuICAgICAgICBjb25zdCB5T3JpZ2luID0gcG9zICsgeU9mZnNldDI7XG4gICAgICAgIHJlY3QuYXR0cihcImNsYXNzXCIsIFwidGFnLWxhYmVsLWJrZ1wiKS5hdHRyKFxuICAgICAgICAgIFwicG9pbnRzXCIsXG4gICAgICAgICAgYFxuICAgICAgICAke2NvbW1pdFBvc2l0aW9uLnh9LCR7eU9yaWdpbiArIDJ9XG4gICAgICAgICR7Y29tbWl0UG9zaXRpb24ueH0sJHt5T3JpZ2luIC0gMn1cbiAgICAgICAgJHtjb21taXRQb3NpdGlvbi54ICsgTEFZT1VUX09GRlNFVH0sJHt5T3JpZ2luIC0gaDIgLSAyfVxuICAgICAgICAke2NvbW1pdFBvc2l0aW9uLnggKyBMQVlPVVRfT0ZGU0VUICsgbWF4VGFnQmJveFdpZHRoICsgNH0sJHt5T3JpZ2luIC0gaDIgLSAyfVxuICAgICAgICAke2NvbW1pdFBvc2l0aW9uLnggKyBMQVlPVVRfT0ZGU0VUICsgbWF4VGFnQmJveFdpZHRoICsgNH0sJHt5T3JpZ2luICsgaDIgKyAyfVxuICAgICAgICAke2NvbW1pdFBvc2l0aW9uLnggKyBMQVlPVVRfT0ZGU0VUfSwke3lPcmlnaW4gKyBoMiArIDJ9YFxuICAgICAgICApLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMTIsMTIpIHJvdGF0ZSg0NSwgXCIgKyBjb21taXRQb3NpdGlvbi54ICsgXCIsXCIgKyBwb3MgKyBcIilcIik7XG4gICAgICAgIGhvbGUuYXR0cihcImN4XCIsIGNvbW1pdFBvc2l0aW9uLnggKyBQWCAvIDIpLmF0dHIoXCJjeVwiLCB5T3JpZ2luKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDEyLDEyKSByb3RhdGUoNDUsIFwiICsgY29tbWl0UG9zaXRpb24ueCArIFwiLFwiICsgcG9zICsgXCIpXCIpO1xuICAgICAgICB0YWcuYXR0cihcInhcIiwgY29tbWl0UG9zaXRpb24ueCArIDUpLmF0dHIoXCJ5XCIsIHlPcmlnaW4gKyAzKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDE0LDE0KSByb3RhdGUoNDUsIFwiICsgY29tbWl0UG9zaXRpb24ueCArIFwiLFwiICsgcG9zICsgXCIpXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSwgXCJkcmF3Q29tbWl0VGFnc1wiKTtcbnZhciBnZXRDb21taXRDbGFzc1R5cGUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChjb21taXQyKSA9PiB7XG4gIGNvbnN0IGNvbW1pdFN5bWJvbFR5cGUgPSBjb21taXQyLmN1c3RvbVR5cGUgPz8gY29tbWl0Mi50eXBlO1xuICBzd2l0Y2ggKGNvbW1pdFN5bWJvbFR5cGUpIHtcbiAgICBjYXNlIGNvbW1pdFR5cGUuTk9STUFMOlxuICAgICAgcmV0dXJuIFwiY29tbWl0LW5vcm1hbFwiO1xuICAgIGNhc2UgY29tbWl0VHlwZS5SRVZFUlNFOlxuICAgICAgcmV0dXJuIFwiY29tbWl0LXJldmVyc2VcIjtcbiAgICBjYXNlIGNvbW1pdFR5cGUuSElHSExJR0hUOlxuICAgICAgcmV0dXJuIFwiY29tbWl0LWhpZ2hsaWdodFwiO1xuICAgIGNhc2UgY29tbWl0VHlwZS5NRVJHRTpcbiAgICAgIHJldHVybiBcImNvbW1pdC1tZXJnZVwiO1xuICAgIGNhc2UgY29tbWl0VHlwZS5DSEVSUllfUElDSzpcbiAgICAgIHJldHVybiBcImNvbW1pdC1jaGVycnktcGlja1wiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJjb21taXQtbm9ybWFsXCI7XG4gIH1cbn0sIFwiZ2V0Q29tbWl0Q2xhc3NUeXBlXCIpO1xudmFyIGNhbGN1bGF0ZVBvc2l0aW9uID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoY29tbWl0MiwgZGlyMiwgcG9zLCBjb21taXRQb3MyKSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRDb21taXRQb3NpdGlvbiA9IHsgeDogMCwgeTogMCB9O1xuICBpZiAoY29tbWl0Mi5wYXJlbnRzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBjbG9zZXN0UGFyZW50ID0gZmluZENsb3Nlc3RQYXJlbnQoY29tbWl0Mi5wYXJlbnRzKTtcbiAgICBpZiAoY2xvc2VzdFBhcmVudCkge1xuICAgICAgY29uc3QgcGFyZW50UG9zaXRpb24gPSBjb21taXRQb3MyLmdldChjbG9zZXN0UGFyZW50KSA/PyBkZWZhdWx0Q29tbWl0UG9zaXRpb247XG4gICAgICBpZiAoZGlyMiA9PT0gXCJUQlwiKSB7XG4gICAgICAgIHJldHVybiBwYXJlbnRQb3NpdGlvbi55ICsgQ09NTUlUX1NURVA7XG4gICAgICB9IGVsc2UgaWYgKGRpcjIgPT09IFwiQlRcIikge1xuICAgICAgICBjb25zdCBjdXJyZW50UG9zaXRpb24gPSBjb21taXRQb3MyLmdldChjb21taXQyLmlkKSA/PyBkZWZhdWx0Q29tbWl0UG9zaXRpb247XG4gICAgICAgIHJldHVybiBjdXJyZW50UG9zaXRpb24ueSAtIENPTU1JVF9TVEVQO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudFBvc2l0aW9uLnggKyBDT01NSVRfU1RFUDtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGRpcjIgPT09IFwiVEJcIikge1xuICAgICAgcmV0dXJuIGRlZmF1bHRQb3M7XG4gICAgfSBlbHNlIGlmIChkaXIyID09PSBcIkJUXCIpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRQb3NpdGlvbiA9IGNvbW1pdFBvczIuZ2V0KGNvbW1pdDIuaWQpID8/IGRlZmF1bHRDb21taXRQb3NpdGlvbjtcbiAgICAgIHJldHVybiBjdXJyZW50UG9zaXRpb24ueSAtIENPTU1JVF9TVEVQO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIDA7XG59LCBcImNhbGN1bGF0ZVBvc2l0aW9uXCIpO1xudmFyIGdldENvbW1pdFBvc2l0aW9uID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoY29tbWl0MiwgcG9zLCBpc1BhcmFsbGVsQ29tbWl0cykgPT4ge1xuICBjb25zdCBwb3NXaXRoT2Zmc2V0ID0gZGlyID09PSBcIkJUXCIgJiYgaXNQYXJhbGxlbENvbW1pdHMgPyBwb3MgOiBwb3MgKyBMQVlPVVRfT0ZGU0VUO1xuICBjb25zdCB5ID0gZGlyID09PSBcIlRCXCIgfHwgZGlyID09PSBcIkJUXCIgPyBwb3NXaXRoT2Zmc2V0IDogYnJhbmNoUG9zLmdldChjb21taXQyLmJyYW5jaCk/LnBvcztcbiAgY29uc3QgeCA9IGRpciA9PT0gXCJUQlwiIHx8IGRpciA9PT0gXCJCVFwiID8gYnJhbmNoUG9zLmdldChjb21taXQyLmJyYW5jaCk/LnBvcyA6IHBvc1dpdGhPZmZzZXQ7XG4gIGlmICh4ID09PSB2b2lkIDAgfHwgeSA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBQb3NpdGlvbiB3ZXJlIHVuZGVmaW5lZCBmb3IgY29tbWl0ICR7Y29tbWl0Mi5pZH1gKTtcbiAgfVxuICByZXR1cm4geyB4LCB5LCBwb3NXaXRoT2Zmc2V0IH07XG59LCBcImdldENvbW1pdFBvc2l0aW9uXCIpO1xudmFyIGRyYXdDb21taXRzID0gLyogQF9fUFVSRV9fICovIF9fbmFtZSgoc3ZnLCBjb21taXRzLCBtb2RpZnlHcmFwaCkgPT4ge1xuICBpZiAoIURFRkFVTFRfR0lUR1JBUEhfQ09ORklHMikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkdpdEdyYXBoIGNvbmZpZyBub3QgZm91bmRcIik7XG4gIH1cbiAgY29uc3QgZ0J1bGxldHMgPSBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJjb21taXQtYnVsbGV0c1wiKTtcbiAgY29uc3QgZ0xhYmVscyA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImNvbW1pdC1sYWJlbHNcIik7XG4gIGxldCBwb3MgPSBkaXIgPT09IFwiVEJcIiB8fCBkaXIgPT09IFwiQlRcIiA/IGRlZmF1bHRQb3MgOiAwO1xuICBjb25zdCBrZXlzID0gWy4uLmNvbW1pdHMua2V5cygpXTtcbiAgY29uc3QgaXNQYXJhbGxlbENvbW1pdHMgPSBERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzI/LnBhcmFsbGVsQ29tbWl0cyA/PyBmYWxzZTtcbiAgY29uc3Qgc29ydEtleXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChhLCBiKSA9PiB7XG4gICAgY29uc3Qgc2VxQSA9IGNvbW1pdHMuZ2V0KGEpPy5zZXE7XG4gICAgY29uc3Qgc2VxQiA9IGNvbW1pdHMuZ2V0KGIpPy5zZXE7XG4gICAgcmV0dXJuIHNlcUEgIT09IHZvaWQgMCAmJiBzZXFCICE9PSB2b2lkIDAgPyBzZXFBIC0gc2VxQiA6IDA7XG4gIH0sIFwic29ydEtleXNcIik7XG4gIGxldCBzb3J0ZWRLZXlzID0ga2V5cy5zb3J0KHNvcnRLZXlzKTtcbiAgaWYgKGRpciA9PT0gXCJCVFwiKSB7XG4gICAgaWYgKGlzUGFyYWxsZWxDb21taXRzKSB7XG4gICAgICBzZXRQYXJhbGxlbEJUUG9zKHNvcnRlZEtleXMsIGNvbW1pdHMsIHBvcyk7XG4gICAgfVxuICAgIHNvcnRlZEtleXMgPSBzb3J0ZWRLZXlzLnJldmVyc2UoKTtcbiAgfVxuICBzb3J0ZWRLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGNvbnN0IGNvbW1pdDIgPSBjb21taXRzLmdldChrZXkpO1xuICAgIGlmICghY29tbWl0Mikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21taXQgbm90IGZvdW5kIGZvciBrZXkgJHtrZXl9YCk7XG4gICAgfVxuICAgIGlmIChpc1BhcmFsbGVsQ29tbWl0cykge1xuICAgICAgcG9zID0gY2FsY3VsYXRlUG9zaXRpb24oY29tbWl0MiwgZGlyLCBwb3MsIGNvbW1pdFBvcyk7XG4gICAgfVxuICAgIGNvbnN0IGNvbW1pdFBvc2l0aW9uID0gZ2V0Q29tbWl0UG9zaXRpb24oY29tbWl0MiwgcG9zLCBpc1BhcmFsbGVsQ29tbWl0cyk7XG4gICAgaWYgKG1vZGlmeUdyYXBoKSB7XG4gICAgICBjb25zdCB0eXBlQ2xhc3MgPSBnZXRDb21taXRDbGFzc1R5cGUoY29tbWl0Mik7XG4gICAgICBjb25zdCBjb21taXRTeW1ib2xUeXBlID0gY29tbWl0Mi5jdXN0b21UeXBlID8/IGNvbW1pdDIudHlwZTtcbiAgICAgIGNvbnN0IGJyYW5jaEluZGV4ID0gYnJhbmNoUG9zLmdldChjb21taXQyLmJyYW5jaCk/LmluZGV4ID8/IDA7XG4gICAgICBkcmF3Q29tbWl0QnVsbGV0KGdCdWxsZXRzLCBjb21taXQyLCBjb21taXRQb3NpdGlvbiwgdHlwZUNsYXNzLCBicmFuY2hJbmRleCwgY29tbWl0U3ltYm9sVHlwZSk7XG4gICAgICBkcmF3Q29tbWl0TGFiZWwoZ0xhYmVscywgY29tbWl0MiwgY29tbWl0UG9zaXRpb24sIHBvcyk7XG4gICAgICBkcmF3Q29tbWl0VGFncyhnTGFiZWxzLCBjb21taXQyLCBjb21taXRQb3NpdGlvbiwgcG9zKTtcbiAgICB9XG4gICAgaWYgKGRpciA9PT0gXCJUQlwiIHx8IGRpciA9PT0gXCJCVFwiKSB7XG4gICAgICBjb21taXRQb3Muc2V0KGNvbW1pdDIuaWQsIHsgeDogY29tbWl0UG9zaXRpb24ueCwgeTogY29tbWl0UG9zaXRpb24ucG9zV2l0aE9mZnNldCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29tbWl0UG9zLnNldChjb21taXQyLmlkLCB7IHg6IGNvbW1pdFBvc2l0aW9uLnBvc1dpdGhPZmZzZXQsIHk6IGNvbW1pdFBvc2l0aW9uLnkgfSk7XG4gICAgfVxuICAgIHBvcyA9IGRpciA9PT0gXCJCVFwiICYmIGlzUGFyYWxsZWxDb21taXRzID8gcG9zICsgQ09NTUlUX1NURVAgOiBwb3MgKyBDT01NSVRfU1RFUCArIExBWU9VVF9PRkZTRVQ7XG4gICAgaWYgKHBvcyA+IG1heFBvcykge1xuICAgICAgbWF4UG9zID0gcG9zO1xuICAgIH1cbiAgfSk7XG59LCBcImRyYXdDb21taXRzXCIpO1xudmFyIHNob3VsZFJlcm91dGVBcnJvdyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKGNvbW1pdEEsIGNvbW1pdEIsIHAxLCBwMiwgYWxsQ29tbWl0cykgPT4ge1xuICBjb25zdCBjb21taXRCSXNGdXJ0aGVzdCA9IGRpciA9PT0gXCJUQlwiIHx8IGRpciA9PT0gXCJCVFwiID8gcDEueCA8IHAyLnggOiBwMS55IDwgcDIueTtcbiAgY29uc3QgYnJhbmNoVG9HZXRDdXJ2ZSA9IGNvbW1pdEJJc0Z1cnRoZXN0ID8gY29tbWl0Qi5icmFuY2ggOiBjb21taXRBLmJyYW5jaDtcbiAgY29uc3QgaXNPbkJyYW5jaFRvR2V0Q3VydmUgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKCh4KSA9PiB4LmJyYW5jaCA9PT0gYnJhbmNoVG9HZXRDdXJ2ZSwgXCJpc09uQnJhbmNoVG9HZXRDdXJ2ZVwiKTtcbiAgY29uc3QgaXNCZXR3ZWVuQ29tbWl0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHgpID0+IHguc2VxID4gY29tbWl0QS5zZXEgJiYgeC5zZXEgPCBjb21taXRCLnNlcSwgXCJpc0JldHdlZW5Db21taXRzXCIpO1xuICByZXR1cm4gWy4uLmFsbENvbW1pdHMudmFsdWVzKCldLnNvbWUoKGNvbW1pdFgpID0+IHtcbiAgICByZXR1cm4gaXNCZXR3ZWVuQ29tbWl0cyhjb21taXRYKSAmJiBpc09uQnJhbmNoVG9HZXRDdXJ2ZShjb21taXRYKTtcbiAgfSk7XG59LCBcInNob3VsZFJlcm91dGVBcnJvd1wiKTtcbnZhciBmaW5kTGFuZSA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHkxLCB5MiwgZGVwdGggPSAwKSA9PiB7XG4gIGNvbnN0IGNhbmRpZGF0ZSA9IHkxICsgTWF0aC5hYnMoeTEgLSB5MikgLyAyO1xuICBpZiAoZGVwdGggPiA1KSB7XG4gICAgcmV0dXJuIGNhbmRpZGF0ZTtcbiAgfVxuICBjb25zdCBvayA9IGxhbmVzLmV2ZXJ5KChsYW5lKSA9PiBNYXRoLmFicyhsYW5lIC0gY2FuZGlkYXRlKSA+PSAxMCk7XG4gIGlmIChvaykge1xuICAgIGxhbmVzLnB1c2goY2FuZGlkYXRlKTtcbiAgICByZXR1cm4gY2FuZGlkYXRlO1xuICB9XG4gIGNvbnN0IGRpZmYgPSBNYXRoLmFicyh5MSAtIHkyKTtcbiAgcmV0dXJuIGZpbmRMYW5lKHkxLCB5MiAtIGRpZmYgLyA1LCBkZXB0aCArIDEpO1xufSwgXCJmaW5kTGFuZVwiKTtcbnZhciBkcmF3QXJyb3cgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzdmcsIGNvbW1pdEEsIGNvbW1pdEIsIGFsbENvbW1pdHMpID0+IHtcbiAgY29uc3QgcDEgPSBjb21taXRQb3MuZ2V0KGNvbW1pdEEuaWQpO1xuICBjb25zdCBwMiA9IGNvbW1pdFBvcy5nZXQoY29tbWl0Qi5pZCk7XG4gIGlmIChwMSA9PT0gdm9pZCAwIHx8IHAyID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbW1pdCBwb3NpdGlvbnMgbm90IGZvdW5kIGZvciBjb21taXRzICR7Y29tbWl0QS5pZH0gYW5kICR7Y29tbWl0Qi5pZH1gKTtcbiAgfVxuICBjb25zdCBhcnJvd05lZWRzUmVyb3V0aW5nID0gc2hvdWxkUmVyb3V0ZUFycm93KGNvbW1pdEEsIGNvbW1pdEIsIHAxLCBwMiwgYWxsQ29tbWl0cyk7XG4gIGxldCBhcmMgPSBcIlwiO1xuICBsZXQgYXJjMiA9IFwiXCI7XG4gIGxldCByYWRpdXMgPSAwO1xuICBsZXQgb2Zmc2V0ID0gMDtcbiAgbGV0IGNvbG9yQ2xhc3NOdW0gPSBicmFuY2hQb3MuZ2V0KGNvbW1pdEIuYnJhbmNoKT8uaW5kZXg7XG4gIGlmIChjb21taXRCLnR5cGUgPT09IGNvbW1pdFR5cGUuTUVSR0UgJiYgY29tbWl0QS5pZCAhPT0gY29tbWl0Qi5wYXJlbnRzWzBdKSB7XG4gICAgY29sb3JDbGFzc051bSA9IGJyYW5jaFBvcy5nZXQoY29tbWl0QS5icmFuY2gpPy5pbmRleDtcbiAgfVxuICBsZXQgbGluZURlZjtcbiAgaWYgKGFycm93TmVlZHNSZXJvdXRpbmcpIHtcbiAgICBhcmMgPSBcIkEgMTAgMTAsIDAsIDAsIDAsXCI7XG4gICAgYXJjMiA9IFwiQSAxMCAxMCwgMCwgMCwgMSxcIjtcbiAgICByYWRpdXMgPSAxMDtcbiAgICBvZmZzZXQgPSAxMDtcbiAgICBjb25zdCBsaW5lWSA9IHAxLnkgPCBwMi55ID8gZmluZExhbmUocDEueSwgcDIueSkgOiBmaW5kTGFuZShwMi55LCBwMS55KTtcbiAgICBjb25zdCBsaW5lWCA9IHAxLnggPCBwMi54ID8gZmluZExhbmUocDEueCwgcDIueCkgOiBmaW5kTGFuZShwMi54LCBwMS54KTtcbiAgICBpZiAoZGlyID09PSBcIlRCXCIpIHtcbiAgICAgIGlmIChwMS54IDwgcDIueCkge1xuICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtsaW5lWCAtIHJhZGl1c30gJHtwMS55fSAke2FyYzJ9ICR7bGluZVh9ICR7cDEueSArIG9mZnNldH0gTCAke2xpbmVYfSAke3AyLnkgLSByYWRpdXN9ICR7YXJjfSAke2xpbmVYICsgb2Zmc2V0fSAke3AyLnl9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbG9yQ2xhc3NOdW0gPSBicmFuY2hQb3MuZ2V0KGNvbW1pdEEuYnJhbmNoKT8uaW5kZXg7XG4gICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke2xpbmVYICsgcmFkaXVzfSAke3AxLnl9ICR7YXJjfSAke2xpbmVYfSAke3AxLnkgKyBvZmZzZXR9IEwgJHtsaW5lWH0gJHtwMi55IC0gcmFkaXVzfSAke2FyYzJ9ICR7bGluZVggLSBvZmZzZXR9ICR7cDIueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGlyID09PSBcIkJUXCIpIHtcbiAgICAgIGlmIChwMS54IDwgcDIueCkge1xuICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtsaW5lWCAtIHJhZGl1c30gJHtwMS55fSAke2FyY30gJHtsaW5lWH0gJHtwMS55IC0gb2Zmc2V0fSBMICR7bGluZVh9ICR7cDIueSArIHJhZGl1c30gJHthcmMyfSAke2xpbmVYICsgb2Zmc2V0fSAke3AyLnl9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbG9yQ2xhc3NOdW0gPSBicmFuY2hQb3MuZ2V0KGNvbW1pdEEuYnJhbmNoKT8uaW5kZXg7XG4gICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke2xpbmVYICsgcmFkaXVzfSAke3AxLnl9ICR7YXJjMn0gJHtsaW5lWH0gJHtwMS55IC0gb2Zmc2V0fSBMICR7bGluZVh9ICR7cDIueSArIHJhZGl1c30gJHthcmN9ICR7bGluZVggLSBvZmZzZXR9ICR7cDIueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocDEueSA8IHAyLnkpIHtcbiAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDEueH0gJHtsaW5lWSAtIHJhZGl1c30gJHthcmN9ICR7cDEueCArIG9mZnNldH0gJHtsaW5lWX0gTCAke3AyLnggLSByYWRpdXN9ICR7bGluZVl9ICR7YXJjMn0gJHtwMi54fSAke2xpbmVZICsgb2Zmc2V0fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb2xvckNsYXNzTnVtID0gYnJhbmNoUG9zLmdldChjb21taXRBLmJyYW5jaCk/LmluZGV4O1xuICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtwMS54fSAke2xpbmVZICsgcmFkaXVzfSAke2FyYzJ9ICR7cDEueCArIG9mZnNldH0gJHtsaW5lWX0gTCAke3AyLnggLSByYWRpdXN9ICR7bGluZVl9ICR7YXJjfSAke3AyLnh9ICR7bGluZVkgLSBvZmZzZXR9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYXJjID0gXCJBIDIwIDIwLCAwLCAwLCAwLFwiO1xuICAgIGFyYzIgPSBcIkEgMjAgMjAsIDAsIDAsIDEsXCI7XG4gICAgcmFkaXVzID0gMjA7XG4gICAgb2Zmc2V0ID0gMjA7XG4gICAgaWYgKGRpciA9PT0gXCJUQlwiKSB7XG4gICAgICBpZiAocDEueCA8IHAyLngpIHtcbiAgICAgICAgaWYgKGNvbW1pdEIudHlwZSA9PT0gY29tbWl0VHlwZS5NRVJHRSAmJiBjb21taXRBLmlkICE9PSBjb21taXRCLnBhcmVudHNbMF0pIHtcbiAgICAgICAgICBsaW5lRGVmID0gYE0gJHtwMS54fSAke3AxLnl9IEwgJHtwMS54fSAke3AyLnkgLSByYWRpdXN9ICR7YXJjfSAke3AxLnggKyBvZmZzZXR9ICR7cDIueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AyLnggLSByYWRpdXN9ICR7cDEueX0gJHthcmMyfSAke3AyLnh9ICR7cDEueSArIG9mZnNldH0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocDEueCA+IHAyLngpIHtcbiAgICAgICAgYXJjID0gXCJBIDIwIDIwLCAwLCAwLCAwLFwiO1xuICAgICAgICBhcmMyID0gXCJBIDIwIDIwLCAwLCAwLCAxLFwiO1xuICAgICAgICByYWRpdXMgPSAyMDtcbiAgICAgICAgb2Zmc2V0ID0gMjA7XG4gICAgICAgIGlmIChjb21taXRCLnR5cGUgPT09IGNvbW1pdFR5cGUuTUVSR0UgJiYgY29tbWl0QS5pZCAhPT0gY29tbWl0Qi5wYXJlbnRzWzBdKSB7XG4gICAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDEueH0gJHtwMi55IC0gcmFkaXVzfSAke2FyYzJ9ICR7cDEueCAtIG9mZnNldH0gJHtwMi55fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDIueCArIHJhZGl1c30gJHtwMS55fSAke2FyY30gJHtwMi54fSAke3AxLnkgKyBvZmZzZXR9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHAxLnggPT09IHAyLngpIHtcbiAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkaXIgPT09IFwiQlRcIikge1xuICAgICAgaWYgKHAxLnggPCBwMi54KSB7XG4gICAgICAgIGlmIChjb21taXRCLnR5cGUgPT09IGNvbW1pdFR5cGUuTUVSR0UgJiYgY29tbWl0QS5pZCAhPT0gY29tbWl0Qi5wYXJlbnRzWzBdKSB7XG4gICAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDEueH0gJHtwMi55ICsgcmFkaXVzfSAke2FyYzJ9ICR7cDEueCArIG9mZnNldH0gJHtwMi55fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDIueCAtIHJhZGl1c30gJHtwMS55fSAke2FyY30gJHtwMi54fSAke3AxLnkgLSBvZmZzZXR9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHAxLnggPiBwMi54KSB7XG4gICAgICAgIGFyYyA9IFwiQSAyMCAyMCwgMCwgMCwgMCxcIjtcbiAgICAgICAgYXJjMiA9IFwiQSAyMCAyMCwgMCwgMCwgMSxcIjtcbiAgICAgICAgcmFkaXVzID0gMjA7XG4gICAgICAgIG9mZnNldCA9IDIwO1xuICAgICAgICBpZiAoY29tbWl0Qi50eXBlID09PSBjb21taXRUeXBlLk1FUkdFICYmIGNvbW1pdEEuaWQgIT09IGNvbW1pdEIucGFyZW50c1swXSkge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AxLnh9ICR7cDIueSArIHJhZGl1c30gJHthcmN9ICR7cDEueCAtIG9mZnNldH0gJHtwMi55fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDIueCAtIHJhZGl1c30gJHtwMS55fSAke2FyY30gJHtwMi54fSAke3AxLnkgLSBvZmZzZXR9IEwgJHtwMi54fSAke3AyLnl9YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHAxLnggPT09IHAyLngpIHtcbiAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwMS55IDwgcDIueSkge1xuICAgICAgICBpZiAoY29tbWl0Qi50eXBlID09PSBjb21taXRUeXBlLk1FUkdFICYmIGNvbW1pdEEuaWQgIT09IGNvbW1pdEIucGFyZW50c1swXSkge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AyLnggLSByYWRpdXN9ICR7cDEueX0gJHthcmMyfSAke3AyLnh9ICR7cDEueSArIG9mZnNldH0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AxLnh9ICR7cDIueSAtIHJhZGl1c30gJHthcmN9ICR7cDEueCArIG9mZnNldH0gJHtwMi55fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwMS55ID4gcDIueSkge1xuICAgICAgICBpZiAoY29tbWl0Qi50eXBlID09PSBjb21taXRUeXBlLk1FUkdFICYmIGNvbW1pdEEuaWQgIT09IGNvbW1pdEIucGFyZW50c1swXSkge1xuICAgICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AyLnggLSByYWRpdXN9ICR7cDEueX0gJHthcmN9ICR7cDIueH0gJHtwMS55IC0gb2Zmc2V0fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZURlZiA9IGBNICR7cDEueH0gJHtwMS55fSBMICR7cDEueH0gJHtwMi55ICsgcmFkaXVzfSAke2FyYzJ9ICR7cDEueCArIG9mZnNldH0gJHtwMi55fSBMICR7cDIueH0gJHtwMi55fWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwMS55ID09PSBwMi55KSB7XG4gICAgICAgIGxpbmVEZWYgPSBgTSAke3AxLnh9ICR7cDEueX0gTCAke3AyLnh9ICR7cDIueX1gO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAobGluZURlZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTGluZSBkZWZpbml0aW9uIG5vdCBmb3VuZFwiKTtcbiAgfVxuICBzdmcuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiZFwiLCBsaW5lRGVmKS5hdHRyKFwiY2xhc3NcIiwgXCJhcnJvdyBhcnJvd1wiICsgY29sb3JDbGFzc051bSAlIFRIRU1FX0NPTE9SX0xJTUlUKTtcbn0sIFwiZHJhd0Fycm93XCIpO1xudmFyIGRyYXdBcnJvd3MgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChzdmcsIGNvbW1pdHMpID0+IHtcbiAgY29uc3QgZ0Fycm93cyA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImNvbW1pdC1hcnJvd3NcIik7XG4gIFsuLi5jb21taXRzLmtleXMoKV0uZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgY29uc3QgY29tbWl0MiA9IGNvbW1pdHMuZ2V0KGtleSk7XG4gICAgaWYgKGNvbW1pdDIucGFyZW50cyAmJiBjb21taXQyLnBhcmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgY29tbWl0Mi5wYXJlbnRzLmZvckVhY2goKHBhcmVudCkgPT4ge1xuICAgICAgICBkcmF3QXJyb3coZ0Fycm93cywgY29tbWl0cy5nZXQocGFyZW50KSwgY29tbWl0MiwgY29tbWl0cyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSwgXCJkcmF3QXJyb3dzXCIpO1xudmFyIGRyYXdCcmFuY2hlcyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKHN2ZywgYnJhbmNoZXMpID0+IHtcbiAgY29uc3QgZyA9IHN2Zy5hcHBlbmQoXCJnXCIpO1xuICBicmFuY2hlcy5mb3JFYWNoKChicmFuY2gyLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGFkanVzdEluZGV4Rm9yVGhlbWUgPSBpbmRleCAlIFRIRU1FX0NPTE9SX0xJTUlUO1xuICAgIGNvbnN0IHBvcyA9IGJyYW5jaFBvcy5nZXQoYnJhbmNoMi5uYW1lKT8ucG9zO1xuICAgIGlmIChwb3MgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBQb3NpdGlvbiBub3QgZm91bmQgZm9yIGJyYW5jaCAke2JyYW5jaDIubmFtZX1gKTtcbiAgICB9XG4gICAgY29uc3QgbGluZSA9IGcuYXBwZW5kKFwibGluZVwiKTtcbiAgICBsaW5lLmF0dHIoXCJ4MVwiLCAwKTtcbiAgICBsaW5lLmF0dHIoXCJ5MVwiLCBwb3MpO1xuICAgIGxpbmUuYXR0cihcIngyXCIsIG1heFBvcyk7XG4gICAgbGluZS5hdHRyKFwieTJcIiwgcG9zKTtcbiAgICBsaW5lLmF0dHIoXCJjbGFzc1wiLCBcImJyYW5jaCBicmFuY2hcIiArIGFkanVzdEluZGV4Rm9yVGhlbWUpO1xuICAgIGlmIChkaXIgPT09IFwiVEJcIikge1xuICAgICAgbGluZS5hdHRyKFwieTFcIiwgZGVmYXVsdFBvcyk7XG4gICAgICBsaW5lLmF0dHIoXCJ4MVwiLCBwb3MpO1xuICAgICAgbGluZS5hdHRyKFwieTJcIiwgbWF4UG9zKTtcbiAgICAgIGxpbmUuYXR0cihcIngyXCIsIHBvcyk7XG4gICAgfSBlbHNlIGlmIChkaXIgPT09IFwiQlRcIikge1xuICAgICAgbGluZS5hdHRyKFwieTFcIiwgbWF4UG9zKTtcbiAgICAgIGxpbmUuYXR0cihcIngxXCIsIHBvcyk7XG4gICAgICBsaW5lLmF0dHIoXCJ5MlwiLCBkZWZhdWx0UG9zKTtcbiAgICAgIGxpbmUuYXR0cihcIngyXCIsIHBvcyk7XG4gICAgfVxuICAgIGxhbmVzLnB1c2gocG9zKTtcbiAgICBjb25zdCBuYW1lID0gYnJhbmNoMi5uYW1lO1xuICAgIGNvbnN0IGxhYmVsRWxlbWVudCA9IGRyYXdUZXh0KG5hbWUpO1xuICAgIGNvbnN0IGJrZyA9IGcuaW5zZXJ0KFwicmVjdFwiKTtcbiAgICBjb25zdCBicmFuY2hMYWJlbCA9IGcuaW5zZXJ0KFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJicmFuY2hMYWJlbFwiKTtcbiAgICBjb25zdCBsYWJlbCA9IGJyYW5jaExhYmVsLmluc2VydChcImdcIikuYXR0cihcImNsYXNzXCIsIFwibGFiZWwgYnJhbmNoLWxhYmVsXCIgKyBhZGp1c3RJbmRleEZvclRoZW1lKTtcbiAgICBsYWJlbC5ub2RlKCkuYXBwZW5kQ2hpbGQobGFiZWxFbGVtZW50KTtcbiAgICBjb25zdCBiYm94ID0gbGFiZWxFbGVtZW50LmdldEJCb3goKTtcbiAgICBia2cuYXR0cihcImNsYXNzXCIsIFwiYnJhbmNoTGFiZWxCa2cgbGFiZWxcIiArIGFkanVzdEluZGV4Rm9yVGhlbWUpLmF0dHIoXCJyeFwiLCA0KS5hdHRyKFwicnlcIiwgNCkuYXR0cihcInhcIiwgLWJib3gud2lkdGggLSA0IC0gKERFRkFVTFRfR0lUR1JBUEhfQ09ORklHMj8ucm90YXRlQ29tbWl0TGFiZWwgPT09IHRydWUgPyAzMCA6IDApKS5hdHRyKFwieVwiLCAtYmJveC5oZWlnaHQgLyAyICsgOCkuYXR0cihcIndpZHRoXCIsIGJib3gud2lkdGggKyAxOCkuYXR0cihcImhlaWdodFwiLCBiYm94LmhlaWdodCArIDQpO1xuICAgIGxhYmVsLmF0dHIoXG4gICAgICBcInRyYW5zZm9ybVwiLFxuICAgICAgXCJ0cmFuc2xhdGUoXCIgKyAoLWJib3gud2lkdGggLSAxNCAtIChERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzI/LnJvdGF0ZUNvbW1pdExhYmVsID09PSB0cnVlID8gMzAgOiAwKSkgKyBcIiwgXCIgKyAocG9zIC0gYmJveC5oZWlnaHQgLyAyIC0gMSkgKyBcIilcIlxuICAgICk7XG4gICAgaWYgKGRpciA9PT0gXCJUQlwiKSB7XG4gICAgICBia2cuYXR0cihcInhcIiwgcG9zIC0gYmJveC53aWR0aCAvIDIgLSAxMCkuYXR0cihcInlcIiwgMCk7XG4gICAgICBsYWJlbC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKHBvcyAtIGJib3gud2lkdGggLyAyIC0gNSkgKyBcIiwgMClcIik7XG4gICAgfSBlbHNlIGlmIChkaXIgPT09IFwiQlRcIikge1xuICAgICAgYmtnLmF0dHIoXCJ4XCIsIHBvcyAtIGJib3gud2lkdGggLyAyIC0gMTApLmF0dHIoXCJ5XCIsIG1heFBvcyk7XG4gICAgICBsYWJlbC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgKHBvcyAtIGJib3gud2lkdGggLyAyIC0gNSkgKyBcIiwgXCIgKyBtYXhQb3MgKyBcIilcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJrZy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKC0xOSwgXCIgKyAocG9zIC0gYmJveC5oZWlnaHQgLyAyKSArIFwiKVwiKTtcbiAgICB9XG4gIH0pO1xufSwgXCJkcmF3QnJhbmNoZXNcIik7XG52YXIgc2V0QnJhbmNoUG9zaXRpb24gPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKGZ1bmN0aW9uKG5hbWUsIHBvcywgaW5kZXgsIGJib3gsIHJvdGF0ZUNvbW1pdExhYmVsKSB7XG4gIGJyYW5jaFBvcy5zZXQobmFtZSwgeyBwb3MsIGluZGV4IH0pO1xuICBwb3MgKz0gNTAgKyAocm90YXRlQ29tbWl0TGFiZWwgPyA0MCA6IDApICsgKGRpciA9PT0gXCJUQlwiIHx8IGRpciA9PT0gXCJCVFwiID8gYmJveC53aWR0aCAvIDIgOiAwKTtcbiAgcmV0dXJuIHBvcztcbn0sIFwic2V0QnJhbmNoUG9zaXRpb25cIik7XG52YXIgZHJhdyA9IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoZnVuY3Rpb24odHh0LCBpZCwgdmVyLCBkaWFnT2JqKSB7XG4gIGNsZWFyMygpO1xuICBsb2cuZGVidWcoXCJpbiBnaXRncmFwaCByZW5kZXJlclwiLCB0eHQgKyBcIlxcblwiLCBcImlkOlwiLCBpZCwgdmVyKTtcbiAgaWYgKCFERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJHaXRHcmFwaCBjb25maWcgbm90IGZvdW5kXCIpO1xuICB9XG4gIGNvbnN0IHJvdGF0ZUNvbW1pdExhYmVsID0gREVGQVVMVF9HSVRHUkFQSF9DT05GSUcyLnJvdGF0ZUNvbW1pdExhYmVsID8/IGZhbHNlO1xuICBjb25zdCBkYjIgPSBkaWFnT2JqLmRiO1xuICBhbGxDb21taXRzRGljdCA9IGRiMi5nZXRDb21taXRzKCk7XG4gIGNvbnN0IGJyYW5jaGVzID0gZGIyLmdldEJyYW5jaGVzQXNPYmpBcnJheSgpO1xuICBkaXIgPSBkYjIuZ2V0RGlyZWN0aW9uKCk7XG4gIGNvbnN0IGRpYWdyYW0yID0gc2VsZWN0KGBbaWQ9XCIke2lkfVwiXWApO1xuICBsZXQgcG9zID0gMDtcbiAgYnJhbmNoZXMuZm9yRWFjaCgoYnJhbmNoMiwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBsYWJlbEVsZW1lbnQgPSBkcmF3VGV4dChicmFuY2gyLm5hbWUpO1xuICAgIGNvbnN0IGcgPSBkaWFncmFtMi5hcHBlbmQoXCJnXCIpO1xuICAgIGNvbnN0IGJyYW5jaExhYmVsID0gZy5pbnNlcnQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImJyYW5jaExhYmVsXCIpO1xuICAgIGNvbnN0IGxhYmVsID0gYnJhbmNoTGFiZWwuaW5zZXJ0KFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJsYWJlbCBicmFuY2gtbGFiZWxcIik7XG4gICAgbGFiZWwubm9kZSgpPy5hcHBlbmRDaGlsZChsYWJlbEVsZW1lbnQpO1xuICAgIGNvbnN0IGJib3ggPSBsYWJlbEVsZW1lbnQuZ2V0QkJveCgpO1xuICAgIHBvcyA9IHNldEJyYW5jaFBvc2l0aW9uKGJyYW5jaDIubmFtZSwgcG9zLCBpbmRleCwgYmJveCwgcm90YXRlQ29tbWl0TGFiZWwpO1xuICAgIGxhYmVsLnJlbW92ZSgpO1xuICAgIGJyYW5jaExhYmVsLnJlbW92ZSgpO1xuICAgIGcucmVtb3ZlKCk7XG4gIH0pO1xuICBkcmF3Q29tbWl0cyhkaWFncmFtMiwgYWxsQ29tbWl0c0RpY3QsIGZhbHNlKTtcbiAgaWYgKERFRkFVTFRfR0lUR1JBUEhfQ09ORklHMi5zaG93QnJhbmNoZXMpIHtcbiAgICBkcmF3QnJhbmNoZXMoZGlhZ3JhbTIsIGJyYW5jaGVzKTtcbiAgfVxuICBkcmF3QXJyb3dzKGRpYWdyYW0yLCBhbGxDb21taXRzRGljdCk7XG4gIGRyYXdDb21taXRzKGRpYWdyYW0yLCBhbGxDb21taXRzRGljdCwgdHJ1ZSk7XG4gIHV0aWxzX2RlZmF1bHQuaW5zZXJ0VGl0bGUoXG4gICAgZGlhZ3JhbTIsXG4gICAgXCJnaXRUaXRsZVRleHRcIixcbiAgICBERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzIudGl0bGVUb3BNYXJnaW4gPz8gMCxcbiAgICBkYjIuZ2V0RGlhZ3JhbVRpdGxlKClcbiAgKTtcbiAgc2V0dXBHcmFwaFZpZXdib3goXG4gICAgdm9pZCAwLFxuICAgIGRpYWdyYW0yLFxuICAgIERFRkFVTFRfR0lUR1JBUEhfQ09ORklHMi5kaWFncmFtUGFkZGluZyxcbiAgICBERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzIudXNlTWF4V2lkdGhcbiAgKTtcbn0sIFwiZHJhd1wiKTtcbnZhciBnaXRHcmFwaFJlbmRlcmVyX2RlZmF1bHQgPSB7XG4gIGRyYXdcbn07XG5pZiAodm9pZCAwKSB7XG4gIGNvbnN0IHsgaXQsIGV4cGVjdCwgZGVzY3JpYmUgfSA9IHZvaWQgMDtcbiAgZGVzY3JpYmUoXCJkcmF3VGV4dFwiLCAoKSA9PiB7XG4gICAgaXQoXCJzaG91bGQgZHJhd1RleHRcIiwgKCkgPT4ge1xuICAgICAgY29uc3Qgc3ZnTGFiZWwgPSBkcmF3VGV4dChcIm1haW5cIik7XG4gICAgICBleHBlY3Qoc3ZnTGFiZWwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qoc3ZnTGFiZWwuY2hpbGRyZW5bMF0uaW5uZXJIVE1MKS50b0JlKFwibWFpblwiKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKFwiYnJhbmNoUG9zaXRpb25cIiwgKCkgPT4ge1xuICAgIGNvbnN0IGJib3ggPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHdpZHRoOiAxMCxcbiAgICAgIGhlaWdodDogMTAsXG4gICAgICB0b3A6IDAsXG4gICAgICByaWdodDogMCxcbiAgICAgIGJvdHRvbTogMCxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICB0b0pTT046IC8qIEBfX1BVUkVfXyAqLyBfX25hbWUoKCkgPT4gXCJcIiwgXCJ0b0pTT05cIilcbiAgICB9O1xuICAgIGl0KFwic2hvdWxkIHNldEJyYW5jaFBvc2l0aW9ucyBMUiB3aXRoIHR3byBicmFuY2hlc1wiLCAoKSA9PiB7XG4gICAgICBkaXIgPSBcIkxSXCI7XG4gICAgICBjb25zdCBwb3MgPSBzZXRCcmFuY2hQb3NpdGlvbihcIm1haW5cIiwgMCwgMCwgYmJveCwgdHJ1ZSk7XG4gICAgICBleHBlY3QocG9zKS50b0JlKDkwKTtcbiAgICAgIGV4cGVjdChicmFuY2hQb3MuZ2V0KFwibWFpblwiKSkudG9FcXVhbCh7IHBvczogMCwgaW5kZXg6IDAgfSk7XG4gICAgICBjb25zdCBwb3NOZXh0ID0gc2V0QnJhbmNoUG9zaXRpb24oXCJkZXZlbG9wXCIsIHBvcywgMSwgYmJveCwgdHJ1ZSk7XG4gICAgICBleHBlY3QocG9zTmV4dCkudG9CZSgxODApO1xuICAgICAgZXhwZWN0KGJyYW5jaFBvcy5nZXQoXCJkZXZlbG9wXCIpKS50b0VxdWFsKHsgcG9zLCBpbmRleDogMSB9KTtcbiAgICB9KTtcbiAgICBpdChcInNob3VsZCBzZXRCcmFuY2hQb3NpdGlvbnMgVEIgd2l0aCB0d28gYnJhbmNoZXNcIiwgKCkgPT4ge1xuICAgICAgZGlyID0gXCJUQlwiO1xuICAgICAgYmJveC53aWR0aCA9IDM0Ljk5MjE4NzU7XG4gICAgICBjb25zdCBwb3MgPSBzZXRCcmFuY2hQb3NpdGlvbihcIm1haW5cIiwgMCwgMCwgYmJveCwgdHJ1ZSk7XG4gICAgICBleHBlY3QocG9zKS50b0JlKDEwNy40OTYwOTM3NSk7XG4gICAgICBleHBlY3QoYnJhbmNoUG9zLmdldChcIm1haW5cIikpLnRvRXF1YWwoeyBwb3M6IDAsIGluZGV4OiAwIH0pO1xuICAgICAgYmJveC53aWR0aCA9IDU2LjQyMTg3NTtcbiAgICAgIGNvbnN0IHBvc05leHQgPSBzZXRCcmFuY2hQb3NpdGlvbihcImRldmVsb3BcIiwgcG9zLCAxLCBiYm94LCB0cnVlKTtcbiAgICAgIGV4cGVjdChwb3NOZXh0KS50b0JlKDIyNS43MDcwMzEyNSk7XG4gICAgICBleHBlY3QoYnJhbmNoUG9zLmdldChcImRldmVsb3BcIikpLnRvRXF1YWwoeyBwb3MsIGluZGV4OiAxIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoXCJjb21taXRQb3NpdGlvblwiLCAoKSA9PiB7XG4gICAgY29uc3QgY29tbWl0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKFtcbiAgICAgIFtcbiAgICAgICAgXCJjb21taXRaZXJvXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJaRVJPXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJcIixcbiAgICAgICAgICBzZXE6IDAsXG4gICAgICAgICAgdHlwZTogY29tbWl0VHlwZS5OT1JNQUwsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW10sXG4gICAgICAgICAgYnJhbmNoOiBcIm1haW5cIlxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBcImNvbW1pdEFcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIkFcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgICAgIHNlcTogMSxcbiAgICAgICAgICB0eXBlOiBjb21taXRUeXBlLk5PUk1BTCxcbiAgICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgICBwYXJlbnRzOiBbXCJaRVJPXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJmZWF0dXJlXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCJjb21taXRCXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJCXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJcIixcbiAgICAgICAgICBzZXE6IDIsXG4gICAgICAgICAgdHlwZTogY29tbWl0VHlwZS5OT1JNQUwsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiQVwiXSxcbiAgICAgICAgICBicmFuY2g6IFwiZmVhdHVyZVwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiY29tbWl0TVwiLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IFwiTVwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwibWVyZ2VkIGJyYW5jaCBmZWF0dXJlIGludG8gbWFpblwiLFxuICAgICAgICAgIHNlcTogMyxcbiAgICAgICAgICB0eXBlOiBjb21taXRUeXBlLk1FUkdFLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIlpFUk9cIiwgXCJCXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJtYWluXCIsXG4gICAgICAgICAgY3VzdG9tSWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCJjb21taXRDXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJDXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJcIixcbiAgICAgICAgICBzZXE6IDQsXG4gICAgICAgICAgdHlwZTogY29tbWl0VHlwZS5OT1JNQUwsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiWkVST1wiXSxcbiAgICAgICAgICBicmFuY2g6IFwicmVsZWFzZVwiXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFwiY29tbWl0NV84OTI4ZWEwXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCI1LTg5MjhlYTBcIixcbiAgICAgICAgICBtZXNzYWdlOiBcImNoZXJyeS1waWNrZWQgW29iamVjdCBPYmplY3RdIGludG8gcmVsZWFzZVwiLFxuICAgICAgICAgIHNlcTogNSxcbiAgICAgICAgICB0eXBlOiBjb21taXRUeXBlLkNIRVJSWV9QSUNLLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtcIkNcIiwgXCJNXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJyZWxlYXNlXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCJjb21taXREXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJEXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJcIixcbiAgICAgICAgICBzZXE6IDYsXG4gICAgICAgICAgdHlwZTogY29tbWl0VHlwZS5OT1JNQUwsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiNS04OTI4ZWEwXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJyZWxlYXNlXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCJjb21taXQ3X2VkODQ4YmFcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIjctZWQ4NDhiYVwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiY2hlcnJ5LXBpY2tlZCBbb2JqZWN0IE9iamVjdF0gaW50byByZWxlYXNlXCIsXG4gICAgICAgICAgc2VxOiA3LFxuICAgICAgICAgIHR5cGU6IGNvbW1pdFR5cGUuQ0hFUlJZX1BJQ0ssXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiRFwiLCBcIk1cIl0sXG4gICAgICAgICAgYnJhbmNoOiBcInJlbGVhc2VcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgXSk7XG4gICAgbGV0IHBvcyA9IDA7XG4gICAgYnJhbmNoUG9zLnNldChcIm1haW5cIiwgeyBwb3M6IDAsIGluZGV4OiAwIH0pO1xuICAgIGJyYW5jaFBvcy5zZXQoXCJmZWF0dXJlXCIsIHsgcG9zOiAxMDcuNDk2MDkzNzUsIGluZGV4OiAxIH0pO1xuICAgIGJyYW5jaFBvcy5zZXQoXCJyZWxlYXNlXCIsIHsgcG9zOiAyMjQuMDM1MTU2MjUsIGluZGV4OiAyIH0pO1xuICAgIGRlc2NyaWJlKFwiVEJcIiwgKCkgPT4ge1xuICAgICAgcG9zID0gMzA7XG4gICAgICBkaXIgPSBcIlRCXCI7XG4gICAgICBjb25zdCBleHBlY3RlZENvbW1pdFBvc2l0aW9uVEIgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gICAgICAgIFtcImNvbW1pdFplcm9cIiwgeyB4OiAwLCB5OiA0MCwgcG9zV2l0aE9mZnNldDogNDAgfV0sXG4gICAgICAgIFtcImNvbW1pdEFcIiwgeyB4OiAxMDcuNDk2MDkzNzUsIHk6IDkwLCBwb3NXaXRoT2Zmc2V0OiA5MCB9XSxcbiAgICAgICAgW1wiY29tbWl0QlwiLCB7IHg6IDEwNy40OTYwOTM3NSwgeTogMTQwLCBwb3NXaXRoT2Zmc2V0OiAxNDAgfV0sXG4gICAgICAgIFtcImNvbW1pdE1cIiwgeyB4OiAwLCB5OiAxOTAsIHBvc1dpdGhPZmZzZXQ6IDE5MCB9XSxcbiAgICAgICAgW1wiY29tbWl0Q1wiLCB7IHg6IDIyNC4wMzUxNTYyNSwgeTogMjQwLCBwb3NXaXRoT2Zmc2V0OiAyNDAgfV0sXG4gICAgICAgIFtcImNvbW1pdDVfODkyOGVhMFwiLCB7IHg6IDIyNC4wMzUxNTYyNSwgeTogMjkwLCBwb3NXaXRoT2Zmc2V0OiAyOTAgfV0sXG4gICAgICAgIFtcImNvbW1pdERcIiwgeyB4OiAyMjQuMDM1MTU2MjUsIHk6IDM0MCwgcG9zV2l0aE9mZnNldDogMzQwIH1dLFxuICAgICAgICBbXCJjb21taXQ3X2VkODQ4YmFcIiwgeyB4OiAyMjQuMDM1MTU2MjUsIHk6IDM5MCwgcG9zV2l0aE9mZnNldDogMzkwIH1dXG4gICAgICBdKTtcbiAgICAgIGNvbW1pdHMuZm9yRWFjaCgoY29tbWl0Miwga2V5KSA9PiB7XG4gICAgICAgIGl0KGBzaG91bGQgZ2l2ZSB0aGUgY29ycmVjdCBwb3NpdGlvbiBmb3IgY29tbWl0ICR7a2V5fWAsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGdldENvbW1pdFBvc2l0aW9uKGNvbW1pdDIsIHBvcywgZmFsc2UpO1xuICAgICAgICAgIGV4cGVjdChwb3NpdGlvbikudG9FcXVhbChleHBlY3RlZENvbW1pdFBvc2l0aW9uVEIuZ2V0KGtleSkpO1xuICAgICAgICAgIHBvcyArPSA1MDtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZShcIkxSXCIsICgpID0+IHtcbiAgICAgIGxldCBwb3MyID0gMzA7XG4gICAgICBkaXIgPSBcIkxSXCI7XG4gICAgICBjb25zdCBleHBlY3RlZENvbW1pdFBvc2l0aW9uTFIgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gICAgICAgIFtcImNvbW1pdFplcm9cIiwgeyB4OiAwLCB5OiA0MCwgcG9zV2l0aE9mZnNldDogNDAgfV0sXG4gICAgICAgIFtcImNvbW1pdEFcIiwgeyB4OiAxMDcuNDk2MDkzNzUsIHk6IDkwLCBwb3NXaXRoT2Zmc2V0OiA5MCB9XSxcbiAgICAgICAgW1wiY29tbWl0QlwiLCB7IHg6IDEwNy40OTYwOTM3NSwgeTogMTQwLCBwb3NXaXRoT2Zmc2V0OiAxNDAgfV0sXG4gICAgICAgIFtcImNvbW1pdE1cIiwgeyB4OiAwLCB5OiAxOTAsIHBvc1dpdGhPZmZzZXQ6IDE5MCB9XSxcbiAgICAgICAgW1wiY29tbWl0Q1wiLCB7IHg6IDIyNC4wMzUxNTYyNSwgeTogMjQwLCBwb3NXaXRoT2Zmc2V0OiAyNDAgfV0sXG4gICAgICAgIFtcImNvbW1pdDVfODkyOGVhMFwiLCB7IHg6IDIyNC4wMzUxNTYyNSwgeTogMjkwLCBwb3NXaXRoT2Zmc2V0OiAyOTAgfV0sXG4gICAgICAgIFtcImNvbW1pdERcIiwgeyB4OiAyMjQuMDM1MTU2MjUsIHk6IDM0MCwgcG9zV2l0aE9mZnNldDogMzQwIH1dLFxuICAgICAgICBbXCJjb21taXQ3X2VkODQ4YmFcIiwgeyB4OiAyMjQuMDM1MTU2MjUsIHk6IDM5MCwgcG9zV2l0aE9mZnNldDogMzkwIH1dXG4gICAgICBdKTtcbiAgICAgIGNvbW1pdHMuZm9yRWFjaCgoY29tbWl0Miwga2V5KSA9PiB7XG4gICAgICAgIGl0KGBzaG91bGQgZ2l2ZSB0aGUgY29ycmVjdCBwb3NpdGlvbiBmb3IgY29tbWl0ICR7a2V5fWAsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGdldENvbW1pdFBvc2l0aW9uKGNvbW1pdDIsIHBvczIsIGZhbHNlKTtcbiAgICAgICAgICBleHBlY3QocG9zaXRpb24pLnRvRXF1YWwoZXhwZWN0ZWRDb21taXRQb3NpdGlvbkxSLmdldChrZXkpKTtcbiAgICAgICAgICBwb3MyICs9IDUwO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKFwiZ2V0Q29tbWl0Q2xhc3NUeXBlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGV4cGVjdGVkQ29tbWl0Q2xhc3NUeXBlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICAgICAgICBbXCJjb21taXRaZXJvXCIsIFwiY29tbWl0LW5vcm1hbFwiXSxcbiAgICAgICAgW1wiY29tbWl0QVwiLCBcImNvbW1pdC1ub3JtYWxcIl0sXG4gICAgICAgIFtcImNvbW1pdEJcIiwgXCJjb21taXQtbm9ybWFsXCJdLFxuICAgICAgICBbXCJjb21taXRNXCIsIFwiY29tbWl0LW1lcmdlXCJdLFxuICAgICAgICBbXCJjb21taXRDXCIsIFwiY29tbWl0LW5vcm1hbFwiXSxcbiAgICAgICAgW1wiY29tbWl0NV84OTI4ZWEwXCIsIFwiY29tbWl0LWNoZXJyeS1waWNrXCJdLFxuICAgICAgICBbXCJjb21taXREXCIsIFwiY29tbWl0LW5vcm1hbFwiXSxcbiAgICAgICAgW1wiY29tbWl0N19lZDg0OGJhXCIsIFwiY29tbWl0LWNoZXJyeS1waWNrXCJdXG4gICAgICBdKTtcbiAgICAgIGNvbW1pdHMuZm9yRWFjaCgoY29tbWl0Miwga2V5KSA9PiB7XG4gICAgICAgIGl0KGBzaG91bGQgZ2l2ZSB0aGUgY29ycmVjdCBjbGFzcyB0eXBlIGZvciBjb21taXQgJHtrZXl9YCwgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNsYXNzVHlwZSA9IGdldENvbW1pdENsYXNzVHlwZShjb21taXQyKTtcbiAgICAgICAgICBleHBlY3QoY2xhc3NUeXBlKS50b0JlKGV4cGVjdGVkQ29tbWl0Q2xhc3NUeXBlLmdldChrZXkpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKFwiYnVpbGRpbmcgQlQgcGFyYWxsZWwgY29tbWl0IGRpYWdyYW1cIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNvbW1pdHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gICAgICBbXG4gICAgICAgIFwiMS1hYmNkZWZnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCIxLWFiY2RlZmdcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgICAgIHNlcTogMCxcbiAgICAgICAgICB0eXBlOiAwLFxuICAgICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICAgIHBhcmVudHM6IFtdLFxuICAgICAgICAgIGJyYW5jaDogXCJtYWluXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCIyLWFiY2RlZmdcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIjItYWJjZGVmZ1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiAxLFxuICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiMS1hYmNkZWZnXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJtYWluXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCIzLWFiY2RlZmdcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIjMtYWJjZGVmZ1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiAyLFxuICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiMi1hYmNkZWZnXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJkZXZlbG9wXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCI0LWFiY2RlZmdcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIjQtYWJjZGVmZ1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiAzLFxuICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiMy1hYmNkZWZnXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJkZXZlbG9wXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCI1LWFiY2RlZmdcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIjUtYWJjZGVmZ1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiA0LFxuICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiMi1hYmNkZWZnXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJmZWF0dXJlXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCI2LWFiY2RlZmdcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIjYtYWJjZGVmZ1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiA1LFxuICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiNS1hYmNkZWZnXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJmZWF0dXJlXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCI3LWFiY2RlZmdcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIjctYWJjZGVmZ1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiA2LFxuICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiMi1hYmNkZWZnXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJtYWluXCJcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCI4LWFiY2RlZmdcIixcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBcIjgtYWJjZGVmZ1wiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICAgICAgc2VxOiA3LFxuICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgdGFnczogW10sXG4gICAgICAgICAgcGFyZW50czogW1wiNy1hYmNkZWZnXCJdLFxuICAgICAgICAgIGJyYW5jaDogXCJtYWluXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIF0pO1xuICAgIGNvbnN0IGV4cGVjdGVkQ29tbWl0UG9zaXRpb24gPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gICAgICBbXCIxLWFiY2RlZmdcIiwgeyB4OiAwLCB5OiA0MCB9XSxcbiAgICAgIFtcIjItYWJjZGVmZ1wiLCB7IHg6IDAsIHk6IDkwIH1dLFxuICAgICAgW1wiMy1hYmNkZWZnXCIsIHsgeDogMTA3LjQ5NjA5Mzc1LCB5OiAxNDAgfV0sXG4gICAgICBbXCI0LWFiY2RlZmdcIiwgeyB4OiAxMDcuNDk2MDkzNzUsIHk6IDE5MCB9XSxcbiAgICAgIFtcIjUtYWJjZGVmZ1wiLCB7IHg6IDIyNS43MDcwMzEyNSwgeTogMTQwIH1dLFxuICAgICAgW1wiNi1hYmNkZWZnXCIsIHsgeDogMjI1LjcwNzAzMTI1LCB5OiAxOTAgfV0sXG4gICAgICBbXCI3LWFiY2RlZmdcIiwgeyB4OiAwLCB5OiAxNDAgfV0sXG4gICAgICBbXCI4LWFiY2RlZmdcIiwgeyB4OiAwLCB5OiAxOTAgfV1cbiAgICBdKTtcbiAgICBjb25zdCBleHBlY3RlZENvbW1pdFBvc2l0aW9uQWZ0ZXJQYXJhbGxlbCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKFtcbiAgICAgIFtcIjEtYWJjZGVmZ1wiLCB7IHg6IDAsIHk6IDIxMCB9XSxcbiAgICAgIFtcIjItYWJjZGVmZ1wiLCB7IHg6IDAsIHk6IDE2MCB9XSxcbiAgICAgIFtcIjMtYWJjZGVmZ1wiLCB7IHg6IDEwNy40OTYwOTM3NSwgeTogMTEwIH1dLFxuICAgICAgW1wiNC1hYmNkZWZnXCIsIHsgeDogMTA3LjQ5NjA5Mzc1LCB5OiA2MCB9XSxcbiAgICAgIFtcIjUtYWJjZGVmZ1wiLCB7IHg6IDIyNS43MDcwMzEyNSwgeTogMTEwIH1dLFxuICAgICAgW1wiNi1hYmNkZWZnXCIsIHsgeDogMjI1LjcwNzAzMTI1LCB5OiA2MCB9XSxcbiAgICAgIFtcIjctYWJjZGVmZ1wiLCB7IHg6IDAsIHk6IDExMCB9XSxcbiAgICAgIFtcIjgtYWJjZGVmZ1wiLCB7IHg6IDAsIHk6IDYwIH1dXG4gICAgXSk7XG4gICAgY29uc3QgZXhwZWN0ZWRDb21taXRDdXJyZW50UG9zaXRpb24gPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gICAgICBbXCIxLWFiY2RlZmdcIiwgMzBdLFxuICAgICAgW1wiMi1hYmNkZWZnXCIsIDgwXSxcbiAgICAgIFtcIjMtYWJjZGVmZ1wiLCAxMzBdLFxuICAgICAgW1wiNC1hYmNkZWZnXCIsIDE4MF0sXG4gICAgICBbXCI1LWFiY2RlZmdcIiwgMTMwXSxcbiAgICAgIFtcIjYtYWJjZGVmZ1wiLCAxODBdLFxuICAgICAgW1wiNy1hYmNkZWZnXCIsIDEzMF0sXG4gICAgICBbXCI4LWFiY2RlZmdcIiwgMTgwXVxuICAgIF0pO1xuICAgIGNvbnN0IHNvcnRlZEtleXMgPSBbLi4uZXhwZWN0ZWRDb21taXRQb3NpdGlvbi5rZXlzKCldO1xuICAgIGl0KFwic2hvdWxkIGdldCB0aGUgY29ycmVjdCBjb21taXQgcG9zaXRpb24gYW5kIGN1cnJlbnQgcG9zaXRpb25cIiwgKCkgPT4ge1xuICAgICAgZGlyID0gXCJCVFwiO1xuICAgICAgbGV0IGN1clBvcyA9IDMwO1xuICAgICAgY29tbWl0UG9zLmNsZWFyKCk7XG4gICAgICBicmFuY2hQb3MuY2xlYXIoKTtcbiAgICAgIGJyYW5jaFBvcy5zZXQoXCJtYWluXCIsIHsgcG9zOiAwLCBpbmRleDogMCB9KTtcbiAgICAgIGJyYW5jaFBvcy5zZXQoXCJkZXZlbG9wXCIsIHsgcG9zOiAxMDcuNDk2MDkzNzUsIGluZGV4OiAxIH0pO1xuICAgICAgYnJhbmNoUG9zLnNldChcImZlYXR1cmVcIiwgeyBwb3M6IDIyNS43MDcwMzEyNSwgaW5kZXg6IDIgfSk7XG4gICAgICBERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzIucGFyYWxsZWxDb21taXRzID0gdHJ1ZTtcbiAgICAgIGNvbW1pdHMuZm9yRWFjaCgoY29tbWl0Miwga2V5KSA9PiB7XG4gICAgICAgIGlmIChjb21taXQyLnBhcmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGN1clBvcyA9IGNhbGN1bGF0ZUNvbW1pdFBvc2l0aW9uKGNvbW1pdDIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gc2V0Q29tbWl0UG9zaXRpb24oY29tbWl0MiwgY3VyUG9zKTtcbiAgICAgICAgZXhwZWN0KHBvc2l0aW9uKS50b0VxdWFsKGV4cGVjdGVkQ29tbWl0UG9zaXRpb24uZ2V0KGtleSkpO1xuICAgICAgICBleHBlY3QoY3VyUG9zKS50b0VxdWFsKGV4cGVjdGVkQ29tbWl0Q3VycmVudFBvc2l0aW9uLmdldChrZXkpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KFwic2hvdWxkIGdldCB0aGUgY29ycmVjdCBjb21taXQgcG9zaXRpb24gYWZ0ZXIgcGFyYWxsZWwgY29tbWl0c1wiLCAoKSA9PiB7XG4gICAgICBjb21taXRQb3MuY2xlYXIoKTtcbiAgICAgIGJyYW5jaFBvcy5jbGVhcigpO1xuICAgICAgZGlyID0gXCJCVFwiO1xuICAgICAgY29uc3QgY3VyUG9zID0gMzA7XG4gICAgICBjb21taXRQb3MuY2xlYXIoKTtcbiAgICAgIGJyYW5jaFBvcy5jbGVhcigpO1xuICAgICAgYnJhbmNoUG9zLnNldChcIm1haW5cIiwgeyBwb3M6IDAsIGluZGV4OiAwIH0pO1xuICAgICAgYnJhbmNoUG9zLnNldChcImRldmVsb3BcIiwgeyBwb3M6IDEwNy40OTYwOTM3NSwgaW5kZXg6IDEgfSk7XG4gICAgICBicmFuY2hQb3Muc2V0KFwiZmVhdHVyZVwiLCB7IHBvczogMjI1LjcwNzAzMTI1LCBpbmRleDogMiB9KTtcbiAgICAgIHNldFBhcmFsbGVsQlRQb3Moc29ydGVkS2V5cywgY29tbWl0cywgY3VyUG9zKTtcbiAgICAgIHNvcnRlZEtleXMuZm9yRWFjaCgoY29tbWl0MikgPT4ge1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGNvbW1pdFBvcy5nZXQoY29tbWl0Mik7XG4gICAgICAgIGV4cGVjdChwb3NpdGlvbikudG9FcXVhbChleHBlY3RlZENvbW1pdFBvc2l0aW9uQWZ0ZXJQYXJhbGxlbC5nZXQoY29tbWl0MikpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBERUZBVUxUX0dJVEdSQVBIX0NPTkZJRzIucGFyYWxsZWxDb21taXRzID0gZmFsc2U7XG4gIGl0KFwiYWRkXCIsICgpID0+IHtcbiAgICBjb21taXRQb3Muc2V0KFwicGFyZW50MVwiLCB7IHg6IDEsIHk6IDEgfSk7XG4gICAgY29tbWl0UG9zLnNldChcInBhcmVudDJcIiwgeyB4OiAyLCB5OiAyIH0pO1xuICAgIGNvbW1pdFBvcy5zZXQoXCJwYXJlbnQzXCIsIHsgeDogMywgeTogMyB9KTtcbiAgICBkaXIgPSBcIkxSXCI7XG4gICAgY29uc3QgcGFyZW50cyA9IFtcInBhcmVudDFcIiwgXCJwYXJlbnQyXCIsIFwicGFyZW50M1wiXTtcbiAgICBjb25zdCBjbG9zZXN0UGFyZW50ID0gZmluZENsb3Nlc3RQYXJlbnQocGFyZW50cyk7XG4gICAgZXhwZWN0KGNsb3Nlc3RQYXJlbnQpLnRvQmUoXCJwYXJlbnQzXCIpO1xuICAgIGNvbW1pdFBvcy5jbGVhcigpO1xuICB9KTtcbn1cblxuLy8gc3JjL2RpYWdyYW1zL2dpdC9zdHlsZXMuanNcbnZhciBnZXRTdHlsZXMgPSAvKiBAX19QVVJFX18gKi8gX19uYW1lKChvcHRpb25zKSA9PiBgXG4gIC5jb21taXQtaWQsXG4gIC5jb21taXQtbXNnLFxuICAuYnJhbmNoLWxhYmVsIHtcbiAgICBmaWxsOiBsaWdodGdyZXk7XG4gICAgY29sb3I6IGxpZ2h0Z3JleTtcbiAgICBmb250LWZhbWlseTogJ3RyZWJ1Y2hldCBtcycsIHZlcmRhbmEsIGFyaWFsLCBzYW5zLXNlcmlmO1xuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1tZXJtYWlkLWZvbnQtZmFtaWx5KTtcbiAgfVxuICAke1swLCAxLCAyLCAzLCA0LCA1LCA2LCA3XS5tYXAoXG4gIChpKSA9PiBgXG4gICAgICAgIC5icmFuY2gtbGFiZWwke2l9IHsgZmlsbDogJHtvcHRpb25zW1wiZ2l0QnJhbmNoTGFiZWxcIiArIGldfTsgfVxuICAgICAgICAuY29tbWl0JHtpfSB7IHN0cm9rZTogJHtvcHRpb25zW1wiZ2l0XCIgKyBpXX07IGZpbGw6ICR7b3B0aW9uc1tcImdpdFwiICsgaV19OyB9XG4gICAgICAgIC5jb21taXQtaGlnaGxpZ2h0JHtpfSB7IHN0cm9rZTogJHtvcHRpb25zW1wiZ2l0SW52XCIgKyBpXX07IGZpbGw6ICR7b3B0aW9uc1tcImdpdEludlwiICsgaV19OyB9XG4gICAgICAgIC5sYWJlbCR7aX0gIHsgZmlsbDogJHtvcHRpb25zW1wiZ2l0XCIgKyBpXX07IH1cbiAgICAgICAgLmFycm93JHtpfSB7IHN0cm9rZTogJHtvcHRpb25zW1wiZ2l0XCIgKyBpXX07IH1cbiAgICAgICAgYFxuKS5qb2luKFwiXFxuXCIpfVxuXG4gIC5icmFuY2gge1xuICAgIHN0cm9rZS13aWR0aDogMTtcbiAgICBzdHJva2U6ICR7b3B0aW9ucy5saW5lQ29sb3J9O1xuICAgIHN0cm9rZS1kYXNoYXJyYXk6IDI7XG4gIH1cbiAgLmNvbW1pdC1sYWJlbCB7IGZvbnQtc2l6ZTogJHtvcHRpb25zLmNvbW1pdExhYmVsRm9udFNpemV9OyBmaWxsOiAke29wdGlvbnMuY29tbWl0TGFiZWxDb2xvcn07fVxuICAuY29tbWl0LWxhYmVsLWJrZyB7IGZvbnQtc2l6ZTogJHtvcHRpb25zLmNvbW1pdExhYmVsRm9udFNpemV9OyBmaWxsOiAke29wdGlvbnMuY29tbWl0TGFiZWxCYWNrZ3JvdW5kfTsgb3BhY2l0eTogMC41OyB9XG4gIC50YWctbGFiZWwgeyBmb250LXNpemU6ICR7b3B0aW9ucy50YWdMYWJlbEZvbnRTaXplfTsgZmlsbDogJHtvcHRpb25zLnRhZ0xhYmVsQ29sb3J9O31cbiAgLnRhZy1sYWJlbC1ia2cgeyBmaWxsOiAke29wdGlvbnMudGFnTGFiZWxCYWNrZ3JvdW5kfTsgc3Ryb2tlOiAke29wdGlvbnMudGFnTGFiZWxCb3JkZXJ9OyB9XG4gIC50YWctaG9sZSB7IGZpbGw6ICR7b3B0aW9ucy50ZXh0Q29sb3J9OyB9XG5cbiAgLmNvbW1pdC1tZXJnZSB7XG4gICAgc3Ryb2tlOiAke29wdGlvbnMucHJpbWFyeUNvbG9yfTtcbiAgICBmaWxsOiAke29wdGlvbnMucHJpbWFyeUNvbG9yfTtcbiAgfVxuICAuY29tbWl0LXJldmVyc2Uge1xuICAgIHN0cm9rZTogJHtvcHRpb25zLnByaW1hcnlDb2xvcn07XG4gICAgZmlsbDogJHtvcHRpb25zLnByaW1hcnlDb2xvcn07XG4gICAgc3Ryb2tlLXdpZHRoOiAzO1xuICB9XG4gIC5jb21taXQtaGlnaGxpZ2h0LW91dGVyIHtcbiAgfVxuICAuY29tbWl0LWhpZ2hsaWdodC1pbm5lciB7XG4gICAgc3Ryb2tlOiAke29wdGlvbnMucHJpbWFyeUNvbG9yfTtcbiAgICBmaWxsOiAke29wdGlvbnMucHJpbWFyeUNvbG9yfTtcbiAgfVxuXG4gIC5hcnJvdyB7IHN0cm9rZS13aWR0aDogODsgc3Ryb2tlLWxpbmVjYXA6IHJvdW5kOyBmaWxsOiBub25lfVxuICAuZ2l0VGl0bGVUZXh0IHtcbiAgICB0ZXh0LWFuY2hvcjogbWlkZGxlO1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICBmaWxsOiAke29wdGlvbnMudGV4dENvbG9yfTtcbiAgfVxuYCwgXCJnZXRTdHlsZXNcIik7XG52YXIgc3R5bGVzX2RlZmF1bHQgPSBnZXRTdHlsZXM7XG5cbi8vIHNyYy9kaWFncmFtcy9naXQvZ2l0R3JhcGhEaWFncmFtLnRzXG52YXIgZGlhZ3JhbSA9IHtcbiAgcGFyc2VyLFxuICBkYixcbiAgcmVuZGVyZXI6IGdpdEdyYXBoUmVuZGVyZXJfZGVmYXVsdCxcbiAgc3R5bGVzOiBzdHlsZXNfZGVmYXVsdFxufTtcbmV4cG9ydCB7XG4gIGRpYWdyYW1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/mermaid/dist/chunks/mermaid.core/gitGraphDiagram-7IBYFJ6S.mjs\n");

/***/ })

}]);